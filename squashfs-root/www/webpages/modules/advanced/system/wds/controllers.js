!function(g){g.su.moduleManager.define("wds",{models:["wds24g","wds5g1","wds5g2","guestNetworkAdv24g","guestNetworkAdv5g1","guestNetworkAdv5g2"],stores:["wdsEncryptionStore","wepTypeStore","wepKeyFormatStore","wdsModeStore","dwdsModeStore","wds24gSurveyStore","wds5g1SurveyStore","wds5g2SurveyStore"],services:["ajax","device"],views:["wdsView"],listeners:{"ev_on_launch":function(e,d,s,t,i,n,a){this.deviceConfigs=a.device.getConfig();var w=g.Deferred();a.ajax.request({proxy:"wireless2gProxy",method:"read",success:function(e){if(void 0!==e&&d.isRunning()){var s=d.wdsGuestCompatible=e.extinfo.wdsGuestCompatible||"no";"on"===e.disabledAll?d.wds24gDisableStep2=!0:"no"===s?t.guestNetworkAdv24g.load({success:function(){"on"===t.guestNetworkAdv24g.enable.getValue()&&(d.wds24gDisableStep3=!0),w.resolve()}}):w.resolve()}}}),w.then(function(){t.wds24g.load()});var o=g.Deferred();a.ajax.request({proxy:"wireless5gProxy",method:"read",success:function(e){if(void 0!==e&&d.isRunning()){var s=d.wdsGuestCompatible=e.extinfo.wdsGuestCompatible||"no";"on"===e.disabledAll?d.wds5g1DisableStep2=!0:"no"===s?t.guestNetworkAdv5g1.load({success:function(){"on"===t.guestNetworkAdv5g1.enable.getValue()&&(d.wds5g1DisableStep3=!0),o.resolve()}}):o.resolve()}}}),o.then(function(){t.wds5g1.load()}),s.wdsView.wds5g1Panel.setTitle(g.su.CHAR.WDS.WDS_TITLE_5G)}},init:function(e,t,o,i,s,d){this.configViews({id:"wdsView",items:[{id:"wds24g-survey-grid",configs:{columns:[{text:g.su.CHAR.WDS.SSID,dataIndex:"ssid",width:130},{text:g.su.CHAR.WDS.MAC_ADDRESS,dataIndex:"mac",width:140},{text:g.su.CHAR.WDS.SIGNAL,dataIndex:"signal",renderer:function(e){var s="";return s+='<div class="signal-level-container widget-container">',s+='<span class="icon icon-signal-'+e+'"></span>',s+="</div>"}},{text:g.su.CHAR.WDS.CHANNEL,dataIndex:"channel"},{text:g.su.CHAR.WDS.SECURITY,dataIndex:"encryption",renderer:function(e){return e&&e.toUpperCase()}},{xtype:"actioncolumn",text:g.su.CHAR.WDS.OPERATION,renderer:function(){var e='<a href="javascript:void(0)" class="grid-content-btn-choose">';return e+='<span class="text">'+g.su.CHAR.WDS.CHOOSE+"</span>",e+="</a>"}}]}},{id:"wds5g1-survey-grid",configs:{columns:[{text:g.su.CHAR.WDS.SSID,dataIndex:"ssid",width:130},{text:g.su.CHAR.WDS.MAC_ADDRESS,dataIndex:"mac",width:140},{text:g.su.CHAR.WDS.SIGNAL,dataIndex:"signal",renderer:function(e){var s="";return s+='<div class="signal-level-container widget-container">',s+='<span class="icon icon-signal-'+e+'"></span>',s+="</div>"}},{text:g.su.CHAR.WDS.CHANNEL,dataIndex:"channel"},{text:g.su.CHAR.WDS.SECURITY,dataIndex:"encryption",renderer:function(e){return e&&e.toUpperCase()}},{xtype:"actioncolumn",text:g.su.CHAR.WDS.OPERATION,renderer:function(){var e='<a href="javascript:void(0)" class="grid-content-btn-choose">';return e+='<span class="text">'+g.su.CHAR.WDS.CHOOSE+"</span>",e+="</a>"}}]}}]}),this.control({"#wds24g-survey-button":{"ev_button_click":function(){i.wds24gSurveyStore.load(),t.wdsView.wds24gSurveyMsg.show()}},"#wds24g-survey-grid => .grid-content-btn-choose":{"ev_grid_action_click":function(e,s){var d=i.wds24gSurveyStore.getModelByKey(s).getData();o.wds24g.ssid.setValue(d.ssid),o.wds24g.mac.setValue(d.mac),t.wdsView.wds24gSurveyMsg.hide()}},"#wds24g-survey-grid":{"ev_grid_tbar_refresh":function(e){i.wds24gSurveyStore.load()}},"#wds5g1-survey-button":{"ev_button_click":function(){i.wds5g1SurveyStore.load(),t.wdsView.wds5g1SurveyMsg.show()}},"#wds5g1-survey-grid => .grid-content-btn-choose":{"ev_grid_action_click":function(e,s){var d=i.wds5g1SurveyStore.getModelByKey(s).getData();o.wds5g1.ssid.setValue(d.ssid),o.wds5g1.mac.setValue(d.mac),t.wdsView.wds5g1SurveyMsg.hide()}},"#wds5g1-survey-grid":{"ev_grid_tbar_refresh":function(e){i.wds5g1SurveyStore.load()}}}),this.listen({"models.wds24g":{"ev_model_submit":function(e,s){this.wds24gLoadedHandler(e,s),"off"===o.wds5g1.enable.getValue()&&o.wds5g1.disableWds(),this.deviceConfigs.isTriband&&"off"===o.wds5g2.enable.getValue()&&o.wds5g2.disableWds()},"ev_loaded":this.wds24gLoadedHandler,"ev_will_auto_save":function(e,s){var d=o.wds24g.enable.getValue(),t=o.wds24g.dwdsMode.getValue(),i=o.wds24g.ssid.getValue(),n=o.wds24g.mac.getValue();if("on"===d&&"ap"!==t){if(!i&&!n)return o.wds24g.mac.setError(g.su.CHAR.ERROR["00000040"]),s.preventDefault(),!1;if("wep"==o.wds24g.encryption.getValue()){var a=o.wds24g.wepFormat1.getValue(),w=o.wds24g.wepKey1.getValue();if("asic"==a&&!/^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{5}|[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{13})$/.test(w))return o.wds24g.wepKey1.setError(g.su.CHAR.ERROR["00000120"]),s.preventDefault(),!1;if("hex"==a&&!/^([0-9a-fA-F]{10}|[0-9a-fA-F]{26})$/.test(w))return o.wds24g.wepKey1.setError(g.su.CHAR.ERROR["00000121"]),s.preventDefault(),!1}}}},"models.wds24g.enable":{"ev_value_change":function(e,s,d){o.wds24g.enable.isDisabled()||"off"===s?(t.wdsView.wds24gFieldset.hide(),this.deviceConfigs.supportDwds&&(o.wds24g.dwdsMode.hide(),o.wds24g.dwdsMode.disable(),o.wds24g.dwdsMode.reset())):this.deviceConfigs.supportDwds?(o.wds24g.dwdsMode.show(),o.wds24g.dwdsMode.enable(),o.wds24g.dwdsMode.setValue(o.wds24g.dwdsMode.getValue())):t.wdsView.wds24gFieldset.show(),this.initEnable()}},"models.wds24g.encryption":{"ev_value_change":function(e,s){switch(t.wdsView.psk24gFieldset.hide(),t.wdsView.wep24gFieldset.hide(),s){case"psk":t.wdsView.psk24gFieldset.show();break;case"wep":t.wdsView.wep24gFieldset.show()}}},"models.wds5g1":{"ev_model_submit":function(e,s){this.wds5g1LoadedHandler(e,s),"off"===o.wds24g.enable.getValue()&&o.wds24g.disableWds(),this.deviceConfigs.isTriband&&"off"===o.wds5g2.enable.getValue()&&o.wds5g2.disableWds()},"ev_loaded":this.wds5g1LoadedHandler,"ev_will_auto_save":function(e,s){var d=o.wds5g1.enable.getValue(),t=o.wds5g1.dwdsMode.getValue(),i=o.wds5g1.ssid.getValue(),n=o.wds5g1.mac.getValue();if("on"===d&&"ap"!==t){if(!i&&!n)return o.wds5g1.mac.setError(g.su.CHAR.ERROR["00000040"]),s.preventDefault(),!1;if("wep"==o.wds5g1.encryption.getValue()){var a=o.wds5g1.wepFormat1.getValue(),w=o.wds5g1.wepKey1.getValue();if("asic"==a&&!/^([A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{5}|[A-Za-z0-9\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\ ]{13})$/.test(w))return o.wds5g1.wepKey1.setError(g.su.CHAR.ERROR["00000120"]),s.preventDefault(),!1;if("hex"==a&&!/^([0-9a-fA-F]{10}|[0-9a-fA-F]{26})$/.test(w))return o.wds5g1.wepKey1.setError(g.su.CHAR.ERROR["00000121"]),s.preventDefault(),!1}}}},"models.wds5g1.enable":{"ev_value_change":function(e,s,d){o.wds5g1.enable.isDisabled()||"off"===s?(t.wdsView.wds5g1Fieldset.hide(),this.deviceConfigs.supportDwds&&(o.wds5g1.dwdsMode.hide(),o.wds5g1.dwdsMode.disable(),o.wds5g1.dwdsMode.reset())):this.deviceConfigs.supportDwds?(o.wds5g1.dwdsMode.show(),o.wds5g1.dwdsMode.enable(),o.wds5g1.dwdsMode.setValue(o.wds5g1.dwdsMode.getValue())):t.wdsView.wds5g1Fieldset.show(),this.initEnable()}},"models.wds5g1.encryption":{"ev_value_change":function(e,s){switch(t.wdsView.psk5g1Fieldset.hide(),t.wdsView.wep5g1Fieldset.hide(),s){case"psk":t.wdsView.psk5g1Fieldset.show();break;case"wep":t.wdsView.wep5g1Fieldset.show()}}}})}},function(e,d,t,s,i,n){return{wds24gDisableStep1:!1,wds24gDisableStep2:!1,wds24gDisableStep3:!1,wds5g1DisableStep1:!1,wds5g1DisableStep2:!1,wds5g1DisableStep3:!1,wds2gWds5gCompatible:"no",wdsGuestCompatible:"no",is24gDisabled:function(e){if(this.wds24gDisableStep2)return g.su.CHAR.WDS.ENABLE_TIPS;if("no"===this.wdsGuestCompatible&&this.wds24gDisableStep3)return g.su.CHAR.ERROR["00000113"];if("no"===this.wds2gWds5gCompatible){if("on"===t.wds5g1.enable.getValue())return g.su.CHAR.WDS.WDS_BAND_NOTICE;if("on"===t.wds5g2.enable.getValue())return g.su.CHAR.WDS.WDS_BAND_NOTICE}return!1},is5g1Disabled:function(e){if(this.wds5g1DisableStep2)return g.su.CHAR.WDS.ENABLE_TIPS;if("no"===this.wdsGuestCompatible&&this.wds5g1DisableStep3)return g.su.CHAR.ERROR["00000113"];if("no"===this.wds2gWds5gCompatible){if("on"===t.wds24g.enable.getValue())return g.su.CHAR.WDS.WDS_BAND_NOTICE;if("on"===t.wds5g2.enable.getValue())return g.su.CHAR.WDS.WDS_BAND_NOTICE}return!1},initEnable:function(){var e;!1!==(e=this.is24gDisabled())?(t.wds24g.enable.disable(),d.wdsView.wds24gFieldset.hide(),t.wds24g.enable.setTips(e),t.wds24g.dwdsMode.hide()):(t.wds24g.enable.enable(),t.wds24g.enable.setTips("")),!1!==(e=this.is5g1Disabled())?(t.wds5g1.enable.disable(),d.wdsView.wds5g1Fieldset.hide(),t.wds5g1.enable.setTips(e),t.wds5g1.dwdsMode.hide()):(t.wds5g1.enable.enable(),t.wds5g1.enable.setTips(""))},wds24gLoadedHandler:function(e,s){this.initEnable(),"2G"!==s.supportBand&&"none"!==s.supportBand||d.wdsView.wds5g1Panel.hide(),this.deviceConfigs.supportWdsDualmode&&(t.wds24g.wdsMode.disable(),t.wds24g.wdsMode.hide()),this.deviceConfigs.supportDwds||(t.wds24g.dwdsMode.disable(),t.wds24g.dwdsMode.hide())},wds5g1LoadedHandler:function(e,s){this.initEnable(),this.deviceConfigs.supportWdsDualmode&&(t.wds5g1.wdsMode.disable(),t.wds5g1.wdsMode.hide())},showDwdsFields:function(e,s){(s=!!s)?d.wdsView["wds"+e+"Fieldset"].show():d.wdsView["wds"+e+"Fieldset"].hide()}}})}(jQuery);