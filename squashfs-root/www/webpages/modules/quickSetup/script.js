!function(u){u.su.moduleManager.define("quickSetup",{services:["moduleLoader","ajax","device","language","moduleManager"],deps:["main","navigatorController"],models:["language","quickSetupModel","qsSummaryModel"],stores:["workModeStore","languageStore","quickSetupSteps"],views:["quickSetupView"],listeners:{"ev_start_set_pwd":function(){this.onStartSetPwd()},"ev_end_set_pwd":function(){this.onEndSetPwd()},"ev_on_launch":function(e,t,n,s,i,o,a){t=this;u.su.scrollbar({ele:".page-content-container"}),s.quickSetupModel.toggleFields(!0);var r=a.device.getLocale();a.device.getForce()?(t.lang=r,n.quickSetupView.qsLanBtn.setText(u.su.CHAR.LANGUAGE[r.toUpperCase()]),s.language.language.disable()):i.languageStore.load({success:function(){t.lang=r,s.language.language.setValue(r),n.quickSetupView.qsLanBtn.setText(u.su.CHAR.LANGUAGE[r.toUpperCase()])}}),t.initMode(),s.quickSetupModel.load({success:function(){var e=s.qsSummaryModel.ispProfile.convert(s.quickSetupModel.ispSpecialMode.getValue());s.qsSummaryModel.ispProfile.setValue(e)}}),n.quickSetupView.productName.setValue(a.device.getProductName()),i.quickSetupSteps.loadData(t.routerSteps),o.main.upgraded?this.goTo("qsCloudAndTether"):this.goTo("qsSetTimezone"),t.initModeSelectModule(),t.checkPhysicalConn()}},init:function(n,t,e,s,i,o){this.configViews({id:"quickSetupView",items:[{id:"qs-set-password-loader",model:"qsSetPasswordLoader"},{id:"qs-choose-internet-type-loader",model:"qsChooseInternetTypeLoader"}]}),this.control({"#switch-mode-button":{"ev_button_click":function(e){t.quickSetupView.switchModeMsg.show()}},"#quit-qs-button":{"ev_button_click":function(e){var t=u.su.CHAR.QUICK_SETUP["QUIT_MSG"+n.exitMsgNum];i.main.confirm(t,function(){n.quit()},null,u.su.CHAR.QUICK_SETUP.QUIT_UPPER)}},"#qs-lan-cb":{"mouseenter":function(){u("#qs-lan-button").addClass("hover")},"mouseleave":function(){u("#qs-lan-button").removeClass("hover")},"ev_view_change":function(e,t){o.language.switchTo(t.value)}},".operation-mode-switch-msg":{"ev_msg_ok":function(e,t){var n=o.moduleManager.get("operationMode");n.modeChanged()&&(n.switchModeConfirm(),t.preventDefault())}}}),this.listen({"views.quickSetupView.connectWorkMode":{"ev_value_change":function(e,t){}}})}},function(i,t,o,e,a,r){i=this;var p=[],n="router",l=!1,s={name:"qsSelectInternetPort"};return{upgradeDetail:null,noInternet:!0,skipFlag:!1,upgradeState:"noUpgrade","mode":null,exitMsgNum:1,"initMode":function(){switch(i.mode=r.device.getCurrentMode(),i.mode){case n:i.isSupportSetPort()&&i.routerSteps.splice(1,0,s),i.steps=i.routerSteps}},"steps":null,"routerSteps":[{name:"qsSetTimezone"},{name:"qsChooseInternetType"},{name:"qsInternetEdit"},{name:"qsWirelessSetting"},{name:"qsSummary"},{name:"qsCloudAndTether"}],"isSupportSetPort":function(){return!0===r.device.getConfig().supportSelectPort},"isAutoUpdate":function(){return r.device.getConfig().supportAutoUpdate},"updateSteps":function(n){u.each(i.steps,function(e,t){t&&t.name===n&&i.setStep(n)})},"getPhysicalConnStatus":function(){return l},"checkPhysicalConn":function(t){i.isSupportSetPort()?r.ajax.request({proxy:"portConnectionProxy",success:function(e){var n="2500WAN"===o.quickSetupModel.wanPortStatus.getValue()?1:2,s=!1;u.map(e,function(e){for(key in e)if(/wan/.test(key)&&/\d/.test(key)){var t=parseInt(/\d/.exec(key)[0]);n===t&&/status/.test(key)&&(s="CONNECTED"===e[key].toUpperCase())}}),l=s,t&&t(l)},fail:function(){l=!1,t&&t(!1)},error:function(){l=!1,t&&t(!1)}}):r.ajax.request({proxy:"physicalConnectionProxy",success:function(e){l=!("UNPLUGGED"===e.internet_status.toUpperCase()),t&&t(l)},fail:function(){l=!1,t&&t(!1)},error:function(){l=!1,t&&t(!1)}})},"currentStep":null,"_getChildModuleLoader":function(e){return t.quickSetupView[e+"Loader"]},"onStartSetPwd":function(){t.quickSetupView.steps.hide()},"onEndSetPwd":function(){t.quickSetupView.steps.show()},"setStep":function(e){t.quickSetupView.steps.setValue(e)},"initModeSelectModule":function(){r.moduleLoader.load({module:"quickSetup"},{module:"operationMode",view:"operationModeViewQs"},t.quickSetupView.operationModeLoader)},"goTo":function(e,t,n){i.currentStep&&i._getChildModuleLoader(i.currentStep).hide();var s=i._getChildModuleLoader(e);0<=u.inArray(e,p)||(r.moduleLoader.load({module:"quickSetup"},{module:e},s,function(){document.querySelector(".page-content-container").scrollTop=0,a.main.hideMask(),n&&n()}),t||p.push(e)),s.show(),document.querySelector(".page-content-container").scrollTop=0,i.currentStep=e,i.updateSteps(e)},showModule:function(e){i.currentStep&&i._getChildModuleLoader(i.currentStep).hide(),i._getChildModuleLoader(e).show(),document.querySelector(".page-content-container").scrollTop=0,i.currentStep=e,i.updateSteps(e)},"quit":function(){a.navigatorController.goTo("index")},"getQuickSetupData":function(){return o.quickSetupModel.getData()},submitAutoUpdateData:function(e){var t="on"==o.quickSetupModel.autoUpdate.getValue()?/^autoUpdate/:/^autoUpdate$/;return i.skipFlag?o.quickSetupModel.toggleFields(/^wireless/,!1):o.quickSetupModel.toggleFields(!1),o.quickSetupModel.toggleFields(t,!0),o.quickSetupModel.submit(e)},"submitQuickSetupData":function(e){return o.quickSetupModel.toggleFields(!0),o.quickSetupModel.toggleFields(/^wireless/,!1),o.quickSetupModel.toggleFields(/^autoUpdate/,!1),i.isSupportSetPort()||o.quickSetupModel.toggleFields(/^wanPortStatus/,!1),o.quickSetupModel.submit(e)},submitQsWirelssData:function(e){o.quickSetupModel.toggleFields(/^wireless/,!0),o.quickSetupModel.toggleFields(function(e){if(!/^wireless/.test(e))return!0},!1),r.device.getIsTriband()||o.quickSetupModel.toggleFields(function(e){if(/^wireless5g2/.test(e))return!0},!1),this.preloadSummary(function(){o.quickSetupModel.submit(e||{success:function(){i.goTo("qsSummary")}})})},submitAllData:function(e){o.quickSetupModel.toggleFields(/^autoUpdate/,!1),i.isSupportSetPort()||o.quickSetupModel.toggleFields(/^wanPortStatus/,!1),o.quickSetupModel.toggleFields(/^wireless/,!0),r.device.getIsTriband()||o.quickSetupModel.toggleFields(/^wireless5g2/,!1),this.preloadSummary(function(){o.quickSetupModel.submit(e||{success:function(){i.goTo("qsSummary")}})})},preloadSummary:function(e){r.moduleLoader.load({module:"quickSetup"},{module:"qsSummary"},t.quickSetupView.qsSummaryLoader,function(){e&&e()}),p.push("qsSummary")},preLoadCloudAndTether:function(e){p.push("qsCloudAndTether"),r.moduleLoader.load({module:"quickSetup"},{module:"qsCloudAndTether"},t.quickSetupView.qsCloudAndTetherLoader,function(){e&&e()})},detectUpgradeLv:function(t){t||(t=i.skipUpgrade),r.ajax.request({proxy:"onlineUpgradeProxy",data:{operation:"read"},success:function(e){i.upgradeDetail=e.detail.replace(/\\\\/g,"&#92;").replace(/\\n/g,"<br>"),e.latest_flag?t():i.goTo("qsFwUpgrade")},fail:t,error:t})},skipUpgrade:function(){i.upgradeState="noUpgrade",i.submitQsWirelssData({success:function(){i.goTo("qsSummary")}})}}})}(jQuery),$.su.modelManager.define("quickSetupModel",{type:"model",fields:[{name:"regionCountry",mapping:"region_country"},{name:"ispSpecialCfgChanged",mapping:"isp_special_cfg_changed"},{name:"ispSpecialEnable",mapping:"isp_special_enable"},{name:"ispSpecialIgmpEnable",mapping:"isp_special_igmp_enable"},{name:"ispSpecialIgmpSnoopingEnable",mapping:"isp_special_igmp_snooping_enable"},{name:"ispSpecialIgmpVersion",mapping:"isp_special_igmp_version"},{name:"ispSpecialInternetTag",mapping:"isp_special_internet_tag"},{name:"ispSpecialInternetVid",mapping:"isp_special_internet_vid"},{name:"ispSpecialInternetVprio",mapping:"isp_special_internet_vprio"},{name:"ispSpecialIpphoneVid",mapping:"isp_special_ipphone_vid"},{name:"ispSpecialIpphoneVprio",mapping:"isp_special_ipphone_vprio"},{name:"ispSpecialIptvVid",mapping:"isp_special_iptv_vid"},{name:"ispSpecialIptvVprio",mapping:"isp_special_iptv_vprio"},{name:"ispSpecialMciptvEnable",mapping:"isp_special_mciptv_enable"},{name:"ispSpecialMciptvVid",mapping:"isp_special_mciptv_vid"},{name:"ispSpecialMciptvVprio",mapping:"isp_special_mciptv_vprio"},{name:"ispSpecialMcwifiEnable",mapping:"isp_special_mcwifi_enable"},{name:"ispSpecialMode",mapping:"isp_special_mode"},{name:"ispSpecialQosIptvCompatible",mapping:"isp_special_qos_iptv_compatible"},{name:"ispSpecialWaitTime",mapping:"isp_special_wait_time"},{name:"ispSpecialPorttype",mapping:"isp_special_porttype"},{name:"networkAutodetect",mapping:"network_autodetect"},{name:"networkConntype",mapping:"network_conntype"},{name:"networkDhcpConnStatus",mapping:"network_dhcp_conn_status"},{name:"networkDhcpConntype",mapping:"network_dhcp_conntype"},{name:"networkDhcpDnsMode",mapping:"network_dhcp_dns_mode"},{name:"networkDhcpDynPridns",mapping:"network_dhcp_dyn_pridns"},{name:"networkDhcpDynSnddns",mapping:"network_dhcp_dyn_snddns"},{name:"networkDhcpGateway",mapping:"network_dhcp_gateway"},{name:"networkDhcpHostname",mapping:"network_dhcp_hostname"},{name:"networkDhcpIpaddr",mapping:"network_dhcp_ipaddr"},{name:"networkDhcpLinkStatus",mapping:"network_dhcp_link_status"},{name:"networkDhcpMacCloneType",mapping:"network_dhcp_mac_clone_type"},{name:"networkDhcpMacCustom",mapping:"network_dhcp_mac_custom"},{name:"networkDhcpManualPridns",mapping:"network_dhcp_manual_pridns"},{name:"networkDhcpManualSnddns",mapping:"network_dhcp_manual_snddns"},{name:"networkDhcpMtu",mapping:"network_dhcp_mtu"},{name:"networkDhcpNetmask",mapping:"network_dhcp_netmask"},{name:"networkDhcpPppshare",mapping:"network_dhcp_pppshare"},{name:"networkDhcpPriDns",mapping:"network_dhcp_pri_dns"},{name:"networkDhcpSndDns",mapping:"network_dhcp_snd_dns"},{name:"networkDhcpUnicast",mapping:"network_dhcp_unicast"},{name:"networkL2tpConnMode",mapping:"network_l2tp_conn_mode"},{name:"networkL2tpConnStatus",mapping:"network_l2tp_conn_status"},{name:"networkL2tpConntype",mapping:"network_l2tp_conntype"},{name:"networkL2tpDemandIdle",mapping:"network_l2tp_demand_idle"},{name:"networkL2tpDynGateway",mapping:"network_l2tp_dyn_gateway"},{name:"networkL2tpDynIp",mapping:"network_l2tp_dyn_ip"},{name:"networkL2tpDynNetmask",mapping:"network_l2tp_dyn_netmask"},{name:"networkL2tpDynPridns",mapping:"network_l2tp_dyn_pridns"},{name:"networkL2tpDynServer",mapping:"network_l2tp_dyn_server"},{name:"networkL2tpDynSnddns",mapping:"network_l2tp_dyn_snddns"},{name:"networkL2tpInetIp",mapping:"network_l2tp_inet_ip"},{name:"networkL2tpInetPridns",mapping:"network_l2tp_inet_pridns"},{name:"networkL2tpInetSnddns",mapping:"network_l2tp_inet_snddns"},{name:"networkL2tpLinkStatus",mapping:"network_l2tp_link_status"},{name:"networkL2tpManualIdle",mapping:"network_l2tp_manual_idle"},{name:"networkL2tpMtu",mapping:"network_l2tp_mtu"},{name:"networkL2tpPassword",mapping:"network_l2tp_password"},{name:"networkL2tpPppshare",mapping:"network_l2tp_pppshare"},{name:"networkL2tpSndConn",mapping:"network_l2tp_snd_conn"},{name:"networkL2tpStaticGateway",mapping:"network_l2tp_static_gateway"},{name:"networkL2tpStaticIp",mapping:"network_l2tp_static_ip"},{name:"networkL2tpStaticNetmask",mapping:"network_l2tp_static_netmask"},{name:"networkL2tpStaticPridns",mapping:"network_l2tp_static_pridns"},{name:"networkL2tpStaticServer",mapping:"network_l2tp_static_server"},{name:"networkL2tpStaticSnddns",mapping:"network_l2tp_static_snddns"},{name:"networkL2tpUsername",mapping:"network_l2tp_username"},{name:"networkPppoeUsername",mapping:"network_pppoe_username"},{name:"networkPppoeAccess",mapping:"network_pppoe_access"},{name:"networkPppoeConnMode",mapping:"network_pppoe_conn_mode"},{name:"networkPppoeConnStatus",mapping:"network_pppoe_conn_status"},{name:"networkPppoeConntype",mapping:"network_pppoe_conntype"},{name:"networkPppoeDemandIdle",mapping:"network_pppoe_demand_idle"},{name:"networkPppoeDnsMode",mapping:"network_pppoe_dns_mode"},{name:"networkPppoeDynIp",mapping:"network_pppoe_dyn_ip"},{name:"networkPppoeDynNetmask",mapping:"network_pppoe_dyn_netmask"},{name:"networkPppoeDynPridns",mapping:"network_pppoe_dyn_pridns"},{name:"networkPppoeDynSnddns",mapping:"network_pppoe_dyn_snddns"},{name:"networkPppoeInetIp",mapping:"network_pppoe_inet_ip"},{name:"networkPppoeInetPridns",mapping:"network_pppoe_inet_pridns"},{name:"networkPppoeInetSnddns",mapping:"network_pppoe_inet_snddns"},{name:"networkPppoeInterval",mapping:"network_pppoe_interval"},{name:"networkPppoeIpMode",mapping:"network_pppoe_ip_mode"},{name:"networkPppoeLinkStatus",mapping:"network_pppoe_link_status"},{name:"networkPppoeManualIdle",mapping:"network_pppoe_manual_idle"},{name:"networkPppoeMtu",mapping:"network_pppoe_mtu"},{name:"networkPppoePassword",mapping:"network_pppoe_password"},{name:"networkPppoePppshare",mapping:"network_pppoe_pppshare"},{name:"networkPppoeServer",mapping:"network_pppoe_server"},{name:"networkPppoeSndConn",mapping:"network_pppoe_snd_conn"},{name:"networkPppoeSpecificIp",mapping:"network_pppoe_specific_ip"},{name:"networkPppoeStaticIp",mapping:"network_pppoe_static_ip"},{name:"networkPppoeStaticNetmask",mapping:"network_pppoe_static_netmask"},{name:"networkPppoeStaticPridns",mapping:"network_pppoe_static_pridns"},{name:"networkPppoeStaticSnddns",mapping:"network_pppoe_static_snddns"},{name:"networkPppoeTimeEnd",mapping:"network_pppoe_time_end"},{name:"networkPptpConnMode",mapping:"network_pptp_conn_mode"},{name:"networkPptpConnStatus",mapping:"network_pptp_conn_status"},{name:"networkPptpConntype",mapping:"network_pptp_conntype"},{name:"networkPptpDemandIdle",mapping:"network_pptp_demand_idle"},{name:"networkPptpDynGateway",mapping:"network_pptp_dyn_gateway"},{name:"networkPptpDynIp",mapping:"network_pptp_dyn_ip"},{name:"networkPptpDynNetmask",mapping:"network_pptp_dyn_netmask"},{name:"networkPptpDynPridns",mapping:"network_pptp_dyn_pridns"},{name:"networkPptpDynServer",mapping:"network_pptp_dyn_server"},{name:"networkPptpDynSnddns",mapping:"network_pptp_dyn_snddns"},{name:"networkPptpInetIp",mapping:"network_pptp_inet_ip"},{name:"networkPptpInetPridns",mapping:"network_pptp_inet_pridns"},{name:"networkPptpInetSnddns",mapping:"network_pptp_inet_snddns"},{name:"networkPptpLinkStatus",mapping:"network_pptp_link_status"},{name:"networkPptpManualIdle",mapping:"network_pptp_manual_idle"},{name:"networkPptpMtu",mapping:"network_pptp_mtu"},{name:"networkPptpPassword",mapping:"network_pptp_password"},{name:"networkPptpPppshare",mapping:"network_pptp_pppshare"},{name:"networkPptpSndConn",mapping:"network_pptp_snd_conn"},{name:"networkPptpStaticGateway",mapping:"network_pptp_static_gateway"},{name:"networkPptpStaticIp",mapping:"network_pptp_static_ip"},{name:"networkPptpStaticNetmask",mapping:"network_pptp_static_netmask"},{name:"networkPptpStaticPridns",mapping:"network_pptp_static_pridns"},{name:"networkPptpStaticServer",mapping:"network_pptp_static_server"},{name:"networkPptpStaticSnddns",mapping:"network_pptp_static_snddns"},{name:"networkPptpUsername",mapping:"network_pptp_username"},{name:"networkDsliteDynMode",mapping:"network_dslite_dynamic_mode"},{name:"networkDsliteAftrName",mapping:"network_dslite_AFTR_name"},{name:"networkStaticConnStatus",mapping:"network_static_conn_status"},{name:"networkStaticConntype",mapping:"network_static_conntype"},{name:"networkStaticGateway",mapping:"network_static_gateway"},{name:"networkStaticIpaddr",mapping:"network_static_ipaddr"},{name:"networkStaticLinkStatus",mapping:"network_static_link_status"},{name:"networkStaticMtu",mapping:"network_static_mtu"},{name:"networkStaticNetmask",mapping:"network_static_netmask"},{name:"networkStaticPppshare",mapping:"network_static_pppshare"},{name:"networkStaticPriDns",mapping:"network_static_pri_dns"},{name:"networkStaticSndDns",mapping:"network_static_snd_dns"},{name:"regionCapability",mapping:"region_capability"},{name:"regionRegionSelectPermission",mapping:"region_region_select_permission"},{name:"regionSupportSmartConnect",mapping:"region_support_smart_connect"},{name:"regionSupportWirelessSchedule",mapping:"region_support_wireless_schedule"},{name:"timeDate",mapping:"time_date"},{name:"timeDay",mapping:"time_day"},{name:"timeHour24Enable",mapping:"time_hour24_enable"},{name:"timeHour24Support",mapping:"time_hour24_support"},{name:"timeNtpSvr1",mapping:"time_ntp_svr1"},{name:"timeNtpSvr2",mapping:"time_ntp_svr2"},{name:"timeQuicksetup",mapping:"time_quicksetup"},{name:"timeTime",mapping:"time_time"},{name:"timeTimezone",mapping:"time_timezone",allowBlank:!1},{name:"timeType",mapping:"time_type"},{name:"wireType",mapping:"wire_type"},{name:"wirelessSmartEnable",mapping:"smart_connect_smart_enable"},{name:"wireless2gAirtimeFairness",mapping:"wireless_2g_airtime_fairness"},{name:"wireless2gChannel",mapping:"wireless_2g_channel"},{name:"wireless2gCurrentChannel",mapping:"wireless_2g_current_channel"},{name:"wireless2gDisabled",mapping:"wireless_2g_disabled"},{name:"wireless2gDisabledAll",mapping:"wireless_2g_disabled_all"},{name:"wireless2gEnable",mapping:"wireless_2g_enable"},{name:"wireless2gEncryPassword",mapping:"wireless_2g_encry_password"},{name:"wireless2gEncryption",mapping:"wireless_2g_encryption"},{name:"wireless2gExtinfo",mapping:"wireless_2g_extinfo"},{name:"wireless2gHtmode",mapping:"wireless_2g_htmode"},{name:"wireless2gHwmode",mapping:"wireless_2g_hwmode"},{name:"wireless2gMacaddr",mapping:"wireless_2g_macaddr"},{name:"wireless2gMuMimo",mapping:"wireless_2g_mu_mimo"},{name:"wireless2gPort",mapping:"wireless_2g_port"},{name:"wireless2gPskCipher",mapping:"wireless_2g_psk_cipher"},{name:"wireless2gPskKey",mapping:"wireless_2g_psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wireless2gPskVersion",mapping:"wireless_2g_psk_version"},{name:"wireless2gServer",mapping:"wireless_2g_server"},{name:"wireless2gSsid",mapping:"wireless_2g_ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"wireless2gTxpower",mapping:"wireless_2g_txpower"},{name:"wireless2gWdsStatus",mapping:"wireless_2g_wds_status"},{name:"wireless2gWepFormat1",mapping:"wireless_2g_wep_format1"},{name:"wireless2gWepFormat2",mapping:"wireless_2g_wep_format2"},{name:"wireless2gWepFormat3",mapping:"wireless_2g_wep_format3"},{name:"wireless2gWepFormat4",mapping:"wireless_2g_wep_format4"},{name:"wireless2gWepKey1",mapping:"wireless_2g_wep_key1"},{name:"wireless2gWepKey2",mapping:"wireless_2g_wep_key2"},{name:"wireless2gWepKey3",mapping:"wireless_2g_wep_key3"},{name:"wireless2gWepKey4",mapping:"wireless_2g_wep_key4"},{name:"wireless2gWepMode",mapping:"wireless_2g_wep_mode"},{name:"wireless2gWepSelect",mapping:"wireless_2g_wep_select"},{name:"wireless2gWepType1",mapping:"wireless_2g_wep_type1"},{name:"wireless2gWepType2",mapping:"wireless_2g_wep_type2"},{name:"wireless2gWepType3",mapping:"wireless_2g_wep_type3"},{name:"wireless2gWepType4",mapping:"wireless_2g_wep_type4"},{name:"wireless2gWpaCipher",mapping:"wireless_2g_wpa_cipher"},{name:"wireless2gWpaKey",mapping:"wireless_2g_wpa_key"},{name:"wireless2gWpaVersion",mapping:"wireless_2g_wpa_version"},{name:"wireless2gWpsState",mapping:"wireless_2g_wps_state"},{name:"wireless5g2AirtimeFairness",mapping:"wireless_5g_2_airtime_fairness"},{name:"wireless5g2Channel",mapping:"wireless_5g_2_channel"},{name:"wireless5g2CurrentChannel",mapping:"wireless_5g_2_current_channel"},{name:"wireless5g2Disabled",mapping:"wireless_5g_2_disabled"},{name:"wireless5g2DisabledAll",mapping:"wireless_5g_2_disabled_all"},{name:"wireless5g2Enable",mapping:"wireless_5g_2_enable"},{name:"wireless5g2EncryPassword",mapping:"wireless_5g_2_encry_password"},{name:"wireless5g2Encryption",mapping:"wireless_5g_2_encryption"},{name:"wireless5g2regionEnable",mapping:"wireless_5g_2_region_enable"},{name:"wireless5g2Extinfo",mapping:"wireless_5g_2_extinfo"},{name:"wireless5g2Htmode",mapping:"wireless_5g_2_htmode"},{name:"wireless5g2Hwmode",mapping:"wireless_5g_2_hwmode"},{name:"wireless5g2Macaddr",mapping:"wireless_5g_2_macaddr"},{name:"wireless5g2MuMimo",mapping:"wireless_5g_2_mu_mimo"},{name:"wireless5g2Port",mapping:"wireless_5g_2_port"},{name:"wireless5g2PskCipher",mapping:"wireless_5g_2_psk_cipher"},{name:"wireless5g2PskKey",mapping:"wireless_5g_2_psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wireless5g2PskVersion",mapping:"wireless_5g_2_psk_version"},{name:"wireless5g2Server",mapping:"wireless_5g_2_server"},{name:"wireless5g2Ssid",mapping:"wireless_5g_2_ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"wireless5g2Hidden",mapping:"wireless_5g_2_hidden"},{name:"wireless5g2Txpower",mapping:"wireless_5g_2_txpower"},{name:"wireless5g2WdsStatus",mapping:"wireless_5g_2_wds_status"},{name:"wireless5g2WepFormat1",mapping:"wireless_5g_2_wep_format1"},{name:"wireless5g2WepFormat2",mapping:"wireless_5g_2_wep_format2"},{name:"wireless5g2WepFormat3",mapping:"wireless_5g_2_wep_format3"},{name:"wireless5g2WepFormat4",mapping:"wireless_5g_2_wep_format4"},{name:"wireless5g2WepKey1",mapping:"wireless_5g_2_wep_key1"},{name:"wireless5g2WepKey2",mapping:"wireless_5g_2_wep_key2"},{name:"wireless5g2WepKey3",mapping:"wireless_5g_2_wep_key3"},{name:"wireless5g2WepKey4",mapping:"wireless_5g_2_wep_key4"},{name:"wireless5g2WepMode",mapping:"wireless_5g_2_wep_mode"},{name:"wireless5g2WepSelect",mapping:"wireless_5g_2_wep_select"},{name:"wireless5g2WepType1",mapping:"wireless_5g_2_wep_type1"},{name:"wireless5g2WepType2",mapping:"wireless_5g_2_wep_type2"},{name:"wireless5g2WepType3",mapping:"wireless_5g_2_wep_type3"},{name:"wireless5g2WepType4",mapping:"wireless_5g_2_wep_type4"},{name:"wireless5g2WpaCipher",mapping:"wireless_5g_2_wpa_cipher"},{name:"wireless5g2WpaKey",mapping:"wireless_5g_2_wpa_key"},{name:"wireless5g2WpaVersion",mapping:"wireless_5g_2_wpa_version"},{name:"wireless5g2WpsState",mapping:"wireless_5g_2_wps_state"},{name:"wireless5gAirtimeFairness",mapping:"wireless_5g_airtime_fairness"},{name:"wireless5gChannel",mapping:"wireless_5g_channel"},{name:"wireless5gCurrentChannel",mapping:"wireless_5g_current_channel"},{name:"wireless5gDisabled",mapping:"wireless_5g_disabled"},{name:"wireless5gDisabledAll",mapping:"wireless_5g_disabled_all"},{name:"wireless5gEnable",mapping:"wireless_5g_enable"},{name:"wireless5gEncryPassword",mapping:"wireless_5g_encry_password"},{name:"wireless5gEncryption",mapping:"wireless_5g_encryption"},{name:"wireless5gRegionEnable",mapping:"wireless_5g_region_enable"},{name:"wireless5gExtinfo",mapping:"wireless_5g_extinfo"},{name:"wireless5gHtmode",mapping:"wireless_5g_htmode"},{name:"wireless5gHwmode",mapping:"wireless_5g_hwmode"},{name:"wireless5gMacaddr",mapping:"wireless_5g_macaddr"},{name:"wireless5gMuMimo",mapping:"wireless_5g_mu_mimo"},{name:"wireless5gPort",mapping:"wireless_5g_port"},{name:"wireless5gPskCipher",mapping:"wireless_5g_psk_cipher"},{name:"wireless5gPskKey",mapping:"wireless_5g_psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wireless5gPskVersion",mapping:"wireless_5g_psk_version"},{name:"wireless5gServer",mapping:"wireless_5g_server"},{name:"wireless5gSsid",mapping:"wireless_5g_ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"wireless5gTxpower",mapping:"wireless_5g_txpower"},{name:"wireless5gWdsStatus",mapping:"wireless_5g_wds_status"},{name:"wireless5gWepFormat1",mapping:"wireless_5g_wep_format1"},{name:"wireless5gWepFormat2",mapping:"wireless_5g_wep_format2"},{name:"wireless5gWepFormat3",mapping:"wireless_5g_wep_format3"},{name:"wireless5gWepFormat4",mapping:"wireless_5g_wep_format4"},{name:"wireless5gWepKey1",mapping:"wireless_5g_wep_key1"},{name:"wireless5gWepKey2",mapping:"wireless_5g_wep_key2"},{name:"wireless5gWepKey3",mapping:"wireless_5g_wep_key3"},{name:"wireless5gWepKey4",mapping:"wireless_5g_wep_key4"},{name:"wireless5gWepMode",mapping:"wireless_5g_wep_mode"},{name:"wireless5gWepSelect",mapping:"wireless_5g_wep_select"},{name:"wireless5gWepType1",mapping:"wireless_5g_wep_type1"},{name:"wireless5gWepType2",mapping:"wireless_5g_wep_type2"},{name:"wireless5gWepType3",mapping:"wireless_5g_wep_type3"},{name:"wireless5gWepType4",mapping:"wireless_5g_wep_type4"},{name:"wireless5gWpaCipher",mapping:"wireless_5g_wpa_cipher"},{name:"wireless5gWpaKey",mapping:"wireless_5g_wpa_key"},{name:"wireless5gWpaVersion",mapping:"wireless_5g_wpa_version"},{name:"wireless5gWpsState",mapping:"wireless_5g_wps_state"},{name:"wanPortStatus",mapping:"network_port_wan_port_status"},{name:"autoUpdate",mapping:"auto_upgrade_enable",defaultValue:"on"},{name:"autoUpdateTime",mapping:"auto_upgrade_time",defaultValue:3},{name:"networkPreispCountryName",mapping:"network_preisp_country_name"},{name:"networkPreispCityName",mapping:"network_preisp_city_name"},{name:"networkPreispIspName",mapping:"network_preisp_isp_name"}],preventSuccessEvent:!0,preventErrorEvent:!0,convert:function(e){return"no"===e.time_quicksetup?(e.time_timezone="",e.auto_upgrade_enable=""):""===e.auto_upgrade_enable&&(e.auto_upgrade_enable="on"),e},serialize:function(e){var t={network_port_wan_port_status:"",region_country:"",time_timezone:"",network_conntype:"",isp_special_mode:"",isp_special_internet_vid:"",isp_special_internet_vprio:"",isp_special_ipphone_vid:"",isp_special_ipphone_vprio:"",isp_special_iptv_vid:"",isp_special_iptv_vprio:"",isp_special_internet_tag:"",isp_special_mciptv_enable:"",isp_special_mciptv_vid:"",isp_special_mciptv_vprio:"",isp_special_enable:"",isp_special_porttype:"",network_dhcp_mac_clone_type:"",network_dhcp_mac_custom:"",network_static_ipaddr:"",network_static_netmask:"",network_static_gateway:"",network_static_pri_dns:"",network_static_snd_dns:"",network_pppoe_username:"",network_pppoe_password:"",network_l2tp_username:"",network_l2tp_password:"",network_l2tp_snd_conn:"",network_l2tp_dyn_server:"",network_l2tp_static_server:"",network_l2tp_static_ip:"",network_l2tp_static_netmask:"",network_l2tp_static_gateway:"",network_l2tp_static_pridns:"",network_l2tp_static_snddns:"",network_pptp_username:"",network_pptp_password:"",network_pptp_snd_conn:"",network_pptp_dyn_server:"",network_pptp_static_server:"",network_pptp_static_ip:"",network_pptp_static_netmask:"",network_pptp_static_gateway:"",network_pptp_static_pridns:"",network_pptp_static_snddns:"",network_dslite_dynamic_mode:"",network_dslite_AFTR_name:"",smart_connect_smart_enable:"",wireless_2g_enable:"",wireless_2g_ssid:"",wireless_2g_encry_password:"",wireless_2g_psk_key:"",wireless_2g_psk_cipher:"",wireless_2g_psk_version:"",wireless_2g_encryption:"",wireless_2g_disabled_all:"",wireless_5g_enable:"",wireless_5g_ssid:"",wireless_5g_encry_password:"",wireless_5g_psk_key:"",wireless_5g_psk_cipher:"",wireless_5g_psk_version:"",wireless_5g_encryption:"",wireless_5g_region_enable:"",wireless_5g_disabled_all:"",wireless_5g_2_enable:"",wireless_5g_2_ssid:"",wireless_5g_2_encry_password:"",wireless_5g_2_psk_key:"",wireless_5g_2_psk_cipher:"",wireless_5g_2_psk_version:"",wireless_5g_2_encryption:"",wireless_5g_2_region_enable:"",wireless_5g_2_disabled_all:"",username:"",password:"",auto_upgrade_enable:"",auto_upgrade_time:"",network_preisp_country_name:"",network_preisp_city_name:"",network_preisp_isp_name:""};for(var n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(t[n]=e[n]),""!==t[n]&&null!==t[n]||delete t[n];return t},proxy:{url:$.su.url("/admin/quick_setup?form=quick_setup")}}),$.su.storeManager.define("workModeStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"},{name:"content"},{name:"checked"}],data:[{boxlabel:$.su.CHAR.QUICK_SETUP.ROUTER_MODE,value:"router",content:".router-mode-intro"},{boxlabel:$.su.CHAR.QUICK_SETUP.AP_MODE,value:"ap",content:".ap-mode-intro"}]}),$.su.storeManager.define("quickSetupSteps",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"},{name:"content"},{name:"checked"}],data:[{boxlabel:"Rooouter",value:"router",content:"#router-mode-intro"},{boxlabel:"Appp",value:"ap",content:"#ap-mode-intro"},{boxlabel:"Cli",value:"client",content:"#client-mode-intro"}]}),$.su.modelManager.define("qsSummaryModel",{type:"model",fields:[{name:"type"},{name:"timeZone"},{name:"date"},{name:"time"},{name:"connectionType"},{name:"ispProfile",convert:function(e){return{"ExStream":$.su.CHAR.NETWORK_IPTV.SINGAPORE_SINGTEL,"Unifi":$.su.CHAR.NETWORK_IPTV.MALAYSIA_UNIFI,"Maxis":$.su.CHAR.NETWORK_IPTV.MALAYSIA_MAXIS,"Maxis2":$.su.CHAR.NETWORK_IPTV.MALAYSIA_MAXIS2,"Vietnam":$.su.CHAR.NETWORK_IPTV.VIETNAM_VIETTEL,"MEO":$.su.CHAR.NETWORK_IPTV.PORTUGAL_MEO,"VDF":$.su.CHAR.NETWORK_IPTV.PORTUGAL_VODAFONE,"nbn":$.su.CHAR.NETWORK_IPTV.AUSTRALIA_NBN,"ufb":$.su.CHAR.NETWORK_IPTV.NEWZEALAND_UFB,"Bridge":$.su.CHAR.NETWORK_IPTV.BRIDGE,"Custom":$.su.CHAR.NETWORK_IPTV.CUSTOM,"none":$.su.CHAR.NETWORK_IPTV.NONE}[e]}}]}),$.su.define("physicalConnectionProxy",{extend:"IPFProxy",url:$.su.url("/admin/status?form=internet"),writeFilter:function(e){return $.extend({operation:"read"},e)}}),$.su.define("portConnectionProxy",{extend:"IPFProxy",preventSuccessEvent:!0,preventFailEvent:!0,url:$.su.url("/admin/status?form=router"),writeFilter:function(e){return $.extend({operation:"read"},e)}}),$.su.define("qsCheckInternetProxy",{extend:"IPFProxy",preventSuccessEvent:!0,preventFailEvent:!0,url:$.su.url("/admin/quick_setup?form=check_internet"),writeFilter:function(e){return $.extend({operation:"read"},e)}}),$.su.define("qsGetDeviceInfoProxy",{extend:"IPFProxy",url:$.su.url("/admin/cloud_account?form=get_deviceInfo"),preventSuccessEvent:!0,preventFailEvent:!0,preventErrorEvent:!0}),$.su.define("qsWanCableDetectProxy",{extend:"IPFProxy",url:$.su.url("/admin/status?form=wan_cable_match_stat"),preventSuccessEvent:!0,preventFailEvent:!0,preventErrorEvent:!0,writeFilter:function(e){return $.extend({operation:"read_match"},e)}}),$.su.define("qsDualNatDetectProxy",{extend:"IPFProxy",url:$.su.url("/admin/status?form=wan_dual_nat_state"),preventSuccessEvent:!0,preventFailEvent:!0,preventErrorEvent:!0,writeFilter:function(e){return $.extend({operation:"read"},e)}}),function(u){u.su.moduleManager.define("qsAutoUpdate",{deps:["quickSetup"],models:["quickSetupModel"],views:["qsAutoUpdateView"],stores:["autoUpdateStore","autoUpdateTimeStore"],services:["ajax","device"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){t.enableAutoUpdateData();for(var r=[],p=0;p<11;p++)r.push({name:p+":00AM to "+(p+2)+":00AM",value:p});r.push({name:"11:00AM to 1:00PM",value:11});for(p=0;p<11;p++)r.push({name:p+":00PM to "+(p+2)+":00PM",value:p+12});r.push({name:"11:00PM to 1:00AM",value:23}),i.autoUpdateTimeStore.loadData(r);var l=s.quickSetupModel.autoUpdate.getValue();"on"==l?n.qsAutoUpdateView.autoUpdateField.show():(n.qsAutoUpdateView.autoUpdateField.hide(),!l&&u("#qs-auto-update-next-step-btn").addClass("disabled"))}},init:function(n,s,i,e,o,t){this.control({"#qs-auto-update-next-step-btn":{"ev_button_click":function(){var e,t=i.quickSetupModel.autoUpdate.getValue();e="on"==t||"off"==t&&o.quickSetup.noInternet||o.quickSetup.skipFlag?n.skipUpgrade:o.quickSetup.detectUpgradeLv,s.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!0),o.quickSetup.submitAutoUpdateData({success:function(){s.qsAutoUpdateView.qsAutoUpdateBackBtn.enable(),e()},fail:function(){s.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1)},error:function(){s.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1)}})}},"#qs-auto-update-before-step-btn":{"ev_button_click":function(){o.quickSetup.skipFlag?o.quickSetup.isSupportSetPort()?o.quickSetup.goTo("qsSelectInternetPort"):o.quickSetup.goTo("qsChooseInternetType"):o.quickSetup.goTo("qsWirelessSetting")}}}),this.listen({"models.quickSetupModel.autoUpdate":{"ev_value_change":function(e,t){"on"==t?s.qsAutoUpdateView.autoUpdateField.show():s.qsAutoUpdateView.autoUpdateField.hide(),u("#qs-auto-update-next-step-btn").removeClass("disabled")}}})}},function(e,t,n,s,i,o){return{skipUpgrade:function(){i.quickSetup.upgradeState="noUpgrade",i.quickSetup.preloadSummary(function(){i.quickSetup.submitQsWirelssData({success:function(){t.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1),i.quickSetup.goTo("qsSummary")},fail:function(){t.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1)},error:function(){t.qsAutoUpdateView.qsAutoUpdateNextBtn.loading(!1)}})})},enableAutoUpdateData:function(){n.quickSetupModel.autoUpdate.enable(),n.quickSetupModel.autoUpdateTime.enable()}}})}(jQuery),$.su.storeManager.define("autoUpdateStore",{type:"store",fields:[{name:"value"},{name:"boxlabel"}],data:[{value:"on",boxlabel:$.su.CHAR.QUICK_SETUP.TURN_ON_AUTO},{value:"off",boxlabel:$.su.CHAR.QUICK_SETUP.NOT_NOW}]}),$.su.storeManager.define("autoUpdateTimeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[]}),jQuery.su.moduleManager.define("qsCheckPhysicalConn",{services:[],deps:["quickSetup"],stores:[],views:["qsCheckPhysicalConnView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){}},init:function(e,t,n,s,i,o){this.control({"#qs-check-physical-conn-button":{"ev_button_click":function(){i.quickSetup.checkPhysicalConn(function(e){e&&i.quickSetup.goTo("qsChooseInternetType")})}}}),this.listen()}},function(e,t,n,s,i,o){return{}}),function(f){f.su.moduleManager.define("qsChooseInternetType",{services:["moduleManager","moduleLoader","device"],deps:["quickSetup","main"],models:["qsInternetConnTypeDetectModel","quickSetupModel","ipv4Status","qsSummaryModel","qsPreIspModel"],stores:["qsInternetConnTypeStore","qsPreIspCountryStore","qsPreIspCityStore","qsPreIspISPStore","qsPreIspConnectionStore","qsPreIspConnection2Store","qsPreIspVpnServerStore"],views:["qsChooseInternetTypeView"],listeners:{"ev_on_launch":function(a,r,e,p,t,n,l){if(t.qsInternetConnTypeStore.load({data:{operation:"read"},success:function(){p.quickSetupModel.networkConntype.loadItems(t.qsInternetConnTypeStore.getData())}}),r.checkPortConn(),r.initBtnView(),1==l.device.getConfig().supportSelectPort?e.qsChooseInternetTypeView.internetDisconnNote.setText(f.su.CHAR.QUICK_SETUP.INTERNET_DISCONNECT_NOTE_SEL):e.qsChooseInternetTypeView.internetDisconnNote.setText(f.su.CHAR.QUICK_SETUP.INTERNET_DISCONNECT_NOTE),r.supportPreIsp){e.qsChooseInternetTypeView.preIspField.show();for(var s=[],i=r.getObjectLength(ispAutoConfTable,"country"),o=0;o<i;o++){var u={};u.name=ispAutoConfTable["country"+o].country_name,u.value=ispAutoConfTable["country"+o].country_name,s.push(u)}t.qsPreIspCountryStore.loadData(s),setTimeout(function(){var e=p.quickSetupModel.getData();if(e.networkPreispCountryName){if(p.qsPreIspModel.networkPreispCountryName.setValue(e.networkPreispCountryName),e.networkPreispCityName&&p.qsPreIspModel.networkPreispCityName.setValue(e.networkPreispCityName),e.networkPreispIspName&&p.qsPreIspModel.networkPreispIspName.setValue(e.networkPreispIspName),e.networkConntype)try{for(var t=ispAutoConfTable["country"+r.preIspData.countryNum]["location"+r.preIspData.cityNum]["isp"+r.preIspData.ispNum],n=r.getObjectLength(t,"auto_config"),s=r.getRUConnectionType(e.networkConntype),i=0;i<n;i++){if(t["auto_config"+i].first_connection==s){var o=r.getConnectionType(s,1)+"__"+(config.vpn_ip_name||"");p.qsPreIspModel.networkPreispConntype.setValue(o);break}}}catch(a){console.log("unmatched connection!")}}else"ru"==l.device.getConfig().country&&p.qsPreIspModel.networkPreispCountryName.setValue("Россия"),p.qsPreIspModel.networkPreispIspName.disable(),p.qsPreIspModel.networkPreispConntype.disable()},0)}else e.qsChooseInternetTypeView.autoDetectField.show(),p.quickSetupModel.networkConntype.show()}},init:function(k,S,q,y,s,i){var o={"dslite":f.su.CHAR.NETWORK_INTERNET.DSLITE_WARNING,"v6plus":f.su.CHAR.NETWORK_INTERNET.V6_PLUS_WARNING};this.configViews({id:"qsChooseInternetTypeView",items:[{id:"qs-disconnect1-img","img-src":k.setImageSrc("qs.qs",1)},{id:"qs-disconnect2-img","img-src":k.setImageSrc("qs.qs",2)}]}),this.control({"#qs-choose-internet-type-next-btn":{"ev_button_click":function(){var e=function(){q.qsSummaryModel.connectionType.setValue(q.quickSetupModel.networkConntype.getSelectedText()),k.goNext()},t=o[q.quickSetupModel.networkConntype.getValue()];if(t?s.main.confirm(t,e,null,f.su.CHAR.OPERATION.OK):e(),i.device.getConfig().supportPreIsp){var n=q.qsPreIspModel.getData();q.quickSetupModel.replaceData({networkPreispCountryName:n.networkPreispCountryName,networkPreispCityName:n.networkPreispCityName,networkPreispIspName:n.networkPreispIspName})}}},"#qs-choose-internet-type-prev-btn":{"ev_button_click":function(){k.goBack()}},"#qs-choose-internet-auto-detect-btn":{"ev_button_click":function(){k.startDetectConnectType()}},"#qs-disconnect-retry-btn":{"ev_button_click":function(){S.qsChooseInternetTypeView.retryButton.loading(!0),s.quickSetup.checkPhysicalConn(function(e){S.qsChooseInternetTypeView.retryButton.loading(!1),e&&(q.ipv4Status.load({success:function(e){q.quickSetupModel.networkConntype.setValue(e.conntype)}}),S.qsChooseInternetTypeView.selectConnectTypePanel.show(),S.qsChooseInternetTypeView.internetDisconnectPanel.hide())})}},"#qs-port-disconnect-retry-btn":{"ev_button_click":function(){S.qsChooseInternetTypeView.retryPortButton.loading(!0),s.quickSetup.checkPhysicalConn(function(e){S.qsChooseInternetTypeView.retryPortButton.loading(!1),e&&(S.qsChooseInternetTypeView.selectConnectTypePanel.show(),S.qsChooseInternetTypeView.internetDisconnectPanel.hide())})}},"#qs-port-disconnect-back-btn":{"ev_button_click":function(){k.goBack()}},"#qs-disconnect-skip-btn":{"ev_button_click":function(){s.quickSetup.skipFlag=!0,q.qsSummaryModel.connectionType.setValue(q.quickSetupModel.networkConntype.getSelectedText()),s.quickSetup.goTo("qsWirelessSetting")}}}),this.listen({"views.qsChooseInternetTypeView.preIspManual":{"ev_value_change":function(e,t,n){"on"==t?(S.qsChooseInternetTypeView.preIspConfigField.hide(),q.quickSetupModel.networkConntype.show()):(q.quickSetupModel.networkConntype.hide(),S.qsChooseInternetTypeView.preIspConfigField.show()),k.nextButtonSet()}},"models.qsPreIspModel.networkPreispCountryName":{"ev_value_change":function(e,t,n){for(var s=k.getObjectLength(ispAutoConfTable,"country"),i=0;i<s;i++)ispAutoConfTable["country"+i].country_name==t&&(k.preIspData.countryNum=i);for(var o=[],a=ispAutoConfTable["country"+k.preIspData.countryNum],r=k.getObjectLength(a,"location"),p=0;p<r&&a["location"+p]!=undefined;p++){var l={};l.name=a["location"+p].city_region,l.value=a["location"+p].city_region,o.push(l)}y.qsPreIspCityStore.loadData(o),q.qsPreIspModel.networkPreispCityName.enable(),q.qsPreIspModel.networkPreispCityName.setValue(null),q.qsPreIspModel.networkPreispIspName.setValue(null),q.qsPreIspModel.networkPreispConntype.setValue(null),q.qsPreIspModel.networkPreispIspName.disable(),q.qsPreIspModel.networkPreispConntype.disable(),k.disableSecondConnection(),q.quickSetupModel.networkConntype.setValue(""),k.preIspData.allowNext=0,k.checkNextfunHandle()}},"models.qsPreIspModel.networkPreispCityName":{"ev_value_change":function(e,t,n){for(var s=k.getObjectLength(ispAutoConfTable["country"+k.preIspData.countryNum],"location"),i=ispAutoConfTable["country"+k.preIspData.countryNum],o=0;o<s&&i["location"+o]!=undefined;o++)i["location"+o].city_region==t&&(k.preIspData.cityNum=o);for(var a=[],r=i["location"+k.preIspData.cityNum],p=k.getObjectLength(r,"isp"),l=0;l<p&&r["isp"+l]!=undefined;l++){var u={};u.name=r["isp"+l].isp_name,u.value=r["isp"+l].isp_name,a.push(u)}y.qsPreIspISPStore.loadData(a),q.qsPreIspModel.networkPreispIspName.enable(),q.qsPreIspModel.networkPreispIspName.setValue(null),q.qsPreIspModel.networkPreispConntype.setValue(null),q.qsPreIspModel.networkPreispConntype.disable(),k.disableSecondConnection(),q.quickSetupModel.networkConntype.setValue(""),k.preIspData.allowNext=0,k.checkNextfunHandle()}},"models.qsPreIspModel.networkPreispIspName":{"ev_value_change":function(e,t,n){for(var s=0,i=0,o=ispAutoConfTable["country"+k.preIspData.countryNum]["location"+k.preIspData.cityNum],a=k.getObjectLength(o,"isp"),r=0;r<a&&o["isp"+r]!=undefined;r++)if(o["isp"+r].isp_name==t){var p=o["isp"+r];k.preIspData.ispNum=r,p.hasOwnProperty("flag")&&(s=p.flag);break}for(var l=[],u=o["isp"+k.preIspData.ispNum],c=k.getObjectLength(u,"auto_config"),d=0;d<c&&u["auto_config"+d]!=undefined;d++){var _=u["auto_config"+d];if(0!=s&&(_.hasOwnProperty("handle_level")?(_.handle_level,i++):i=0),!(1<i)){p={};var m=u["auto_config"+d];p.name=m.first_connection,p.value=k.getConnectionType(p.name,1)+"__"+(m.vpn_ip_name||""),l.push(p)}}y.qsPreIspConnectionStore.loadData(l),q.qsPreIspModel.networkPreispConntype.enable(),q.qsPreIspModel.networkPreispConntype.setValue(null),k.disableSecondConnection(),q.quickSetupModel.networkConntype.setValue(""),k.preIspData.allowNext=0,k.checkNextfunHandle()}},"models.qsPreIspModel.networkPreispConntype":{"ev_value_change":function(e,t,n){if(t){var s,i,o=t.split("__")[0],a=t.split("__")[1],r=0,p=0,l=[],u=[];q.quickSetupModel.networkConntype.setValue(o),k.disableSecondConnection(),o=k.getRUConnectionType(o);for(var c=ispAutoConfTable["country"+k.preIspData.countryNum]["location"+k.preIspData.cityNum]["isp"+k.preIspData.ispNum],d=k.getObjectLength(c,"auto_config"),_=0;_<d&&c["auto_config"+_]!=undefined;_++)if(c["auto_config"+_].first_connection==o){var m=c["auto_config"+_];if(s=m.second_connection,i=m.mac_clone,m.hasOwnProperty("handle_level")){r=m.handle_level;var w={},g={};m.second_connection==undefined||""==m.second_connection?(w.name=f.su.CHAR.QUICK_SETUP.NO_SECOND_CONNECTION,w.value="none"):(w.name=m.second_connection,w.value=k.getConnectionType(m.second_connection,2)),2==r?p++:p=0,p<2&&l.push(w),2==r&&(g.name=a,g.value=a,u.push(g));continue}break}0<r&&(y.qsPreIspConnection2Store.loadData(l),S.qsChooseInternetTypeView.networkPreispConntype2.setValue(""),S.qsChooseInternetTypeView.networkPreispConntype2.show(),S.qsChooseInternetTypeView.networkPreispConntype2.enable()),1<r&&(y.qsPreIspConnection2Store.loadData(u),S.qsChooseInternetTypeView.networkPreispConnVpnServer.setValue(""),S.qsChooseInternetTypeView.networkPreispConnVpnServer.show(),S.qsChooseInternetTypeView.networkPreispConnVpnServer.enable()),k.preIspData.gHandleLevel=r,0==k.preIspData.gHandleLevel&&(k.doSetSecconAndVpn(o,a,s),k.preIspData.allowNext=2,k.checkNextfunHandle(),k.doSetMacClone(i))}}},"views.qsChooseInternetTypeView.networkPreispConntype2":{"ev_value_change":function(e,t,n){if(t){var s,i=q.qsPreIspModel.networkPreispConntype.getValue(),o=t;if(1==k.preIspData.gHandleLevel){var a=q.qsPreIspModel.networkPreispCountryName.getValue(),r=q.qsPreIspModel.networkPreispCityName.getValue(),p=q.qsPreIspModel.networkPreispIspName.getValue();k.setSecondConnectionType(i,o,""),s=k.getMacClone(a,r,p,i,o,""),k.doSetMacClone(s),k.preIspData.allowNext=2,k.checkNextfunHandle()}else S.qsChooseInternetTypeView.networkPreispConnVpnServer.enable()}}},"views.qsChooseInternetTypeView.networkPreispConnVpnServer":{"ev_value_change":function(e,t,n){if(t){var s=q.qsPreIspModel.networkPreispConntype.getValue(),i=S.qsChooseInternetTypeView.networkPreispConntype2.getValue(),o=t,a=q.qsPreIspModel.networkPreispCountryName.getValue(),r=q.qsPreIspModel.networkPreispCityName.getValue(),p=q.qsPreIspModel.networkPreispIspName.getValue();k.setSecondConnectionType(s,i,o),lMacClone=k.getMacClone(a,r,p,s,i,o),k.doSetMacClone(lMacClone),k.preIspData.allowNext=2,k.checkNextfunHandle()}}},"models.quickSetupModel.networkConntype":{"ev_value_change":function(e,t,n){k.nextButtonSet()}}})}},function(h,i,o,e,n,s){h=this;return{internetType:null,detectInterval:null,firstDetectFlag:!1,preIspData:{countryNum:0,cityNum:0,ispNum:0,allowNext:0,gHandleLevel:0},supportPreIsp:s.device.getConfig().supportPreIsp,initBtnView:function(){n.quickSetup.isSupportSetPort()?(f("#qs-port-disconnect-btn-container").removeClass("hidden"),f("#qs-disconnect-btn-container").addClass("hidden")):(f("#qs-disconnect-btn-container").removeClass("hidden"),f("#qs-port-disconnect-btn-container").addClass("hidden"))},goNext:function(){var e=o.quickSetupModel.networkConntype.getValue(),t=s.moduleManager.get("qsInternetEdit");o.quickSetupModel.networkConntype.setValue(e),t&&this.internetType!==e&&t.showInternetType(e),this.internetType=e,n.quickSetup.skipFlag=!1,n.quickSetup.goTo("qsInternetEdit")},goBack:function(){n.quickSetup.isSupportSetPort()?n.quickSetup.goTo("qsSelectInternetPort"):n.quickSetup.goTo("qsSetTimezone")},checkPortConn:function(){n.quickSetup.getPhysicalConnStatus()?(s.device.getConfig().supportPreIsp||o.ipv4Status.load({success:function(e){o.quickSetupModel.networkConntype.setValue(e.conntype)}}),i.qsChooseInternetTypeView.selectConnectTypePanel.show(),i.qsChooseInternetTypeView.internetDisconnectPanel.hide()):(i.qsChooseInternetTypeView.selectConnectTypePanel.hide(),i.qsChooseInternetTypeView.internetDisconnectPanel.show())},startDetectConnectType:function(){var t=5e3,n=0,s=5;clearInterval(h.detectInterval),i.qsChooseInternetTypeView.autoDetectBtn.disable(),i.qsChooseInternetTypeView.autoDetectProcessbar.hide(),o.qsInternetConnTypeDetectModel.getProxy().detect({success:function(e){t=e.time,s=e.time/1e3,i.qsChooseInternetTypeView.autoDetectResult.hide(),i.qsChooseInternetTypeView.autoDetectProcessbar.show(),i.qsChooseInternetTypeView.autoDetectProcessbar.animate({duration:t,percentageStart:0,percentageEnd:100}),h.detectInterval=setInterval(function(){h.continueDetectConnectType({success:function(e){if("unplugged"===e.conntype)clearInterval(h.detectInterval),i.qsChooseInternetTypeView.autoDetectProcessbar.reset(),i.qsChooseInternetTypeView.autoDetectProcessbar.hide(),i.qsChooseInternetTypeView.autoDetectResult.setText(f.su.CHAR.BASIC_INTERNET.UNPLUGGED),i.qsChooseInternetTypeView.autoDetectResult.show();else if("none"===e.conntype)i.qsChooseInternetTypeView.autoDetectResult.setText(f.su.CHAR.QUICK_SETUP.NONE),s<=n&&(clearInterval(h.detectInterval),i.qsChooseInternetTypeView.autoDetectProcessbar.reset(),i.qsChooseInternetTypeView.autoDetectProcessbar.hide(),i.qsChooseInternetTypeView.autoDetectResult.show());else{clearInterval(h.detectInterval),i.qsChooseInternetTypeView.autoDetectProcessbar.reset(),i.qsChooseInternetTypeView.autoDetectProcessbar.hide();var t="";switch(e.conntype){case"dhcp":t=f.su.CHAR.QUICK_SETUP.DYNAMIC_IP;break;case"static":t=f.su.CHAR.QUICK_SETUP.STATIC_IP;break;case"pppoe":t=f.su.CHAR.QUICK_SETUP.PPPOE;break;case"l2tp":t=f.su.CHAR.QUICK_SETUP.L2TP;break;case"pptp":t=f.su.CHAR.QUICK_SETUP.PPTP;break;case"dslite":t=f.su.CHAR.NETWORK_INTERNET.DSLITE;break;case"v6plus":t=f.su.CHAR.NETWORK_INTERNET.V6_PLUS;break;default:t=f.su.CHAR.QUICK_SETUP.NONE}i.qsChooseInternetTypeView.autoDetectResult.setText(t),i.qsChooseInternetTypeView.autoDetectResult.show(),o.quickSetupModel.networkConntype.setValue(e.conntype)}},fail:function(){s<=++n&&(clearInterval(h.detectInterval),i.qsChooseInternetTypeView.autoDetectProcessbar.reset(),i.qsChooseInternetTypeView.autoDetectProcessbar.hide(),i.qsChooseInternetTypeView.autoDetectBtn.enable())},error:function(){s<=++n&&(clearInterval(h.detectInterval),i.qsChooseInternetTypeView.autoDetectProcessbar.reset(),i.qsChooseInternetTypeView.autoDetectProcessbar.hide(),i.qsChooseInternetTypeView.autoDetectBtn.enable())}}),i.qsChooseInternetTypeView.autoDetectBtn.enable()},1e3)},fail:function(){i.qsChooseInternetTypeView.autoDetectBtn.enable()},error:function(){i.qsChooseInternetTypeView.autoDetectBtn.enable()}})},continueDetectConnectType:function(e){if(e)var t=e.success,n=e.fail,s=e.error;o.qsInternetConnTypeDetectModel.getProxy().read({success:function(e){t&&t(e)},fail:function(e){n&&n(e)},error:function(e){s&&s(e)}})},setImageSrc:function(e,t){return e+(t+(n.quickSetup.isSupportSetPort()?2:0))},nextButtonSet:function(){h.validateCable()?i.qsChooseInternetTypeView.nextButton.enable():i.qsChooseInternetTypeView.nextButton.disable()},validateCable:function(){var e=i.qsChooseInternetTypeView.preIspManual.getValue(),t=o.quickSetupModel.networkConntype.getValue();return h.supportPreIsp&&"on"!=e?0!==h.preIspData.allowNext:!!t},getObjectLength:function(e,t){var n=0,s=new RegExp("^"+t+"\\d+$");return f.each(e,function(e){s.test(e)&&n++}),n},checkNextfunHandle:function(){0==h.preIspData.allowNext?i.qsChooseInternetTypeView.nextButton.disable():i.qsChooseInternetTypeView.nextButton.enable()},getConnectionType:function(e,t){var n="";switch(e){case"Статический IP-адрес":n="static";break;case"Динамический IP-адрес":n=1==t?"dhcp":"dynamic";break;case"PPPoE":n="pppoe";break;case"L2TP":n="l2tp";break;case"PPTP":n="pptp";break;default:n="dynamic"}return n},getRUConnectionType:function(e){var t="";switch(e){case"static":t="Статический IP-адрес";break;case"dynamic":case"dhcp":t="Динамический IP-адрес";break;case"pppoe":t="PPPoE";break;case"l2tp":t="L2TP";break;case"pptp":t="PPTP";break;default:t="PPPoE"}return t},doSetSecconAndVpn:function(e,t,n){var s="";switch(e){case"Статический IP-адрес":s="static";break;case"Динамический IP-адрес":s="dhcp";break;case"PPPoE":s="pppoe",n==undefined||""==n?o.quickSetupModel.networkPppoeSndConn.setValue("none"):"Статический IP-адрес"==n?o.quickSetupModel.networkPppoeSndConn.setValue("static"):"Динамический IP-адрес"==n&&o.quickSetupModel.networkPppoeSndConn.setValue("dynamic");break;case"L2TP":s="l2tp","Статический IP-адрес"==n?(o.quickSetupModel.networkL2tpSndConn.setValue("static"),o.quickSetupModel.networkL2tpStaticServer.setValue(t),h.setDomain("static",t)):"Динамический IP-адрес"==n&&(o.quickSetupModel.networkL2tpSndConn.setValue("dynamic"),o.quickSetupModel.networkL2tpDynServer.setValue(t),h.setDomain("dynamic",t));break;case"PPTP":s="pptp","Статический IP-адрес"==n?(o.quickSetupModel.networkPptpSndConn.setValue("static"),o.quickSetupModel.networkPptpStaticServer.setValue(t),h.setDomain("static",t)):"Динамический IP-адрес"==n&&(o.quickSetupModel.networkPptpSndConn.setValue("dynamic"),o.quickSetupModel.networkPptpDynServer.setValue(t),h.setDomain("dynamic",t))}return o.quickSetupModel.networkConntype.setValue(s),s},doSetMacClone:function(e){"YES"==e?o.quickSetupModel.networkDhcpMacCloneType.setValue("computer"):o.quickSetupModel.networkDhcpMacCloneType.setValue("default")},disableSecondConnection:function(){i.qsChooseInternetTypeView.networkPreispConntype2.setValue(null),i.qsChooseInternetTypeView.networkPreispConntype2.hide(),i.qsChooseInternetTypeView.networkPreispConntype2.disable(),i.qsChooseInternetTypeView.networkPreispConnVpnServer.setValue(null),i.qsChooseInternetTypeView.networkPreispConnVpnServer.hide(),i.qsChooseInternetTypeView.networkPreispConnVpnServer.disable()},setSecondConnectionType:function(e,t,n){switch(e){case"pppoe":t==undefined||""==t||"none"==t?o.quickSetupModel.networkPppoeSndConn.setValue("none"):"static"==t?o.quickSetupModel.networkPppoeSndConn.setValue("static"):"dynamic"==t&&o.quickSetupModel.networkPppoeSndConn.setValue("dynamic");break;case"l2tp":"static"==t?(o.quickSetupModel.networkL2tpSndConn.setValue("static"),o.quickSetupModel.networkL2tpStaticServer.setValue(n)):"dynamic"==t&&(o.quickSetupModel.networkL2tpSndConn.setValue("dynamic"),o.quickSetupModel.networkL2tpDynServer.setValue(n));break;case"pptp":"static"==t?(o.quickSetupModel.networkPptpSndConn.setValue("static"),o.quickSetupModel.networkPptpStaticServer.setValue(n)):"dynamic"==t&&(o.quickSetupModel.networkPptpSndConn.setValue("dynamic"),o.quickSetupModel.networkPptpDynServer.setValue(n))}},getMacClone:function(e,t,n,s,i,o){for(var a,r,p,l,u,c=h.getObjectLength(ispAutoConfTable,"country"),d=0;d<c;d++)ispAutoConfTable["country"+d].country_name==e&&(a=d);var _=ispAutoConfTable["country"+a],m=h.getObjectLength(_,"location");for(d=0;d<m&&_["location"+d]!=undefined;d++)if(_["location"+d].city_region==t){r=d;break}var w=_["location"+r],g=h.getObjectLength(w,"isp");for(d=0;d<g&&w["isp"+d]!=undefined;d++)if(w["isp"+d].isp_name==n){p=d;break}var k=w["isp"+p],S=h.getObjectLength(k,"auto_config");for(d=0;d<S;d++){var q,y,f;if((u=k["auto_config"+d])==undefined)break;if(q=h.getConnectionType(u.first_connection,1),y=""==u.second_connection?"none":h.getConnectionType(u.second_connection,2),f=u.vpn_ip_name,q==s&&y==i&&f==o){l=d;break}}return k["auto_config"+l].mac_clone},_sndConn:null,_domainVal:null,setDomain:function(e,t){h._sndConn=e,h._domainVal=t},getDomain:function(){return{snd:h._sndConn,vpn:h._domainVal}}}})}(jQuery),function(){$.su.modelManager.define("qsInternetConnTypeDetectModel",{type:"model",fields:[{name:"time"},{name:"conntype"}],proxy:"qsInternetConnTypeDetectProxy"}),$.su.define("qsInternetConnTypeDetectProxy",{extend:"IPFProxy",url:$.su.url("/admin/network?form=wan_autodetect"),api:{detect:{writeFilter:function(e){return $.extend({operation:"detect"},e)}},read:{writeFilter:function(e){return $.extend({operation:"read"},e)}}}});var o={"dhcp":{boxlabel:$.su.CHAR.QUICK_SETUP.DYNAMIC_IP,value:"dhcp",content:"<p>"+$.su.CHAR.QUICK_SETUP.DYNAMIC_INTRO+"</p>"},"static":{boxlabel:$.su.CHAR.QUICK_SETUP.STATIC_IP,value:"static",content:"<p>"+$.su.CHAR.QUICK_SETUP.STATIC_INTRO+"</p>"},"pppoe":{boxlabel:$.su.CHAR.QUICK_SETUP.PPPOE,value:"pppoe",content:"<p>"+$.su.CHAR.QUICK_SETUP.PPPOE_INTRO+"</p>"},"l2tp":{boxlabel:$.su.CHAR.QUICK_SETUP.L2TP,value:"l2tp",content:"<p>"+$.su.CHAR.QUICK_SETUP.L2TP_INTRO+"</p>"},"pptp":{boxlabel:$.su.CHAR.QUICK_SETUP.PPTP,value:"pptp",content:"<p>"+$.su.CHAR.QUICK_SETUP.PPTP_INTRO+"</p>"},"dslite":{boxlabel:$.su.CHAR.NETWORK_INTERNET.DSLITE,value:"dslite",content:"<p>"+$.su.CHAR.NETWORK_INTERNET.DSLITE_INTRO+"</p>"},"v6plus":{boxlabel:$.su.CHAR.NETWORK_INTERNET.V6_PLUS,value:"v6plus",content:"<p>"+$.su.CHAR.NETWORK_INTERNET.V6_PLUS_INTRO+"</p>"}};$.su.storeManager.define("qsInternetConnTypeStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"},{name:"content"},{name:"checked"}],data:[],convert:function(e){for(var t=[],n=e.length,s=0,i=null;s<n;s++)(i=o[e[s].value])&&t.push(i);return t},proxy:{url:$.su.url("/admin/network?form=wan_ipv4_protos")}}),$.su.storeManager.define("qsPreIspCountryStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[]}),$.su.storeManager.define("qsPreIspCityStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[]}),$.su.storeManager.define("qsPreIspISPStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[]}),$.su.storeManager.define("qsPreIspConnectionStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[]}),$.su.storeManager.define("qsPreIspConnection2Store",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[]}),$.su.storeManager.define("qsPreIspVpnServerStore",{type:"store",fields:[{name:"name"},{name:"value"},{name:"boxlabel"}],data:[]}),$.su.modelManager.define("qsPreIspModel",{type:"model",fields:[{name:"networkPreispCountryName"},{name:"networkPreispCityName"},{name:"networkPreispIspName"},{name:"networkPreispConntype"}]})}(),jQuery.su.moduleManager.define("qsCloudAndTether",{services:["moduleLoader","moduleManager","ajax","device"],models:["quickSetupModel"],deps:["quickSetup","main"],views:["qsCloudAndTetherView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){n.qsCloudAndTetherView.wifisharing5g2.hide();var r=s.quickSetupModel.getData();t.goToTpLogin(),null!==r.wireless2gSsid&&this.syncWifiSharingData(r),"on"==r.wirelessSmartEnable&&(n.qsCloudAndTetherView.wifisharing5g1.hide(),n.qsCloudAndTetherView.wifisharing5g2.hide()),a.ajax.request({proxy:"firmwareProxy",method:"write",data:{upgraded:!1}}),o.main.upgraded=!1}},init:function(e,t,n,s,i,o){this.control({"#qs-quit-button":{"ev_button_click":function(){i.quickSetup.quit()}}}),this.listen({"models.quickSetupModel":{"ev_loaded":function(){var e=n.quickSetupModel.getData();this.syncWifiSharingData(e)}}})}},function(e,u,t,n,s,c){return{goToTpLogin:function(){c.moduleLoader.load({module:"qsCloudAndTether"},{module:"tpLinkCloud",view:"tpLinkCloudViewQs"},u.qsCloudAndTetherView.tpLoginLoader,function(){u.qsCloudAndTetherView.qsCloudBtnAndQrcode.show(),s.quickSetup.showModule("qsCloudAndTether"),c.moduleManager.get("tpLinkCloud").setMode("qs")})},showLoading:function(){s.main.showMask(),u.qsCloudAndTetherView.pageLoadingSd.show()},hideLoading:function(){s.main.hideMask(),u.qsCloudAndTetherView.pageLoadingSd.hide()},syncWifiSharingData:function(e){var t,n,s=e.wireless2gSsid;switch(e.wireless2gEncryption){case"psk":case"psk_sae":t=e.wireless2gPskKey,n=e.wireless2gEncryption;break;case"wpa":t=e.wireless2gWpaKey,n="wpa";break;case"wep":t=e.wireless2gWepKey1,n="wep";break;default:t="",n="none"}u.qsCloudAndTetherView.wifisharing24g.setValue({ssid:s,password:t,security:n});var i,o,a=e.wireless5gSsid;switch(e.wireless5gEncryption){case"psk":case"psk_sae":i=e.wireless5gPskKey,o=e.wireless5gEncryption;break;case"wpa":i=e.wireless5gWpaKey,o="wpa";break;case"wep":i=e.wireless5gWepKey1,o="wep";break;default:i="",o="none"}if(u.qsCloudAndTetherView.wifisharing5g1.setValue({ssid:a,password:i,security:o}),1==c.device.getConfig().isTriband){u.qsCloudAndTetherView.wifisharing5g2.show();var r,p,l=e.wireless5g2Ssid;switch(e.wireless5g2Encryption){case"psk":case"psk_sae":r=e.wireless5g2PskKey,p=e.wireless5g2Encryption;break;case"wpa":r=e.wireless5g2WpaKey,p="wpa";break;case"wep":r=e.wireless5g2WepKey1,p="wep";break;default:r="",p="none"}u.qsCloudAndTetherView.wifisharing5g2.setValue({ssid:l,password:r,security:p})}},showCloudEle:function(){u.qsCloudAndTetherView.qsSkipBtn.show(),u.qsCloudAndTetherView.qrcodeField.show()},hideCloudEle:function(){u.qsCloudAndTetherView.qsSkipBtn.hide(),u.qsCloudAndTetherView.qrcodeField.hide()},refreshTpLogin:function(){c.moduleManager.get("tpLinkCloud").init()}}}),function(a){a.su.moduleManager.define("qsDualNatDetect",{services:[],stores:["routerModeStore"],deps:["quickSetup"],models:["routerModeModel"],views:["qsDualNatDetectView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){s.routerModeModel.reset(),n.qsDualNatDetectView.qsNatIssueNextBtn.disable()}},init:function(e,s,t,n,i,o){this.control({"#issue-detected-next-btn":{"ev_button_click":function(){switch(s.qsDualNatDetectView.issueDetecedPanel.hide(),a(".issue-detected-btn-field").hide(),a(".fix-issue-btn-field").show(),t.routerModeModel.mode.getValue()){case"independent":s.qsDualNatDetectView.fixIssuePanel.hide(),s.qsDualNatDetectView.recommendPanel.show();break;case"combined":s.qsDualNatDetectView.recommendPanel.hide(),s.qsDualNatDetectView.fixIssuePanel.show()}}},"#issue-detected-none":{"ev_button_click":e.goNext},"#qs-fix-issue-next-step-btn":{"ev_button_click":e.goNext},"#qs-fix-issue-back-step-btn":{"ev_button_click":function(){s.qsDualNatDetectView.fixIssuePanel.hide(),s.qsDualNatDetectView.recommendPanel.hide(),s.qsDualNatDetectView.issueDetecedPanel.show(),a(".fix-issue-btn-field").hide(),a(".issue-detected-btn-field").show()}}}),this.listen({"models.routerModeModel.mode":{"ev_value_change":function(e,t,n){n||s.qsDualNatDetectView.qsNatIssueNextBtn.enable()}}})}},function(e,t,n,s,i,o){return{goNext:function(){"upgradeSucceed"!==i.quickSetup.upgradeState?i.quickSetup.cloudBindFlag||i.quickSetup.skipFlag||i.quickSetup.noInternet?i.quickSetup.quit():i.quickSetup.preLoadCloudAndTether():window.location.href="/"}}})}(jQuery),$.su.modelManager.define("routerModeModel",{type:"model",fields:[{name:"mode"}]}),$.su.storeManager.define("routerModeStore",{type:"store",fields:[{name:"value"},{name:"boxlabel"},{name:"content"}],data:[{value:"independent",boxlabel:$.su.CHAR.QUICK_SETUP.INDEPENDENT_ROUTER,content:".dual-nat-independent"},{value:"combined",boxlabel:$.su.CHAR.QUICK_SETUP.COMBINED_ROUTER,content:".dual-nat-combined"}]}),function(a){a.su.moduleManager.define("qsFwUpgrade",{deps:["quickSetup"],services:["ajax","moduleLoader","moduleManager","device"],views:["qsFwUpgradeView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){this.showUpgradeInfo()}},init:function(e,t,n,s,i,o){this.control({".upgrade-btn":{"ev_button_click":function(){e.startUpgrade()}},".qs-skip-btn":{"ev_button_click":function(){sessionStorage.setItem("upgradeToken",localStorage.getItem("token")),i.quickSetup.upgradeState="noUpgrade",i.quickSetup.submitQsWirelssData()}}})}},function(e,n,t,s,i,o){return{showUpgradeInfo:function(){var e=i.quickSetup.upgradeDetail;n.qsFwUpgradeView.qsFwUpgradeTitle.show(),n.qsFwUpgradeView.upgradeNote1.setText(e),n.qsFwUpgradeView.upgradeNote3.setText(e),o.ajax.request({proxy:"upgradeReadProxy",method:"read",success:function(e){if(3==e.type){var t=a.su.CHAR.NETWORK_MAP.ROUTER;o.ajax.request({proxy:"qsGetDeviceInfoProxy",method:"read",ajax:{async:!1},success:function(e){t=e.model}}),n.qsFwUpgradeView.upgradeMsg3Notice.setText(a.su.CHAR.UPGRADE.NOTICE_IMPORTANT.replace("%model%",t)),n.qsFwUpgradeView.upgradeMsg3.show()}else 0!=e.type&&1!=e.type&&2!=e.type&&""!==e.type||n.qsFwUpgradeView.upgradeMsg1.show()},fail:i.quickSetup.skipUpgrade,error:i.quickSetup.skipUpgrade})},startUpgrade:function(){n.qsFwUpgradeView.upgradeMsg1.hide(),n.qsFwUpgradeView.upgradeMsg3.hide(),o.moduleLoader.load({module:"qsFwUpgrade"},{module:"firmware",view:"firmwareQsView"},n.qsFwUpgradeView.qsFirmwareUpgradeLoader,function(){var e=o.moduleManager.get("firmware");e.setMode("qs"),e.startOnlineUpgrade()})}}})}(jQuery),function(a){a.su.moduleManager.define("qsInternetConnection",{services:["ajax"],models:["quickSetupModel"],deps:["quickSetup","main","qsChooseInternetType"],views:["qsInternetConnectionView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){n.qsInternetConnectionView.creating.show(),this.startCreateInternetConn()}},init:function(e,t,n,s,i,o){this.configViews({id:"qsInternetConnectionView",items:[{id:"internet-conn-note",title:a.su.CHAR.QUICK_SETUP.TRY_FOLLOW,items:[{text:a.su.CHAR.QUICK_SETUP.TRY_1},{text:a.su.CHAR.QUICK_SETUP.TRY_2},{text:a.su.CHAR.QUICK_SETUP.TRY_3}]}]}),this.control({"#internet-create":{"ev_button_click":e.startCreateInternetConn},"#internet-create-go-back":{"ev_button_click":function(){i.quickSetup.goTo("qsChooseInternetType")}},"#internet-create-skip":{"ev_button_click":function(){i.quickSetup.isAutoUpdate()?i.quickSetup.goTo("qsAutoUpdate"):i.quickSetup.submitQsWirelssData()}}})}},function(n,s,e,t,i,o){n=this;return{checkInternetTime:7e4,startCreateInternetConn:function(){var e,t;s.qsInternetConnectionView.creating.show(),s.qsInternetConnectionView.mainContent.hide(),s.qsInternetConnectionView.creatingProgressbar.reset(),n.createInternetConn({success:function(){e=n.startCheckRouter(),a.when(e).then(function(){return t=n.startCheckInternet()}).done(function(){s.qsInternetConnectionView.creatingProgressbar.setValue(100),i.quickSetup.noInternet=!1,i.quickSetup.exitMsgNum=2,setTimeout(function(){n.startCheckCloud(function(){i.quickSetup.isAutoUpdate()?i.quickSetup.goTo("qsAutoUpdate"):i.quickSetup.detectUpgradeLv()})},1e3)}).fail(function(){i.quickSetup.noInternet=!0,n.showWarningPage()})},fail:function(){i.quickSetup.noInternet=!0,s.qsInternetConnectionView.creatingProgressbar.stop(),n.showWarningPage()},error:function(){e=n.startCheckRouter(),a.when(e).then(function(){return t=n.startCheckInternet()}).done(function(){s.qsInternetConnectionView.creatingProgressbar.setValue(100),i.quickSetup.noInternet=!1,i.quickSetup.exitMsgNum=2,setTimeout(function(){n.startCheckCloud(function(){i.quickSetup.isAutoUpdate()?i.quickSetup.goTo("qsAutoUpdate"):i.quickSetup.detectUpgradeLv(n.skipUpgrade)})},1e3)}).fail(function(){i.quickSetup.noInternet=!0,n.showWarningPage()})}}),s.qsInternetConnectionView.creatingProgressbar.animate({percentageStart:0,percentageEnd:100,duration:n.checkInternetTime,callback:function(){e.reject(),t&&t.reject()}})},startCheckCloud:function(e){var t=a.Deferred();n.checkCloud({success:function(e){i.quickSetup.cloudBindFlag=e.isbind,t.resolve()},fail:function(){i.quickSetup.cloudBindFlag=!1,t.resolve()},error:function(){i.quickSetup.cloudBindFlag=!1,t.resolve()}}),a.when(t).done(function(){e()})},showWarningPage:function(){s.qsInternetConnectionView.creating.hide(),s.qsInternetConnectionView.mainContent.show(),i.main.hideMask()},createInternetConn:function(e){var t,n;e&&(t=e.success,n=e.fail,errorCallback=e.error),i.quickSetup.submitQuickSetupData({success:function(e){setTimeout(function(){t&&t(e)},1e4)},fail:function(){setTimeout(function(){n&&n()},1e4)},error:function(){setTimeout(function(){errorCallback&&errorCallback()},1e4)}})},startCheckRouter:function(){var e=a.Deferred();return function t(){o.ajax.request({proxy:"checkRouterProxy",success:function(){e.resolve()},fail:function(){"pending"===e.state()&&setTimeout(t,1e3)},error:function(){"pending"===e.state()&&setTimeout(t,1e3)}})}(),e},startCheckInternet:function(){var t=a.Deferred();return function n(){o.ajax.request({proxy:"checkInternetProxy",success:function(e){t.resolve()},fail:function(e){"pending"===t.state()&&setTimeout(n,1e3)},error:function(e){"pending"===t.state()&&setTimeout(n,1e3)}})}(),t},checkCloud:function(e){if(e)var t=e.success,n=e.fail,s=e.error;o.ajax.request({proxy:"cloudBindStatusProxy",method:"read",success:function(e){t&&t(e)},fail:function(e){n&&n(e)},error:function(e){s&&s(e)}})},remindToConnect:function(e,t){"restart"===e?(this.finishProgress(),s.qsInternetConnectionView.qsConnectNote.setText(a.su.CHAR.QUICK_SETUP.PLEASE_CONNECT),n.remindMode="restart",i.main.startReboot(t,function(){localStorage&&localStorage.setItem("token",""),s.qsInternetConnectionView.summaryWarningMsg.show()},a.su.CHAR.FIRMWARE.UPGRADE_PROCESS_TIP)):s.qsInternetConnectionView.summaryWarningMsg.show(),i.main.hideMask()},finishProgress:function(){s.qsInternetConnectionView.creatingProgressbar.animate({percentageStart:66,percentageEnd:100,duration:1e3})}}})}(jQuery),function(a){a.su.moduleManager.define("qsInternetEdit",{services:["moduleLoader","moduleManager"],stores:[],deps:["quickSetup","qsChooseInternetType","internet","iptvVlanAdv"],models:["quickSetupModel"],views:["qsInternetEditView"],listeners:{"ev_on_launch":function(e,n,t,s,i,o,a){(n=this).loadIPTVModule(),a.moduleLoader.load({module:"qsInternetEdit"},{module:"internet",view:"internetViewQs"},t.qsInternetEditView.internetLoader,function(){var e=a.moduleManager.get("internet");e.setMode(e.MODE.QUICK_SETUP);var t=a.moduleManager.get("qsChooseInternetType").internetType;n.showInternetType(t)})}},init:function(n,s,e,t,i,o){this.control({"#qs-internet-edit-before-step-btn":{"ev_button_click":function(){i.quickSetup.goTo("qsChooseInternetType")}},"#qs-internet-edit-next-step-btn":{"ev_button_click":function(){var e=i.internet.syncQsData(),t=i.iptvVlanAdv.syncQsData();!1!==e&&t&&a.when(e).done(function(){n.detectLanOccupied()?(s.qsInternetEditView.qsInternetEditNormal.hide(),s.qsInternetEditView.qsInternetEditOccupied.show()):i.quickSetup.goTo("qsWirelessSetting")})}},"#qs-lan-occupied-back":{"ev_button_click":function(){s.qsInternetEditView.qsInternetEditNormal.show(),s.qsInternetEditView.qsInternetEditOccupied.hide()}},"#qs-lan-occupied-next":{"ev_button_click":function(){s.qsInternetEditView.qsLanOccupiedBtn.loading(),n.detectLanOccupied()||i.quickSetup.goTo("qsWirelessSetting"),s.qsInternetEditView.qsLanOccupiedBtn.loading(!1)}}}),this.listen()}},function(e,t,n,s,i,o){return{"showInternetType":function(e){o.moduleManager.get("internet").responseInternetTypeValueChange(e)},loadIPTVModule:function(){o.moduleLoader.load({module:"qsChooseInternetType"},{module:"iptvVlanAdv",view:"iptvVlanView"},t.qsInternetEditView.iptvLoader,function(){var e,t=o.moduleManager.get("iptvVlanAdv");t.setMode(t.MODE.QUICK_SETUP),"off"===n.quickSetupModel.ispSpecialEnable.getValue()&&(e="none"),t.startup(e)})},detectLanOccupied:function(){return!1}}})}(jQuery),jQuery.su.moduleManager.define("qsNetworkSelect",{services:[],stores:["networkSelectStore"],views:["qsNetworkSelectView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){i.networkSelectStore.load()}},init:function(e,t,n,s,i,o){this.control(),this.listen()}},function(e,t,n,s,i,o){return{}}),$.su.storeManager.define("networkSelectStore",{type:"store",fields:[{name:"wireType"},{name:"ssid"},{name:"signal"},{name:"mac"},{name:"security"}],convert:function(e){var n=[];return $.each(e.ap2g,function(e,t){t.wireType="2g",n.push(t)}),$.each(e.ap5g,function(e,t){t.wireType="5g",n.push(t)}),n},proxy:{url:"./data/quickset.scan.json",timeout:15e3}}),function(r){r.su.moduleManager.define("qsSelectInternetPort",{views:["qsSelectInternetPortView"],models:["quickSetupModel"],deps:["quickSetup"],services:["moduleManager","device"],stores:["portTypeStore","portTypeWithIllStore"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){r("#qs_internet_port").hide(),r("#qs_internet_port_with_ill_wrapper").hide(),!0===a.device.getConfig().supportGamingSelectPort?r("#qs_internet_port_with_ill_wrapper").show():r("#qs_internet_port").show()}},init:function(t,e,n,s,i,o){this.listen(),this.control({"#qs-port-before-step-btn":{"ev_button_click":function(){t.goBack()}},"#qs-port-next-step-btn":{"ev_button_click":function(){i.quickSetup.checkPhysicalConn(function(){var e=o.moduleManager.get("qsChooseInternetType");e&&e.checkPortConn(),t.goNext()})}}})}},function(e,t,n,s,i,o){return{goBack:function(){i.quickSetup.goTo("qsSetTimezone")},goNext:function(){i.quickSetup.goTo("qsChooseInternetType")}}})}(jQuery),function(r){r.su.moduleManager.define("qsSetPassword",{services:[],deps:["quickSetup"],models:["setPasswordModel","setPasswordModelControl","localLogin"],stores:[],views:["qsSetPasswordView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){t=this;o.quickSetup.trigger("ev_start_set_pwd"),n.qsSetPasswordView.setPwdConfirmBtn.disable(),s.localLogin.load({success:function(e){t.firstLoginKey=e.password}})}},init:function(t,n,e,s,i,o){this.control({"#set-pwd-confirm-btn":{"ev_button_click":function(e){t.comparePassword()&&t.doSetPassword({success:function(){i.quickSetup.trigger("ev_end_set_pwd"),i.quickSetup.goTo("qsChooseInternetType")}})}},"#password-textbox":{"ev_password_blur":function(e){t.comparePassword()?n.qsSetPasswordView.setPwdConfirmBtn.enable():n.qsSetPasswordView.setPwdConfirmBtn.disable()}},"#confirm-textbox":{"ev_password_blur":function(e){t.comparePassword()?n.qsSetPasswordView.setPwdConfirmBtn.enable():n.qsSetPasswordView.setPwdConfirmBtn.disable()}}}),this.listen({})}},function(n,a,s,e,t,i){n=this;return{firstLoginKey:[],comparePassword:function(){var e=s.setPasswordModel.password.getValue(),t=s.setPasswordModel.confirm.getValue();return!(!e||!t)&&(e===t?(s.setPasswordModel.confirm.setCorrect(),!0):(s.setPasswordModel.confirm.setError(r.su.CHAR.ERROR["00000080"]),!1))},doSetPassword:function(e){if(e){var o=e.success;e.fail}var t=s.setPasswordModel.password.doEncrypt(n.firstLoginKey);s.setPasswordModelControl.password.setValue(t),s.setPasswordModelControl.confirm.setValue(!0),s.setPasswordModelControl.getProxy().login({data:s.setPasswordModelControl.getData(),success:function(e){var t,n,s,i=e.stok||(t="12345",n=window.location.href,0<=(s=n.indexOf("stok="))&&(t=n.substring(s+5)),t);localStorage&&localStorage.setItem("token",i),o&&o()},fail:function(e){var t,n,s,i,o=e.data;switch(e.errorcode){case"user conflict":a.qsSetPasswordView.userConflictMsg.show();break;case"login failed":t=o.failureCount,s=(n=o.attemptsAllowed)+t,n<=t?(i=(i=r.su.CHAR.QUICK_SETUP.LOGIN_FAILED_COUNT.replace("%num1",t)).replace("%num2",n),a.qsSetPasswordView.loginFailMsg.setContent(i),a.qsSetPasswordView.loginFailMsg.show()):a.qsSetPasswordView.setPwdConfirmBtn.setError(r.su.CHAR.QUICK_SETUP.LOGIN_FAILED);break;case"exceeded max attempts":t=o.failureCount,s=(n=o.attemptsAllowed)+t,i=r.su.CHAR.ERROR["00000089"].replace("%num",s),a.qsSetPasswordView.maxAttemptsMsg.setContent(i),a.qsSetPasswordView.maxAttemptsMsg.show();break;case"have set":i=r.su.CHAR.ERROR["10000195"],a.qsSetPasswordView.haveSetMsg.show()}}})}}})}(jQuery),function(t){t.su.modelManager.define("setPasswordModel",{type:"model",fields:[{name:"password",maxLength:15,minLength:1,vtype:"ascii_visible",allowBlank:!1},{name:"confirm",maxLength:15,minLength:1,vtype:"ascii_visible",allowBlank:!1}]}),t.su.modelManager.define("setPasswordModelControl",{type:"model",fields:[{name:"password"},{name:"confirm"}],proxy:"setPasswordProxy"}),t.su.define("setPasswordProxy",{extend:"IPFProxy",url:t.su.url("/login?form=initial_login"),api:{login:{writeFilter:function(e){return t.extend({operation:"login"},e)}}}})}(jQuery),function(a){a.su.moduleManager.define("qsSetSystemTime",{deps:["quickSetup"],views:["qsSetSystemTimeView"],models:["quickSetupModel","qsSummaryModel"],stores:["timezoneStore","setSystemTimeTypeStore"],services:["time"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){n.qsSetSystemTimeView.qsSystemTimeField2.hide(),a.time.on("on_time_change",t.onTimeChange)},"ev_before_destroy":function(e,t){t.beforeDestroy()}},init:function(e,n,t,s,i,o){this.control({"#qs-set-time":{"click":function(e){n.qsSetSystemTimeView.qsSystemTimeField1.hide(),n.qsSetSystemTimeView.qsSystemTimeField2.show()}},"#qs-start-now-btn":{"ev_button_click":function(e){i.quickSetup.isSupportSetPort()?i.quickSetup.goTo("qsSelectInternetPort"):i.quickSetup.goTo("qsChooseInternetType")}}}),this.listen({"models.quickSetupModel.type":{"ev_value_change":function(e,t){n.qsSetSystemTimeView.qsSystemTimeType1.hide(),n.qsSetSystemTimeView.qsSystemTimeType2.hide(),n.qsSetSystemTimeView.qsSystemTimeType3.hide(),"pc"==t?n.qsSetSystemTimeView.qsSystemTimeType1.show():"auto"==t?n.qsSetSystemTimeView.qsSystemTimeType2.show():"manual"==t&&n.qsSetSystemTimeView.qsSystemTimeType3.show()}}})}},function(e,i,t,n,s,o){e=this;return{onTimeChange:function(e,t){var n=o.time.getHour24(),s=o.time.format(t,"yyyy-MM-dd HH:mm:ss",n);i.qsSetSystemTimeView.systemTime1.setText(s),i.qsSetSystemTimeView.systemTime2.setText(a.su.CHAR.QUICK_SETUP.WELCOME_NOTE_4.replace("%t",s))},beforeDestroy:function(){o.time.off("on_time_change",e.onTimeChange)}}})}(jQuery),$.su.storeManager.define("setSystemTimeTypeStore",{type:"store",fields:[{name:"value"},{name:"boxlabel"}],data:[{value:"pc",boxlabel:$.su.CHAR.QUICK_SETUP.SYNC_WITH_DEVICE},{value:"auto",boxlabel:$.su.CHAR.QUICK_SETUP.SYNC_WITH_INTERNET},{value:"manual",boxlabel:$.su.CHAR.QUICK_SETUP.SET_IT_MYSELF}]}),jQuery.su.moduleManager.define("qsSetTimezone",{services:[],deps:["quickSetup"],models:["quickSetupModel","timeSettings","qsSummaryModel"],stores:["timezoneStore"],views:["qsSetTimezoneView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){}},init:function(e,t,n,s,i,o){this.control({"#set-tz-confirm-btn":{"ev_button_click":function(e){n.quickSetupModel.timeTimezone.validate()&&(n.qsSummaryModel.timeZone.setValue(n.quickSetupModel.timeTimezone.getText()),i.quickSetup.isSupportSetPort()?i.quickSetup.goTo("qsSelectInternetPort"):i.quickSetup.goTo("qsChooseInternetType"))}}}),this.listen({})}},function(e,t,n,s,i,o){return{}}),function(f){f.su.moduleManager.define("qsSummary",{services:["ajax","moduleManager","device"],models:["quickSetupModel","qsSummaryModel","iptvVlan"],deps:["quickSetup"],views:["qsSummaryView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){var r=o.quickSetup.getQuickSetupData(),p=r.wireType||"wired",l=o.quickSetup.noInternet,u=o.quickSetup.upgradeState,c=o.quickSetup.skipFlag,d=f.su.CHAR.QUICK_SETUP.TITLE1,_=f.su.CHAR.QUICK_SETUP.TITLE2,m=f.su.CHAR.QUICK_SETUP.DESCRIPT1,w=f.su.CHAR.QUICK_SETUP.DESCRIPT2,g=f.su.CHAR.QUICK_SETUP.DESCRIPT3,k=f.su.CHAR.QUICK_SETUP.DESCRIPT4,S=f.su.CHAR.QUICK_SETUP.DESCRIPT5,q=n.qsSummaryView.summaryPanel,y=n.qsSummaryView.qsSummaryDescription;if(n.qsSummaryView.qsSummaryWanCableNote.hide(),n.qsSummaryView.qsSummaryDualNatNote.hide(),a.device.getConfig().supportWanCableDetect&&a.ajax.request({proxy:"qsWanCableDetectProxy",success:function(e){"mismatch"==e.match_status&&n.qsSummaryView.qsSummaryWanCableNote.show()}}),a.device.getConfig().supportDualNatDetect&&a.ajax.request({proxy:"qsDualNatDetectProxy",success:function(e){"1"==e.wan_dual_nat&&(t.dualNatDetected=!0,n.qsSummaryView.qsSummaryDualNatNote.show())}}),a.device.getIsTriband()?(n.qsSummaryView.qsWireless5g2Cont.show(),s.quickSetupModel.wireless5gEnable.setLabelField(f.su.CHAR.WIRELESS_SETTINGS.MODE_5G1)):n.qsSummaryView.qsWireless5g2Cont.hide(),c||l)s.qsSummaryModel.connectionType.hide(),"wired"===p?(q.setTitle(_),y.setText(k)):(q.setTitle(_),y.setText(S));else switch(s.qsSummaryModel.connectionType.show(),u){case"noUpgrade":"wired"===p?(q.setTitle(d),y.setText(w)):(q.setTitle(d),y.setText(g));break;case"upgradeFailed":"wired"===p?(q.setTitle(_),y.setText(w)):(q.setTitle(_),y.setText(g));break;case"upgradeSucceed":q.setTitle(d),y.setText(m)}t.setQsSummary(),t.toggleIptvView(r),this.showPassword()}},init:function(e,s,t,n,i,o){this.control({"#summary-next-btn":{"ev_button_click":function(){s.qsSummaryView.qsSummaryNextBtn.loading(),f.when(e.checkRouterConnection()).done(function(){e.dualNatDetected?i.quickSetup.goTo("qsDualNatDetect"):"upgradeSucceed"!==i.quickSetup.upgradeState?i.quickSetup.cloudBindFlag||i.quickSetup.skipFlag||i.quickSetup.noInternet?(s.qsSummaryView.qsSummaryNextBtn.loading(!1),i.quickSetup.quit()):i.quickSetup.preLoadCloudAndTether():window.location.href="/"}).fail(function(){s.qsSummaryView.summaryPanel.hideTitle(),s.qsSummaryView.qsSummaryDescription.setText(f.su.CHAR.QUICK_SETUP.DESCRIPT6),s.qsSummaryView.qsSummaryNextBtn.loading(!1)})}}}),this.listen({"models.quickSetupModel.wanPortStatus":{"ev_value_change":function(e,t,n){s.qsSummaryView["ispSpecialLan4"].setLabelField("1000WAN"===t?f.su.CHAR.NETWORK_MAP.PORT_2500LAN:f.su.CHAR.NETWORK_MAP.PORT_1000LAN)}}})}},function(e,i,o,t,a,n){return{dualNatDetected:!1,toggleIptvView:function(e){"off"===e.ispSpecialEnable||a.quickSetup.skipFlag?i.qsSummaryView.iptvFieldset.hide():i.qsSummaryView.iptvFieldset.show()},setQsSummary:function(){if(o.iptvVlan.ports.getValue()){var e=o.iptvVlan.ports.getValue().split(" ");if(a.quickSetup.isSupportSetPort()){var t="1000WAN"===o.quickSetupModel.wanPortStatus.getValue()?f.su.CHAR.NETWORK_MAP.PORT_2500LAN:f.su.CHAR.NETWORK_MAP.PORT_1000LAN;i.qsSummaryView["ispSpecialLan4"].setLabelField(t),e.pop()}portTypeObj={"Internet":f.su.CHAR.NETWORK_IPTV.INTERNET,"IPTV":f.su.CHAR.NETWORK_IPTV.IPTV,"IP-Phone":f.su.CHAR.NETWORK_IPTV.VOLP,"Bridge":f.su.CHAR.NETWORK_IPTV.BRIDGE};for(var n=o.iptvVlan.porttype.getValue(),s=0;s<e.length;s++)i.qsSummaryView["ispSpecialLan"+(s+1)].setLabelField(f.su.CHAR.NETWORK_IPTV.LAN+e[s]),i.qsSummaryView["ispSpecialLan"+(s+1)].setValue(portTypeObj[n.split(" ")[s]]),i.qsSummaryView["ispSpecialLan"+(s+1)].show()}},showPassword:function(){var e=o.quickSetupModel,t=i.qsSummaryView;t.wireless2gEncryPassword.setValue(e.wireless2gPskKey.getValue()||f.su.CHAR.WIFI_SHARING.NO_PASSWORD),t.wireless5gEncryPassword.setValue(e.wireless5gPskKey.getValue()||f.su.CHAR.WIFI_SHARING.NO_PASSWORD),n.device.getIsTriband()&&t.wireless5g2EncryPassword.setValue(e.wireless5g2PskKey.getValue()||f.su.CHAR.WIFI_SHARING.NO_PASSWORD)},checkRouterConnection:function(){var e=f.Deferred();return n.ajax.request({proxy:"checkRouterProxy",success:function(){e.resolve()},fail:function(){e.resolve()},error:function(){e.reject()}}),e.promise()}}})}(jQuery),function(p){p.su.moduleManager.define("qsWirelessSetting",{deps:["quickSetup","qsChooseInternetType"],services:["device"],models:["quickSetupModel"],views:["qsWirelessSettingView"],listeners:{"ev_on_launch":function(e,t,n,s,i,o,a){o.quickSetup.getQuickSetupData();t.smartEnable="on",s.quickSetupModel.wirelessSmartEnable.setValue(t.smartEnable),"on"!==t.smartEnable?t.smartEnableOn():s.quickSetupModel.wireless2gEnable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.WIRELESS_RADIO)}},init:function(o,s,a,e,i,r){this.control({"#qs-wireless-before-step-btn":{"ev_button_click":function(){i.quickSetup.getPhysicalConnStatus()?i.qsChooseInternetType.goNext():i.quickSetup.goTo("qsChooseInternetType")}},"#qs-wireless-next-step-btn":{"ev_button_click":function(){var e=["wireless2gSsid","wireless2gPskKey"];"off"===a.quickSetupModel.wirelessSmartEnable.getValue()&&(e.push("wireless5gSsid","wireless5gPskKey"),r.device.getIsTriband()&&e.push("wireless5g2Ssid","wireless5g2PskKey"));for(var t=0,n=e.length;t<n;t++)if(!a.quickSetupModel[e[t]].validate())return;o.syncQsWirelessData(),i.quickSetup.skipFlag?i.quickSetup.isAutoUpdate()?i.quickSetup.goTo("qsAutoUpdate"):(s.qsWirelessSettingView.qsWirelessNextBtn.loading(),i.quickSetup.submitAllData()):i.quickSetup.goTo("qsInternetConnection",!0)}}}),this.listen({"models.quickSetupModel.wirelessSmartEnable":{"ev_value_change":function(e,t){"on"==t?(s.qsWirelessSettingView.qsWireless5g.hide(),s.qsWirelessSettingView.qsWirelessSetSeparately.hide(),a.quickSetupModel.wireless2gEnable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.WIRELESS_RADIO)):o.smartEnableOn()}},"models.quickSetupModel.wireless2gEnable":{"ev_value_change":function(e,t){s.qsWirelessSettingView.qsWirelessSetSeparately.getValue()||(a.quickSetupModel.wireless5gEnable.setValue(t),r.device.getIsTriband()&&a.quickSetupModel.wireless5g2Enable.setValue(t))}},"models.quickSetupModel.wireless2gSsid":{"ev_value_change":function(e,t){var n=s.qsWirelessSettingView.qsWirelessSetSeparately.getValue();""===t||n||(r.device.getIsTriband()?(a.quickSetupModel.wireless5gSsid.setValue(t+("gaming"==GLOBAL_STYLE?"_5G":"_5G_1")),a.quickSetupModel.wireless5g2Ssid.setValue(t+("gaming"==GLOBAL_STYLE?"_5G_Gaming":"_5G_2"))):a.quickSetupModel.wireless5gSsid.setValue(t+"_5G"))}},"models.quickSetupModel.wireless2gEncryption":{"ev_value_change":function(e,t){"psk_sae"==t?a.quickSetupModel.wireless2gPskKey.setVtype("wpa3_password"):a.quickSetupModel.wireless2gPskKey.setVtype("psk_password")}},"models.quickSetupModel.wireless2gPskKey":{"ev_value_change":function(e,t){var n=s.qsWirelessSettingView.qsWirelessSetSeparately.getValue();""===t||n||(a.quickSetupModel.wireless5gPskKey.setValue(t),r.device.getIsTriband()&&a.quickSetupModel.wireless5g2PskKey.setValue(t))}},"models.quickSetupModel.wireless5gEncryption":{"ev_value_change":function(e,t){"psk_sae"==t?a.quickSetupModel.wireless5gPskKey.setVtype("wpa3_password"):a.quickSetupModel.wireless5gPskKey.setVtype("psk_password")}},"models.quickSetupModel.wireless5g2Encryption":{"ev_value_change":function(e,t){"psk_sae"==t?a.quickSetupModel.wireless5g2PskKey.setVtype("wpa3_password"):a.quickSetupModel.wireless5g2PskKey.setVtype("psk_password")}},"views.qsWirelessSettingView.qsWirelessSetSeparately":{"ev_value_change":function(e,t){var n,s,i;t?(o.visualEnable5g(),r.device.getIsTriband()&&o.visualEnable5g2()):(o.visualDisable5g(),n=a.quickSetupModel.wireless2gEnable.getValue(),s=a.quickSetupModel.wireless2gSsid.getValue(),i=a.quickSetupModel.wireless2gPskKey.getValue(),a.quickSetupModel.wireless5gEnable.setValue(n),a.quickSetupModel.wireless5gPskKey.setValue(i),r.device.getIsTriband()?(a.quickSetupModel.wireless5gSsid.setValue(s+("gaming"==GLOBAL_STYLE?"_5G":"_5G_1")),o.visualDisable5g2(),a.quickSetupModel.wireless5g2Enable.setValue(n),a.quickSetupModel.wireless5g2Ssid.setValue(s+("gaming"==GLOBAL_STYLE?"_5G_Gaming":"_5G_2")),a.quickSetupModel.wireless5g2PskKey.setValue(i)):a.quickSetupModel.wireless5gSsid.setValue(s+"_5G"))}}})}},function(i,s,o,e,t,a){i=this;return{has5g1:function(){return!0},has5g2:function(){return!0},smartEnableOn:function(){o.quickSetupModel.wireless2gEnable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.MODE_2G),s.qsWirelessSettingView.qsWireless5g.show(),s.qsWirelessSettingView.qsWirelessSetSeparately.show();var e=o.quickSetupModel.wireless2gEnable.getValue(),t=o.quickSetupModel.wireless2gSsid.getValue(),n=o.quickSetupModel.wireless2gPskKey.getValue();o.quickSetupModel.wireless5gEnable.setValue(e),o.quickSetupModel.wireless5gSsid.setValue(t+"_5G"),o.quickSetupModel.wireless5gPskKey.setValue(n),!s.qsWirelessSettingView.qsWirelessSetSeparately.getValue()&&i.visualDisable5g(),a.device.getIsTriband()?(o.quickSetupModel.wireless5gEnable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.MODE_5G1),o.quickSetupModel.wireless5gSsid.setValue(t+("gaming"==GLOBAL_STYLE?"_5G":"_5G_1")),s.qsWirelessSettingView.qsWireless5g2.show(),o.quickSetupModel.wireless5g2Enable.setValue(e),o.quickSetupModel.wireless5g2Ssid.setValue(t+("gaming"==GLOBAL_STYLE?"_5G_Gaming":"_5G_2")),o.quickSetupModel.wireless5g2PskKey.setValue(n),!s.qsWirelessSettingView.qsWirelessSetSeparately.getValue()&&i.visualDisable5g2()):s.qsWirelessSettingView.qsWireless5g2.hide()},visualDisable5g:function(){o.quickSetupModel.wireless5gEnable.disable(!0),o.quickSetupModel.wireless5gSsid.disable(!0),o.quickSetupModel.wireless5gPskKey.disable(!0)},visualEnable5g:function(){o.quickSetupModel.wireless5gEnable.enable(),o.quickSetupModel.wireless5gSsid.enable(),o.quickSetupModel.wireless5gPskKey.enable()},visualDisable5g2:function(){o.quickSetupModel.wireless5g2Enable.disable(!0),o.quickSetupModel.wireless5g2Ssid.disable(!0),o.quickSetupModel.wireless5g2PskKey.disable(!0)},visualEnable5g2:function(){o.quickSetupModel.wireless5g2Enable.enable(),o.quickSetupModel.wireless5g2Ssid.enable(),o.quickSetupModel.wireless5g2PskKey.enable()},syncQsWirelessData:function(){var e=i.syncQsWireless2gData(),t=i.syncQsWireless5gData(),n=i.syncQsWireless5g2Data(),s=p.extend({},e,t,n);o.quickSetupModel.replaceData(s)},syncQsWireless2gData:function(){var e=o.quickSetupModel.getData(),t={wireless2gDisabledAll:"on"==e.wireless2gEnable?"off":"on",wireless2gEncryption:"psk_sae"===e.wireless2gEncryption?"psk_sae":"psk"};return o.quickSetupModel.replaceData(t),t},syncQsWireless5gData:function(){var e=o.quickSetupModel.getData(),t=e.wirelessSmartEnable,n=e.wireless5gEnable,s=e.wireless5gEncryption,i={wireless5gRegionEnable:"on"};return"on"==t?(i.wireless5gEnable=e.wireless2gEnable,i.wireless5gDisabledAll=e.wireless2gDisabledAll,i.wireless5gSsid=e.wireless2gSsid,i.wireless5gPskKey=e.wireless2gPskKey,i.wireless5gEncryption=e.wireless2gEncryption,i.wireless5gPskVersion=e.wireless2gPskVersion,i.wireless5gPskCipher=e.wireless2gPskCipher):(i.wireless5gDisabledAll="on"==n?"off":"on",i.wireless5gEncryption="psk_sae"===s?"psk_sae":"psk"),i},syncQsWireless5g2Data:function(){if(!a.device.getIsTriband())return{};var e=o.quickSetupModel.getData(),t=e.wirelessSmartEnable,n=e.wireless5g2Enable,s=e.wireless5g2Encryption,i={wireless5gRegionEnable:"on"};return"on"==t?(i.wireless5g2Enable=e.wireless2gEnable,i.wireless5g2DisabledAll=e.wireless2gDisabledAll,i.wireless5g2Ssid=e.wireless2gSsid,i.wireless5g2PskKey=e.wireless2gPskKey,i.wireless5g2Encryption=e.wireless2gEncryption,i.wireless5g2PskVersion=e.wireless2gPskVersion,i.wireless5g2PskCipher=e.wireless2gPskCipher):(i.wireless5g2DisabledAll="on"==n?"off":"on",i.wireless5g2Encryption="psk_sae"===s?"psk_sae":"psk"),i}}})}(jQuery);