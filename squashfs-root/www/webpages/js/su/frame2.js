!function(u){var l,o;u.su=u.su||{},u.su.widgets={},u.su.Widget=(l={labelField:{attribute:"label-field",defaultValue:""},cls:{attribute:"cls",defaultValue:" container widget-container "},separator:{attribute:"separator",defaultValue:":"},labelCls:{attribute:"label-cls",defaultValue:""},inputCls:{attribute:"input-cls",defaultValue:""},tips:{attribute:"tips",defaultValue:""},shortTips:{attribute:"short-tips",defaultValue:""},tipsCls:{attribute:"tips-cls",defaultValue:""},errorTipsCls:{attribute:"error-tips-cls",defaultValue:""}},(o=function(e){if("object"===u.type(e.id))u(e.id).attr("id")?this.domId=u(e.id).attr("id"):(this.domId=u.su.randomId("widget-"),u(e.id).attr("id",this.domId)),e.id=this.domId;else{if("string"!==u.type(e.id))return void console.error("Widget id doesn't exists. ");this.domId=e.id}this._init(e),this.init(e);var i,s,t=this.render;return this.render=(i=t,s=this,function(){var e=this,t=i.call(this);return(t&&t.then?t:u.Deferred().resolve()).then(function(){s._bindListeners(),s._initTip(),s._initScrollbar(),e._view&&e._view.onChildWidgetRendered(e),e.rendered=!0})}),this}).prototype={_init:function(e){var r,o=this.dom(),d=this;r=e.settings=e.settings||{},this.settings=function(){var e=u.extend({},l,d.settings);for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];if(r.hasOwnProperty(i.attribute)||o[0]&&o[0].hasAttribute(i.attribute)){"object"===u.type(r[i.attribute])&&"object"===u.type(i.defaultValue)&&(r[i.attribute]=u.extend(!0,{},i.defaultValue,r[i.attribute]));var s,a=r[i.attribute]||o.attr(i.attribute);s=u.isFunction(i.setter)?i.setter.call(o,a):a,r[t]=s}else{var n=i.defaultValue;i.getter?r[t]=i.getter.call(o):r[t]="object"===u.type(n)?u.su.clone(n):n}}return r}(),e.customSettings&&u.extend(this.settings,e.customSettings),this._view=e.view,this._view&&this._view.addChildWidget(this),this._status={shown:!0,disabled:!1},this.dom().data("viewObj",this)},_initTip:function(e){var t=(e=this).settings,i=e.getContainer();if(t.tipText&&i){var s=i.children("div[widget=toolTip]");s.get(0)&&(u(s[0]).attr("id",e.domId+"_tooltip"),new u.su.widgets.toolTip({id:u(s[0]),tipText:t.tipText}).render())}if(i){var a=i.children(".widget-wrap-outer").children("div[widget=errortip]");a.get(0)&&(u(a[0]).attr("id",e.domId+"_errortip"),e.errortip=new u.su.widgets.errortip({id:u(a[0]),type:e._type}),e.errortip.render(),e.errortip.hide())}e.setTips(t.tips)},_initScrollbar:function(){var i=this;i.dom().find(".su-scroll").add(i.dom().filter(".su-scroll")).each(function(e,t){u(this).closest("[widget]")[0]==i.dom()[0]&&u.su.scrollbar({ele:t,opts:i.scrollOption||{}})})},_bindListeners:function(){if(this.listeners&&u.isArray(this.listeners)){var e,t,a=this,n=this.listeners;if(a._eventMap&&0<a._eventMap.length)for(e=0,t=a._eventMap.length;e<t;e++){var i=a._eventMap[e];i.target?i.parent.off(i.event,i.target,i.func):i.parent.off(i.event,i.func)}for(a._eventMap=[],e=0,t=n.length;e<t;e++)!function(t){var e=function(){var e=Array.prototype.slice.apply(arguments);e.push(a),n[t].callback.apply(this,e)};if(!n[t].condition||!1!==n[t].condition(a)){var i=n[t].selector;if("function"===u.type(i)){var s=i.call(a);s.target?u(s.parent).on(n[t].event,s.target,e):u(s.parent).on(n[t].event,e),a._eventMap.push({parent:u(s.parent),target:s.target||"",event:n[t].event,handler:e})}else""!==i?a.dom().on(n[t].event,i,e):a.dom().on(n[t].event,e),a._eventMap.push({parent:a.dom(),target:i||"",event:n[t].event,handler:e})}}(e)}},init:function(){},dom:function(){return u("#"+this.domId)},render:function(){this.dom().addClass(this.settings.cls)},getContainer:function(){var e=this.dom();if(e.hasClass("widget-container"))return e;var t=e.children(".widget-container");return t.get(0)?u(t.get(0)):null},setLabelField:function(e){this.dom().find("label.widget-fieldlabel").html(e)},setLabelVisible:function(e){this.dom().find(".widget-fieldlabel-inner").css("visibility",e?"visible":"hidden")},show:function(){this.dom().show(),this.dom().triggerHandler("ev_widget_show")},hide:function(){this.dom().hide(),this.dom().triggerHandler("ev_widget_hide")},fadeOut:function(e){var t=this,i=e/1e3+"s";this.dom().css({opacity:0,transtion:"opacity "+i}),setTimeout(function(){t.dom().hide().css({display:"none",opacity:1,transtion:"no "})},e)},toggle:function(){this.dom().is(":visible")?this.hide():this.show()},enable:function(){this.dom().removeClass("disabled")},disable:function(){this.dom().addClass("disabled")},isDisabled:function(){var e=this.dom(),t=this.getContainer();return t&&t.hasClass("disabled")&&!t.hasClass("visual-disabled")||!0===e.prop("disabled")},setError:function(e){var t=this.dom(),i=this.getContainer(),s=t.find("div[widget=errortip]");if(i&&!this.isDisabled()){if(this.errortip)e&&this.errortip.show(e);else if(0<s.length&&i){var a=i.children(".widget-wrap-outer").children("div[widget=errortip]");a.get(0)&&(u(a[0]).attr("id",this.domId+"_errortip"),this.errortip=u(a[0]).errortip({type:this.type})[0],this.errortip.render(),e&&this.errortip.show(e))}i.removeClass("valid").addClass("error"),i.find("span.widget-validate-icon").css({"display":"inline-block"})}},setErrorHtml:function(e){var t=this.dom(),i=this.getContainer(),s=t.find("div[widget=errortip]");if(i&&!this.isDisabled()&&e){if(this.errortip)this.errortip.showHtml(e);else if(0<s.length&&i){var a=i.children(".widget-wrap-outer").children("div[widget=errortip]");a.get(0)&&(u(a[0]).attr("id",this.domId+"_errortip"),this.errortip=u(a[0]).errortip({type:this.type})[0],this.errortip.render(),this.errortip.showHtml(e))}i.removeClass("valid").addClass("error"),i.find("span.widget-validate-icon").css({"display":"inline-block"})}},setNormal:function(){var e=this.dom(),t=(this.settings,this.getContainer()||e);e.find("div[widget=errortip]"),t&&(t.removeClass("focus error disable dirty correct"),t.find("span.widget-validate-icon").css({"display":"none"}),this.errortip&&this.errortip.hide())},addClass:function(e){var t=this.dom();return t&&0<t.length&&t.addClass(e),this},removeClass:function(e){var t=this.dom();return t&&0<t.length&&t.removeClass(e),this},setFocus:function(){var e=this.getContainer();this.setNormal(),e.addClass("focus")},removeFocus:function(){this.getContainer().removeClass("focus")},setTips:function(e){var t=this.dom(),i=this.settings,s=(this.getContainer()||t).find("div.widget-tips");i.tips=e,"string"===u.type(e)&&s.find("div.tips-content").html(e),e?(s.show(),s.fadeIn(150)):(s.hide(),s.css("display","none"))},setShortTips:function(e){var t=this.dom(),i=this.settings,s=(this.getContainer()||t).find("div.widget-short-tips");i.shortTips=e,"string"===u.type(e)&&s.find("div.short-tips-content").html(e),e?(s.css("display","inline-block"),s.fadeIn(150)):(s.hide(),s.css("display","none"))},setToolTip:function(e){var t=this.dom(),i=this.settings,s=(this.getContainer()||t).find("div.tooltip-container");i.tipText=e,"string"===u.type(e)&&s.find("p.tip-text").html(e),e?s.show():s.hide()},setPosition:function(e,t,i,s){var a=this.getContainer();if(a){var n="center"===e?parseInt((u(window).width()-a.outerWidth())/2,10):e||0,r="center"===t?parseInt((u(window).height()-a.outerHeight())/2,10):t||0;return n=n<0?0:n,r=r<0?0:r,a.css({left:n,top:r,right:i,bottom:s}),{x:n,y:r}}},getMask:function(){var e=u("#global-mask");return 0<e.length?e.data("viewObj"):(u('<div id="global-mask"></div>').appendTo(u("body")),new u.su.widgets.mask({id:"global-mask"}))},_destroy:function(){if(this._view&&this._view.removeChildWidget(this),this.destroy&&this.destroy(),this._eventMap){for(var e=0,t=this._eventMap.length;e<t;e++){var i=this._eventMap[e];i.target?u(i.parent).off(i.event,i.target,i.handler):u(i.parent).off(i.event,i.handler)}this._eventMap=[]}this.dom().data("viewObj",null),this.dom().remove(),this.settings=null},getStatus:function(e){return e?this._status[e]:this._status},setStatus:function(e,t){this._status[e]=t,this.dom().triggerHandler("ev_status_change",[this._status])},setVisible:function(e){e?this.dom().css("visibility","visible"):this.dom().css("visibility","hidden")}},o.regMap={base:u.extend({settings:l,listeners:[]},o.prototype)},o.register=function(t,s){var a,i;for(var e in o.regMap[t]=s,i=s.extend?u.su.widgets[s.extend]:u.su.Widget,o.regMap[t].settings=function n(){var e,t=s.extend?o.regMap[s.extend].settings:l;for(var i in e=u.isFunction(s.settings)?s.settings.call(a,u.extend({},t)):u.extend({},t,s.settings))e.hasOwnProperty(i)&&!e[i].setter&&(e[i].setter=(e[i].attribute,function(e){u(this);var t=u.su.getAttrObject;if(null!==e&&e!==undefined){if("string"===u.type(e)&&e.match(/{(.+)}/g)){var i=t(u.su.CHAR,e);return null!==i&&i!==undefined?i:"Not Defined"}return e}}));return e}(),o.regMap[t].listeners=function r(){var e=s.extend?o.regMap[s.extend].listeners:[];return s.listeners=s.listeners||[],u.isFunction(s.listeners)?s.listeners.call(a,e):e.concat(s.listeners)}(),a=u.su.widgets[t]=function(e){return this._type||(this._type=t,this.settings=o.regMap[t].settings,this.listeners=o.regMap[t].listeners),i.call(this,e),this},u.su.inherit(i,a),s)s.hasOwnProperty(e)&&u.isFunction(s[e])&&(a.prototype[e]=s[e]);return a},o),u("html").delegate("input","focus",function(e){e.stopPropagation(),e.preventDefault()}).on("click",function(e){e.stopPropagation(),u("div.region-select-wrap, div.region-search-wrap").hide(),u("div.timepicker-msg-container").removeAttr("dragFlag")}).on("mouseup",function(e){u("div.button-container").removeClass("clicked"),u("div.btn-help-container a.btn-help").removeClass("clicked"),u("div.timepicker-msg-container-wrap").trigger("mouseup")}).on("keyup mousedown",function(e){}),u(document).ready(function(e){u('<div id="global-mask"></div>').appendTo(u("body")),new u.su.widgets.mask({id:"global-mask"}).render(),u('<div id="global-combobox-options" data-shown="_hidden_"></div>').appendTo(u("body")),u('<div id="global-tips-text" class="global-tips-text" data-shown="_hidden_"></div>').appendTo(u("body"));var t,i=document.body.clientWidth;t=i<768?"s":i<1024?"m":i<1280?"l":"xl",u.su.widgetSize=t}),u(window).on("resize",u.su.throttle(function(e){var t,i=u("div.msg-container"),s=document.body.clientWidth,a=u("#global-combobox-options"),n=u("#global-tips-text"),r=a.attr("data-shown"),o=n.attr("data-shown"),d=u.su.widgetSize;t=s<768||u.su.isMobile()?"s":s<1024?"m":s<1280?"l":"xl",u.su.widgetSize=t,u(window).trigger("ev_resize",[t,s,d]),i.each(function(e,t){var i=u(t).data("viewObj");i.settings.shown&&i.setPosition("center","center")}),"_hidden_"!==r&&u("#"+r).data("viewObj").calculatePosition(),"_hidden_"!==o&&u("#"+o).data("viewObj").adjustLayout(u.su.widgetSize);var l=u(".page-content").data("ps");if(l&&l.update(),0<u(".onemesh-pic-container").length){var c=.4629*u(".onemesh-pic-container").width()+"px";u(".onemesh-bg-left").height(c),u(".onemesh-bg-right").height(c)}},100,100)),u(document).on("DOMSubtreeModified",u.su.debounce(function(){u(".ps").each(function(e){var t=u(this).data("ps");t&&t.update()})},100))}(jQuery),function(){function i(e,t){var i;0<$(e.ele).length&&($(e.ele).data("ps")?$(e.ele).data("ps").update():(e.opts=$.extend(e.opts,{wheelPropagation:!0}),i=new scrollbar(e.ele,e.opts),$(e.ele).data("ps",i),t&&t(i)))}$.su.scrollbar=function(e,t){$.su.isMobile()||"Microsoft Internet Explorer"===navigator.appName&&(navigator.userAgent.match(/Trident/i)&&navigator.userAgent.match(/MSIE 8.0/i)||navigator.userAgent.match(/MSIE 9.0/i))||($.su.scrollbar.loaded?i(e,t):$.su.router.loadFile("js/libs/perfect-scrollbar.min.js?t=9599d0db",function(){i(e,t),$.su.scrollbar.loaded=!0}))},$.su.scrollbar.loaded=!1}(),$.su.Widget.register("panel",{settings:{_title:{attribute:"title-label",defaultValue:""},instruction:{attribute:"instruction",defaultValue:""},icon:{attribute:"icon",defaultValue:""},iconCls:{attribute:"icon-cls",defaultValue:""},panelType:{attribute:"panel-type",defaultValue:"form"},collapsible:{attribute:"collapsible",defaultValue:!1},collapsed:{attribute:"collapsed",defaultValue:!1}},listeners:[{selector:function(e){return{parent:this.getContainer().find(".panel-title:first")}},event:"click",callback:function(e,t){var i=$(this).find("span.panel-header-btn-collapse"),s=t.settings;if(s.collapsible){var a=t.getContainer(),n=a.find("div.panel-content");s.collapsed?(n.slideDown(200,function(){n.css("display","block")}),a.removeClass("collapsed"),s.collapsed=!1,i.closest("div[widget=panel]").triggerHandler("ev_panel_open")):(n.slideUp(200,function(){$(this).css("display","none")}),a.addClass("collapsed"),s.collapsed=!0,i.closest("div[widget=panel]").triggerHandler("ev_panel_close"))}}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=t.collapsible?!1===t.collapsed?"block":"none":"block",s=t.collapsed?" collapsed":"";e.addClass(t.cls+"panel-container "+t.panelType+s);var a="";a+='<div class="panel-wrap-before"></div>',a+='<div class="panel-wrap">',!1!==t._title&&(a+='<div class="panel-header">',a+='<h3 class="panel-title">',a+='<span class="panel-title-icon"></span>',a+='<span class="panel-title-text">'+t._title+"</span>","string"===$.type(t.instruction)&&""!==t.instruction&&(a+='<div class="panel-title-instruction">'+t.instruction+"</div>"),a+='<div class="panel-header-btn-container">',t.collapsible&&(a+='<span class="panel-header-btn-collapse" type="button"></span>'),a+="</div>",a+="</h3>",a+="</div>"),a+='<div class="panel-content" style="display: '+i+'">',a+='<div class="panel-tbar-container"></div>',a+='<div class="panel-content-container"></div>',a+='<div class="panel-fbar-container"></div>',a+="</div>",a+="</div>",a+='<div class="panel-wrap-after"></div>';var n=$(a);0<e.find("div.panel-content-container").length?(n.find("div.panel-content-container").append(e.find("div.panel-content-container").children().detach()),e.find(".panel-wrap").remove()):n.find("div.panel-content-container").append(e.children().detach()),e.append(n)},setTitle:function(e){var t=this.getContainer();e&&t.children(".panel-wrap").children(".panel-header").find("h3.panel-title span.panel-title-text").html(e)},setInstruction:function(e){var t=this.getContainer();e?(t.find("h3.panel-title div.panel-title-instruction").show(),t.find("h3.panel-title div.panel-title-instruction").html(e)):t.find("h3.panel-title div.panel-title-instruction").hide()},open:function(){var e=this.settings,t=this.getContainer(),i=t.find("div.panel-content");t.find("span.panel-header-btn-collapse"),i.slideDown(200,function(){i.css("display","block"),t.removeClass("collapsed")}),e.collapsed=!1,this.dom().triggerHandler("ev_panel_open")},isOpen:function(){return!this.getContainer().hasClass("collapsed")},hideTitle:function(){var e=this.getContainer(),t=e.find("div.panel-header"),i=e.find("div.panel-content");t.hide(),i.css("padding-top",0)}}),$.su.Widget.register("simpleDom",{render:function(){}}),$.su.Widget.register("form",{settings:{formName:{attribute:"form-name",defaultValue:""}},init:function(){this.fields=[]},render:function(){},loadData:function(){},getAllFields:function(){for(var e=[],t=this.dom().find("div[widget]"),i=0,s=t.length;i<s;i++){var a=$(t[i]),n=a.attr("widget"),r=a.attr("name");if(r){var o=$(a).data("viewObj");o||(o=$(a)[n]({})[0]),o.field=r,e.push(o)}}return e},setNormal:function(){var e=this.getAllFields();$.each(e,function(e,t){t.setNormal&&t.setNormal()})},destroy:function(){var e=this.getAllFields();$.each(e,function(e,t){t._destroy()})}}),$.su.Widget.register("textbox",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},tipText:{attribute:"tip-text",defaultValue:""},unit:{attribute:"unit",defaultValue:""},addon:{attribute:"add-on",defaultValue:""},hint:{attribute:"hint",defaultValue:null},prefix:{attribute:"prefix",defaultValue:null},autoTrim:{attribute:"auto-trim",defaultValue:null},emitEnter:{attribute:"emit-enter",defaultValue:!1}},listeners:[{selector:".text-wrap-inner input",event:"keyup",callback:function(e,t){var i=t.getValue();t.dom().find(".text-hint-inner").hide(),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}]),t.settings.emitEnter&&13==e.keyCode&&t.dom().triggerHandler("ev_input_enter")}},{selector:".text-wrap-inner input",event:"click",callback:function(e,t){var i=t.getValue();t.dom().addClass("focus"),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}]),t.dom().find(".text-hint-inner").hide()}},{selector:"div.text-wrap",event:"mouseenter",callback:function(e,t){t.dom().addClass("hover")}},{selector:"div.text-wrap",event:"mouseleave",callback:function(e,t){t.dom().removeClass("hover")}},{selector:".text-wrap-inner input",event:"blur",callback:function(e,t){var i=t.getValue();!0===t.settings.autoTrim&&(i=$.trim(i)),t.dom().find("div.widget-addon").hide(),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}]),t.dom().triggerHandler("ev_view_change",[{"type":"valid","value":i}]),t.dom().triggerHandler("ev_textbox_blur"),t.dom().removeClass("focus"),""==i&&t.settings.hint&&t.dom().find(".text-hint-inner").show()}},{selector:".text-wrap input",event:"focus",callback:function(e,t){t.setAddon(),t.dom().addClass("focus"),t.dom().triggerHandler("ev_textbox_focus")}},{selector:".text-hint-inner input.text-hint",event:"click",callback:function(e,t){t.dom().hasClass("disabled")||t.dom().find(".text-wrap-inner input").click().focus()}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=t.readOnly?'readonly="readonly"':"",s=t.readOnly?" readonly":"",a=!1===t.labelField?"label-empty":"",n=""===t.addon?"":" addon",r=""===t.unit?"":" unit",o=""===t.tips?"":" tips",d=""===t.shortTips?"":" short-tips",l=null==t.prefix?"":" prefix";e.addClass(t.cls+"text-container "+a+n+r+o+d+l+s);var c="";null!==t.labelField&&(c+='<div class="widget-fieldlabel-wrap'+t.labelCls+(""==t.labelField?" empty":"")+'">',c+='<div class="widget-fieldlabel-inner">',c+='<label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(c+='<span class="widget-separator">'+t.separator+"</span>"),c+="</div>",c+="</div>"),c+='<div class="widget-wrap-outer text-wrap-outer">',c+='<div class="widget-wrap text-wrap">',(t.prefix||t.unit)&&(c+='<div class="widget-table-wrap text-table-wrap">'),c+='<span class="text-wrap-before"></span>',t.prefix&&(c+='<div class="text-wrap-prefix">',c+='<span class="text-prefix">'+t.prefix+"</span>",c+="</div>"),c+='<span class="text-wrap-inner"><input type="text" '+i+"/></span>",c+='<span class="text-wrap-after"></span>',t.unit&&(c+='<span class="text-wrap-unit">'+t.unit+"</span>"),t.hint&&(c+='<span class="hint text-hint-inner">',c+='<input class="text-hint" value="'+t.hint+'" tabindex="-1" contenteditable="false" readonly="readonly"/>',c+="</span>"),(t.prefix||t.unit)&&(c+="</div>"),c+="</div>",""!=t.shortTips&&null!=t.shortTips&&t.shortTips!=undefined&&(c+='<div class="widget-short-tips textbox-short-tips">',c+='<div class="content short-tips-content">'+t.shortTips+"</div>",c+="</div>"),""!=t.tips&&null!=t.tips&&t.tips!=undefined&&(c+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',c+='<div class="content tips-content">'+t.tips+"</div>",c+="</div>"),c+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',c+="</div>",t.addon&&(c+='<div class="widget-addon">',c+='<span class="addon-content">'+t.addon+"</span>",c+="</div>"),c+="</div>",t.tipText&&(c+='<div widget="toolTip"></div>',e.addClass("has-tool-tip")),e.empty().append(c)},setMaxLength:function(e){var t=this.dom();e=parseInt(e),"number"===$.type(e)&&t.find(".text-wrap-inner input").attr("maxlength",e)},focus:function(){this.dom().find(".text-wrap-inner input").focus()},disable:function(e){var t=this.dom(),i=this.getContainer();i.addClass("disabled"),t.find(".text-wrap-inner input").prop("disabled",!0),e?i.addClass("visual-disabled"):t.triggerHandler("ev_view_disable")},enable:function(){var e=this.dom();this.getContainer().removeClass("disabled"),e.find(".text-wrap-inner input").prop("disabled",!1),e.triggerHandler("ev_view_enable")},setValue:function(e){if(this.getValue()!==e){var t=this.dom();t.find(".text-wrap-inner input").val(e),""!=e&&null!=e&&t.find(".text-hint-inner").hide()}},getValue:function(){var e=this.dom().find(".text-wrap-inner input");if(1<e.length){var t=[];return e.each(function(){t.push($(this).val())}),t}return e.val()},setAddon:function(e){e=e||this.settings.addon;var t=this.dom().find("div.widget-addon"),i=this.getContainer()||this.dom(),s=this.dom().find(".widget-tips");i.removeClass("error dirty correct"),this.errortip&&this.errortip.hide(),""!=e&&e?(s.hide(),$.su.isIe?t.show():t.fadeIn(150)):s.show()},setError:function(e){var t=this.dom(),i=this.getContainer(),s=t.find("div[widget=errortip]"),a=t.find(".widget-tips");if(i&&!this.isDisabled()){if(a.hide(),this.errortip)e&&this.errortip.show(e);else if(0<s.length&&i){var n=i.children(".widget-wrap-outer").children("div[widget=errortip]");n.get(0)&&($(n[0]).attr("id",this.domId+"_errortip"),this.errortip=$(n[0]).errortip({type:this.type})[0],this.errortip.render(),e&&this.errortip.show(e))}i.removeClass("valid").addClass("error"),i.find("span.widget-validate-icon").css({"display":"inline-block"})}},setNormal:function(){var e=this.dom(),t=(this.settings,this.getContainer()||e),i=(e.find("div[widget=errortip]"),e.find(".widget-tips"));t&&(t.removeClass("error disable dirty correct"),t.find("span.widget-validate-icon").css({"display":"none"}),t.find("div.widget-addon").hide(),this.errortip&&this.errortip.hide(),0<i.length&&($.su.isIe?i.show():i.fadeIn(150)))},setPrefix:function(e){this.dom().find(".text-prefix").html(e)}}),function(l){var t=l.su.Widget.register("ip",{extend:"textbox",settings:{},listeners:[{selector:".text-wrap-inner input",event:"keydown",callback:function(e,t){var i=l(this);parseInt(i.attr("data-index"),10);if(!t.dom().hasClass("disabled")&&37!==e.keyCode&&39!==e.keyCode&&9!==e.keyCode&&17!==e.keyCode&&(!0!==e.ctrlKey||65!==e.keyCode))if(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||8==e.keyCode||46==e.keyCode||190==e.keyCode||110==e.keyCode||e.ctrlKey||e.metaKey)if(!0!==e.shiftKey){var s=i.val(),a=i.get(0).selectionStart,n=i.get(0).selectionEnd,r=(s.slice(a,n),s.split(".").length-1),o=s.slice(0,a),d=s.slice(n);190===e.keyCode&&(o.lastIndexOf(".")===o.length-1||0===d.indexOf(".")||2<r)&&e.preventDefault()}else e.preventDefault();else e.preventDefault()}}],init:function(){},render:function(){var e=this.dom();t.superclass.render.call(this),e.addClass("ip-container")},setMaxLength:function(){return!1}})}(jQuery),function(o){var s=o.su.Widget.register("mac",{extend:"textbox",settings:{connector:{attribute:"connector",defaultValue:"-"}},listeners:[{selector:"span.mac-input input",event:"keypress",callback:function(e,t){switch(e.charCode){case 64:case 33:case 35:case 36:case 37:case 94:case 38:case 42:case 40:case 41:e.preventDefault()}}},{selector:"span.mac-input input",event:"keyup",callback:function(e,t){var i=o(this),s=parseInt(i.attr("data-index"),10);i.get(0).selectionStart,i.get(0).selectionEnd;if((this.value=this.value.toUpperCase(),37!==e.keyCode&&39!==e.keyCode&&8!==e.keyCode)&&(this.value&&2===this.value.length&&s<5))return void t.dom().find("span.mac-input input[data-index="+(s+1)+"]").focus()}},{selector:"span.mac-input input",event:"keydown",callback:function(e,t){var i=o(this),s=t.settings,a=parseInt(i.attr("data-index"),10),n="-"===s.connector?189:186;if(9!==e.keyCode&&17!==e.keyCode)if(48<=e.keyCode&&e.keyCode<=57||96<=e.keyCode&&e.keyCode<=105||65<=e.keyCode&&e.keyCode<=70||8==e.keyCode||e.keyCode===n||39===e.keyCode||37===e.keyCode){if(e.keyCode===n||39===e.keyCode)return a<5&&t.dom().find("span.mac-input input[data-index="+(a+1)+"]").focus().select(),void e.preventDefault();var r;if(37!==e.keyCode){if(8===e.keyCode)return""===i.val()&&0<a?((r=t.dom().find("span.mac-input input[data-index="+(a-1)+"]")).val(r.val().slice(0,-1)),r.focus(),void e.preventDefault()):void 0}else 0<a&&((r=t.dom().find("span.mac-input input[data-index="+(a-1)+"]")).focus(),e.preventDefault())}else e.preventDefault()}},{selector:"span.mac-input input",event:"blur",callback:function(e,t){this.value=this.value.toUpperCase()}}],init:function(){},render:function(){var e="",t=this.dom(),i=this.settings.connector;s.superclass.render.call(this),t.addClass("mac-container"),e+='<span class="mac-input first"><input type="text" maxlength="2" data-index="0" /></span>',e+='<span class="mac-dot">'+i+"</span>",e+='<span class="mac-input"><input type="text" maxlength="2" data-index="1" /></span>',e+='<span class="mac-dot">'+i+"</span>",e+='<span class="mac-input"><input type="text" maxlength="2" data-index="2" /></span>',e+='<span class="mac-dot">'+i+"</span>",e+='<span class="mac-input last"><input type="text" maxlength="2" data-index="3" /></span>',e+='<span class="mac-dot">'+i+"</span>",e+='<span class="mac-input last"><input type="text" maxlength="2" data-index="4" /></span>',e+='<span class="mac-dot">'+i+"</span>",e+='<span class="mac-input last"><input type="text" maxlength="2" data-index="5" /></span>',t.find(".text-wrap-inner").html(e)},getValue:function(){var e=s.superclass.getValue.call(this);return""===e.join("")?"":e.join(this.settings.connector)},setValue:function(e){if(null==e)e="";else if("string"!==o.type(e))return;var t=this.dom().find("span.mac-input input"),i=e.split(this.settings.connector);t.each(function(e,t){o(t).val(i[e])})},setMaxLength:function(){return!1}})}(jQuery),$.su.Widget.register("textarea",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},datePicker:{attribute:"date-picker",defaultValue:""},tipText:{attribute:"tip-text",defaultValue:""},textareaCls:{attribute:"textarea-cls",defaultValue:""}},listeners:[{selector:".text-wrap textarea",event:"keyup",callback:function(e,t){var i=$(this).val();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}},{selector:".text-wrap textarea",event:"blur",callback:function(e,t){var i=$(this).val();t.dom().triggerHandler("ev_view_change",[{"type":"valid","value":i}]),t.dom().triggerHandler("ev_textbox_blur")}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=t.readOnly?'readonly="readonly"':"",s=!1===t.labelField?"label-empty":"";e.addClass(t.cls+"text-container "+s+" "+(t.readOnly?"readOnly":""));var a="";null!==t.labelField&&(a+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',a+='<div class="widget-fieldlabel-inner">',a+='<label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(a+='<span class="widget-separator">'+t.separator+"</span>"),a+="</div>",a+="</div>"),a+='<div class="widget-wrap-outer text-wrap-outer">',a+='<div class="widget-wrap text-wrap">',a+='<span class="text-wrap-before"></span>',a+='<span class="text-wrap-inner"><textarea type="text" class="'+t.textareaCls+'" '+i+"></textarea></span>",a+='<span class="text-wrap-after"></span>',t.hint&&(a+='<span class="hint text-hint">',a+='<input class="text-hint" value="'+t.hint+'" tabindex="-1" contenteditable="false" readonly="readonly"/>',a+="</span>"),""!=t.datePicker&&(a+='<div widget="datepicker" id="'+this.domId+'_date_picker" class="datepicker-widget"></div>'),a+="</div>",a+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',a+="</div>",null!=t.tips&&t.tips!=undefined&&(a+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',a+='<div class="content tips-content">'+t.tips+"</div>",a+="</div>"),a+="</div>",t.tipText&&(a+='<div widget="toolTip"></div>'),e.empty().append(a),""!=t.datePicker&&(e.addClass("textbox-datepicker"),e.find("div[widget=datepicker]").datepicker({textbox:this})[0].render())},setMaxLength:function(e){var t=this.dom();e=parseInt(e),"number"===$.type(e)&&t.find("textarea").attr("maxlength",e)},setReadonly:function(e){var t=this.dom(),i=t.find(".text-wrap-inner textarea");e?(i.prop("readonly",!0),t.addClass("readonly")):(i.prop("readonly",!1),t.removeClass("readonly"))},focus:function(){this.dom().find("textarea").focus()},setValue:function(e){this.getValue()!==e&&this.dom().find("textarea").val(e)},getValue:function(){return this.dom().find("textarea").val()}}),$.su.Widget.register("displaylabel",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},tipText:{attribute:"tip-text",defaultValue:""},renderer:{attribute:"renderer",defaultValue:function(e){return null==e?"":e}}},init:function(){},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?"label-empty":"";e.addClass(t.cls+"displaylabel-container "+i);var s="";null!==t.labelField&&(s+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',s+='<div class="widget-fieldlabel-inner">',s+='<label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(s+='<span class="widget-separator">'+t.separator+"</span>"),s+="</div>",s+="</div>"),s+='<div class="widget-wrap-outer text-wrap-outer">',s+='<div class="widget-wrap text-wrap">',s+='<span class="text-wrap-before"></span>',s+='<span class="text-wrap-display"></span>',s+='<span class="text-wrap-after"></span>',s+="</div>",s+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',s+="</div>",null!=t.tips&&t.tips!=undefined&&(s+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',s+='<div class="content tips-content">'+t.tips+"</div>",s+="</div>"),s+="</div>",t.tipText&&(s+='<div widget="toolTip"></div>'),e.append(s)},setValue:function(e){var t=this.dom();e=this.settings.renderer(e),t.find("span.text-wrap-display").text(e)},getValue:function(){return this.dom().find("span.text-wrap-display").text()}}),$.su.Widget.register("combobox",{settings:{name:{attribute:"name",defaultValue:""},labelField:{attribute:"label-field",defaultValue:""},multiSelect:{attribute:"multi-select",defaultValue:"single"},displayField:{attribute:"display-field",defaultValue:"name"},valueField:{attribute:"value-field",defaultValue:"value"},tipText:{attribute:"tip-text",defaultValue:""},editable:{attribute:"editable",defaultValue:!1},readOnly:{attribute:"read-only",defaultValue:!1},noneSelectedRemind:{attribute:"none-selected-remind",defaultValue:!0},noneSelectedText:{attribute:"none-selected-text",defaultValue:$.su.CHAR.COMMON.PLEASE_SELECT},spanText:{attribute:"span-text",defaultValue:!1},optionWidth:{attribute:"option-width",defaultValue:"auto"}},listeners:[{selector:"a.combobox-switch",event:"click",callback:function(e,t){t.dom().find("input.combobox-text").focus()}},{selector:"div.combobox-wrap",event:"click",callback:function(e,t){e.stopPropagation(),$.su.isMobile()||t._handleToggle()}},{selector:"div.combobox-wrap",event:"mousedown",callback:function(e,t){e.stopPropagation()}},{selector:"div.combobox-wrap",event:"mouseenter",callback:function(e,t){t.dom().addClass("hover")}},{selector:"div.combobox-wrap",event:"mouseleave",callback:function(e,t){t.dom().removeClass("hover")}},{selector:"input.combobox-text",event:"click",callback:function(e){e.preventDefault()}},{selector:"span.combobox-text",event:"click",callback:function(e){e.preventDefault()}},{selector:"input.combobox-text",event:"focus",callback:function(e,t){var i=t.getContainer();i.hasClass("disabled")||i.hasClass("none-items")||(t.setFocus(),i.addClass("focus"))}},{selector:"input.combobox-text",event:"keyup",callback:function(e,t){var i=t.getContainer(),s=i.find("input.combobox-text").val(),a=i.find("input.combobox-checkbox");i.find("li").removeClass("selected"),a.prop("checked",!1),a.each(function(e,t){if($(t).val()==s)return $(t).prop("checked",!0),$(t).closest("li.combobox-list").addClass("selected"),!1})}},{selector:"input.combobox-text",event:"keyup",callback:function(e,t){if(t.settings.editable){var i=t.dom().find("input.combobox-text").val();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}}},{selector:"input.combobox-text",event:"blur",callback:function(e,t){t.dom().find("input.combobox-text").val(),t.dom().removeClass("focus")}}],init:function(){this._defaultValue=null,this._dataMap={},this._displayMap={},this._value=[]},render:function(){var e=this.dom(),t=this.settings,i=!0===t.editable&&"single"===t.multiSelect?"":'readonly="true"',s=!1===t.labelField?" label-empty":"",a=t.readOnly?" readonly":"",n=t.tips?" tips":"",r=""===t.shortTips?"":" short-tips",o=t.spanText?" span-text-combobox":"";e.addClass(t.cls+"combobox-container "+t.multiSelect+s+a+n+r+o);var d="";null!==t.labelField&&(d+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',d+='<div class="widget-fieldlabel-inner">',d+='<label class="widget-fieldlabel combobox-fieldlabel">'+("false"===t.labelField?"":t.labelField)+"</label>",t.labelField&&(d+='<span class="widget-separator">'+t.separator+"</span>"),d+="</div>",d+="</div>"),d+='<div class="widget-wrap-outer combobox-wrap-outer">',d+='<div class="widget-wrap combobox-wrap">',d+='<span class="text-wrap-before"></span>',d+='<span class="combobox-wrap-inner">',t.spanText?d+='<span class="combobox-text '+t.inputCls+'">'+(t.noneSelectedRemind?t.noneSelectedText:"")+"</span>":d+='<input class="combobox-text '+t.inputCls+'" type="text" tabindex="-1" '+i+' value="'+(t.noneSelectedRemind?t.noneSelectedText:"")+'" />',d+="</span>",d+='<a class="combobox-switch" href="javascript:void(0);" tabindex="'+t.tabindex+'">',d+='<span class="icon"></span>',d+="</a>",0===$("#global-combobox-options").children().length&&$("#global-combobox-options").append('<div class="combobox-list-wrap"><div class="position-top-left"></div><div class="position-top-center"></div><div class="position-center-left"><div class="position-center-right"><div class="combobox-list-content-wrap"><ul class="combobox-list"></ul></div></div></div><div class="position-bottom-left"></div><div class="position-bottom-center"></div></div>'),d+='<div class="hidden combobox-lists"></div>',d+='<span class="text-wrap-after"></span>',d+="</div>",""!=t.shortTips&&null!=t.shortTips&&t.shortTips!=undefined&&(d+='<div class="widget-short-tips combobox-short-tips">',d+='<div class="content short-tips-content">'+t.shortTips+"</div>",d+="</div>"),d+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',d+="</div>",""!=t.tips&&null!=t.tips&&t.tips!=undefined&&(d+='<div class="widget-tips combobox-tips '+t.tipsCls+'">',d+='<div class="content tips-content">'+t.tips+"</div>",d+="</div>"),d+="</div>",t.tipText&&(d+='<div widget="toolTip"></div>'),e.append(d),t.items&&0<t.items.length&&this.loadItems(t.items);var l=$("#global-combobox-options .combobox-list-content-wrap");0===l.find(".ps__rail-y").length&&$.su.scrollbar({ele:l[0]})},loadItems:function(e){var t,i=this.dom(),s=this.settings,a=this.getContainer();$.isArray(e)||(e=[]);for(var n="",r=0,o=(s.items=e).length;r<o;r++)e[r]&&(n+=this.initItemHtml(r,e[r]),e[r].selected&&(t=e[r][s.valueField],t=this.convertValue(t),this._defaultValue=t));i.find("div.combobox-lists").html(n),this.setValue(t),0==e.length?a.addClass("none-items"):a.removeClass("none-items"),i.triggerHandler("ev_view_update")},initItemHtml:function(e,t){var i=this.settings,s=(this.dom(),i.multiSelect),a=this.domId+"-"+$.su.randomId("option"),n=t[i.displayField],r=t[i.valueField],o=!!t["disabled"],d=!!t.selected,l=t.cls||"";this._dataMap[e]=r,this._displayMap[r]=n;var c="";return c+='<li class="combobox-list '+l+" "+(o?"disabled":"")+" "+(d?"selected":"")+'">',c+='<label for="'+a+'" type="'+s+'" class="combobox-label '+s+'">',c+='<input id="'+a+'" name="'+i.name+'" display="'+n+'" class="combobox-checkbox" type="checkbox" data-index="'+e+'" '+(d?' checked="checked"':"")+" "+(o?'disabled="disabled"':"")+" />",c+='<span class="icon"></span>',c+='<span class="text">'+n+"</span>",c+="</label>",c+="</li>"},getLiIndex:function(e){for(var t in this._dataMap)if(this._dataMap.hasOwnProperty(t)&&e===this._dataMap[t])return t;return!1},setValue:function(e){var t,i,s=$("#global-combobox-options"),a=this.settings;if(null===e){if(this._defaultValue!==undefined&&null!==this._defaultValue)return void this.dom().triggerHandler("ev_view_change",[{"type":"record","value":this._defaultValue}]);e=this._defaultValue}if(e=this.convertValue(e),this._value=$.su.clone(e),"multiple"===a.multiSelect){t=[];for(var n=0;n<e.length;n++)i=this._displayMap[e[n]]||e[n],t.push(i);t=t.join(",")}else"single"===a.multiSelect&&(t=this._displayMap[e]||a.noneSelectedText);this.setText(t),s.attr("data-shown")===this.domId&&this.setOptionsSelected()},setOptionsSelected:function(){this.dom();var n=this,e=this.settings,t=$("#global-combobox-options").find("input.combobox-checkbox"),r=$.isArray(this._value)?this._value:[this._value];if("multiple"===e.multiSelect){var o=function(){for(var e={},t=0;t<r.length;t++)e[r[t]]=!0;return e}();t.each(function(e,t){var i=$(t),s=i.attr("data-index"),a=n._dataMap[s];t.checked=a in o?(i.closest("li.combobox-list").addClass("selected"),!0):(i.closest("li.combobox-list").removeClass("selected"),!1)})}else"single"===e.multiSelect&&(r=r[0],t.each(function(e,t){var i=$(t),s=i.attr("data-index"),a=n._dataMap[s];t.checked=a===r?(i.closest("li.combobox-list").addClass("selected"),!0):(i.closest("li.combobox-list").removeClass("selected"),!1)}))},convertValue:function(e){var t=this.settings;return"array"!==$.type(e)&&"multiple"===t.multiSelect&&(e=null==e?[]:[e]),e},setText:function(e){var t=this.getContainer();this.settings.spanText?t.find("span.combobox-text").text(e):t.find("input.combobox-text").val(e)},getText:function(){var e,t=this.getContainer();return this.settings.spanText?(e=t.find("span.combobox-text")).text()===undefined?"":e.text():(e=t.find("input.combobox-text")).val()===undefined?"":e.val()},setReadOnly:function(e){var t=this.getContainer();e?t.addClass("readonly"):t.removeClass("readonly")},enable:function(){var e=this.getContainer();e.removeClass("disabled"),e.find("input.combobox-text").removeAttr("disabled"),e.find("input.combobox-checkbox").prop("disabled",!1),e.triggerHandler("ev_view_enable")},disable:function(){var e=this.getContainer();e.addClass("disabled"),e.find("input.combobox-text").attr("disabled",!0),e.find("input.combobox-checkbox").prop("disabled",!0),e.triggerHandler("ev_view_disable")},enableItems:function(e){this.toggleItems(e,!0)},disableItems:function(e){this.toggleItems(e,!1)},hideItems:function(e){if(e===undefined)return this.disable();for(var t,i,s,a=this.dom(),n=$("#global-combobox-options"),r=a.find("div.combobox-lists"),o=0,d=(e=$.isArray(e)?e:[e]).length;o<d;o++)!1!==(t=this.getLiIndex(e[o]))&&((i=(s=r.find("input.combobox-checkbox[data-index="+t+"]")).closest("li")).addClass("hidden"),i.addClass("disabled"),s.attr("disabled","disabled"));if(n.attr("data-shown")===this.domId){var l=r.eq(0).html();n.find("ul.combobox-list").html(l),this.setOptionsSelected()}},showItems:function(e){if(e===undefined)return this.enable();for(var t,i,s,a=this.dom(),n=$("#global-combobox-options"),r=a.find("div.combobox-lists"),o=0,d=(e=$.isArray(e)?e:[e]).length;o<d;o++)!1!==(t=this.getLiIndex(e[o]))&&((i=(s=r.find("input.combobox-checkbox[data-index="+t+"]")).closest("li")).removeClass("hidden"),i.removeClass("disabled"),s.removeAttr("disabled"));if(n.attr("data-shown")===this.domId){var l=r.eq(0).html();n.find("ul.combobox-list").html(l),this.setOptionsSelected()}},toggleItems:function(e,t){if(e===undefined)return this.disable();for(var i,s,a,n=this.dom(),r=$("#global-combobox-options"),o=n.find("div.combobox-lists"),d=0,l=(e=$.isArray(e)?e:[e]).length;d<l;d++)!1!==(i=this.getLiIndex(e[d]))&&(s=(a=o.find("input.combobox-checkbox[data-index="+i+"]")).closest("li"),t?(s.removeClass("disabled"),a.removeAttr("disabled")):(s.addClass("disabled"),a.attr("disabled","disabled")));if(r.attr("data-shown")===this.domId){var c=o.eq(0).html();r.find("ul.combobox-list").html(c),this.setOptionsSelected()}},getValue:function(){var e=this.dom(),t=this.settings,i=(e.find("input.combobox-checkbox"),$.isArray(this._value)?$.su.clone(this._value):[this._value]);return"single"===t.multiSelect&&(i=0<i.length?i[0]:t.noneSelectedText,1==t.editable&&(i=e.find("input.combobox-text").val())),i},_handleToggle:function(){var a=this,e=a.dom(),t=e.find("a.combobox-switch"),i=(e.find(".widget-wrap.combobox-wrap"),t.next("div.combobox-list-wrap"),a.getContainer()),n=$("#global-combobox-options"),s=n.attr("data-shown")===a.domId?"shown":"hidden";if(i.hasClass("disabled")||i.hasClass("none-items")||i.hasClass("readonly"))return!1;a.setFocus(),i.addClass("focus"),i.removeClass("error"),"hidden"===s?("single"==a.settings.multiSelect?n.addClass("single"):n.removeClass("single"),"single"===a.settings.multiSelect?e.off("focusout","div.combobox-wrap-outer").on("focusout","div.combobox-wrap-outer",function(e){var t=n.offset(),i=n.find(".combobox-list-wrap").width(),s=n.find(".combobox-list-wrap").height();(a._xx<t.left||a._xx>t.left+i||a._yy<t.top||a._yy>t.top+s)&&a.hideGlobalOptions()}):$("html").on("click","div:not(.combobox-list-wrap)",a.hideGlobalOptions),a._bindGlobalEvent(),a.showGlobalOptions()):a.hideGlobalOptions()},_bindGlobalEvent:function(){var l=this;$("#global-combobox-options").off("click","label.combobox-label").on("click","label.combobox-label",function(e){e.stopPropagation(),e.preventDefault();var t=$(this),i=t.closest("li.combobox-list"),s=l.getContainer(),a=t.find("input.combobox-checkbox"),n=l._dataMap[a.attr("data-index")],r=l.getValue(),o=[];if(!i.hasClass("disabled")&&!s.hasClass("readonly")){switch(l.settings.multiSelect){case"multiple":if(a.prop("checked")){if(0<r.length)for(var d=r.length-1;0<=d;d--)if(r[d]==n){r.splice(d,1);break}}else r.push(n);o=r;break;case"single":o=n,l.hideGlobalOptions(),s.addClass("selected"),s.removeClass("focus")}l.dom().triggerHandler("ev_view_change",[{"type":"value","value":o},l.getValue()])}})},showGlobalOptions:function(){var t=this,e=t.dom(),i=e.find(".widget-wrap.combobox-wrap"),s=$("#global-combobox-options"),a=i.offset(),n=$("body").offset(),r=e.find("div.combobox-lists").eq(0).html(),o=s.find("div.combobox-list-wrap");s.find("ul.combobox-list").html(r);var d="auto"==this.settings.optionWidth?i.outerWidth()+"px":this.settings.optionWidth;a.top+i.height()+o.outerHeight()+10>$(window).height()&&0<a.top-o.height()?s.css({"position":"absolute","width":d,"left":a.left-n.left+"px","top":"auto","bottom":$(window).height()-a.top,"z-index":$.su.getMaxZIndex()+1}).addClass("down-to-up"):s.css({"position":"absolute","width":d,"left":a.left-n.left+"px","top":a.top+i.height()+2+"px","bottom":"auto","z-index":$.su.getMaxZIndex()+1}).removeClass("down-to-up"),$.su.isIe?o.show():o.slideDown(150),s.attr("data-shown",t.domId),$("body").on("mousemove",t.getComboboxXy),t.toggleFlag="shown",t.setOptionsSelected();var l=s.find("li.selected"),c=$(s.find("li").get(0));if(0<l.length){var u=l.offset().top-c.offset().top;s.find("div.combobox-list-content-wrap").scrollTop(u)}else s.find("div.combobox-list-content-wrap").scrollTop(0);var h=s.find(".combobox-list-content-wrap").data("ps");h&&h.update(),$("div").not(function(){return $(s).find(this).length||$(s).is(this)||$(this).closest(".combobox-wrap-outer",e).length}).off(".combobox").one("scroll.combobox, mousedown.combobox",function(e){t.hideGlobalOptions(),$("div").off(".combobox")})},hideGlobalOptions:function(e){var t=this,i=$("#global-combobox-options");function s(){t.dom().triggerHandler("ev_view_change",[{"type":"valid","value":t._value}])}t.toggleFlag="hidden",t.dom().removeClass("focus"),i.attr("data-shown")===t.domId&&(!1===e||$.su.isIe?(i.find("div.combobox-list-wrap").hide(),s()):i.find("div.combobox-list-wrap").slideUp(150,s),i.attr("data-shown","_hidden_"),i.off("click","label.combobox-label"),$("body").off("mousemove",t.getComboboxXy))},getComboboxXy:function(e){e=e||window.event,this._xx=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this._yy=e.clientY+document.body.scrollTop+document.documentElement.scrollTop},calculatePosition:function(){var e=this.dom(),t=$("#global-combobox-options"),i=e.find(".combobox-wrap"),s=i.offset(),a=$("body").offset(),n=t.find("div.combobox-list-wrap"),r="auto"==this.settings.optionWidth?i.outerWidth()+"px":this.settings.optionWidth;s.top+i.height()+n.outerHeight()+10>$(window).height()?t.css({"position":"absolute","width":r,"left":s.left-a.left+"px","top":s.top-n.height()-2+"px","z-index":$.su.getMaxZIndex()+1}):t.css({"position":"absolute","width":r,"left":s.left-a.left+"px","top":s.top+i.height()+2+"px","z-index":$.su.getMaxZIndex()+1})}}),$.su.Widget.register("lrselect",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},labelField:{attribute:"label-field",defaultValue:""},displayField:{attribute:"display-field",defaultValue:"name"},valueField:{attribute:"value-field",defaultValue:"value"},tipText:{attribute:"tip-text",defaultValue:""}},listeners:[{selector:"a.lrselect-switch",event:"click",callback:function(e,t){var i=t.getContainer(),s=$(this),a=t.settings;if(i.hasClass("disabled")||i.hasClass("none-items")||s.hasClass("disabled"))return!1;var n=t._curIndex;s.hasClass("left-switch")?--n:s.hasClass("right-switch")&&++n,n<0&&(n=0),n>=t._items.length&&(n=t._items.length-1),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t._items[n][a.valueField]}])}}],init:function(){this._value=null,this._curIndex=-1,this._valueMap={},this._items=[]},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?" label-empty":"",s=t.readOnly?" readonly":"";e.addClass(t.cls+"lrselect-container "+ +i+s);var a="";null!==t.labelField&&(a+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',a+='<div class="widget-fieldlabel-inner">',a+='<label class="widget-fieldlabel combobox-fieldlabel">'+("false"===t.labelField?"":t.labelField)+"</label>",t.labelField&&(a+='<span class="widget-separator">'+t.separator+"</span>"),a+="</div>",a+="</div>"),a+='<div class="widget-wrap-outer lrselect-wrap-outer">',a+='<div class="widget-wrap lrselect-wrap">',a+='<span class="text-wrap-before"></span>',a+='<a class="lrselect-switch left-switch" href="javascript:void(0);">',a+='<span class="icon"></span>',a+="</a>",a+="<span class='lrselect-text'></span>",a+='<a class="lrselect-switch right-switch" href="javascript:void(0);">',a+='<span class="icon"></span>',a+="</a>",a+="</div>",e.append(a),t.items&&0<t.items.length&&this.loadItems(t.items)},loadItems:function(e){var t=this.settings,i=this.getContainer();$.isArray(e)||(e=[]),this._items=e,this._curIndex=-1;var s=e.length;0==s?i.addClass("none-items"):i.removeClass("none-items");for(var a,n,r=0,o={};r<s;r++)o[(a=e[r])[t.valueField]]={dispaly:a[t.displayField],index:r},!0===a.selected&&(n=a[t.valueField]);this._valueMap=o,n!==undefined&&this.setValue(n)},setValue:function(e){var t=this.dom(),i=this._items.length;if(0<i){var s=this._valueMap[e];if(s){this._curIndex=s.index,this.value=e,t.find("span.lrselect-text").text(s.dispaly);var a=t.find(".left-switch"),n=t.find(".right-switch");0===this._curIndex?a.addClass("disabled"):a.removeClass("disabled"),this._curIndex===i-1?n.addClass("disabled"):n.removeClass("disabled")}}},getValue:function(){return this._value},disable:function(){this.getContainer().addClass("disabled")},enable:function(){this.getContainer().removeClass("disabled")}}),$.su.Widget.register("radio",{settings:{name:{attribute:"name",defaultValue:""},columns:{attribute:"columns",defaultValue:1},tipText:{attribute:"tip-text",defaultValue:""},toggleContent:{attribute:"toggle-content",defaultValue:!1},toggleText:{attribute:"toggle-text",defaultValue:!1},checkedText:{attribute:"checked-text",defaultValue:""},unCheckedText:{attribute:"unchecked-text",defaultValue:""}},listeners:[{selector:".radio-label",event:"click",callback:function(e,t){if(e.preventDefault(),e.stopPropagation(),!$(this).hasClass("disabled")){var i=$(this).find("input").attr("data-index");t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.dataMap[i]}]),t.setStatus("checked",!0)}}}],init:function(){this._defaultValue=null,this.dataMap={},this._status.checked=!1},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?"label-empty":"";e.addClass(t.cls+"radio-group-container "+i);var s="";null!==t.labelField&&"false"!==t.labelField&&(s+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',s+='<div class="widget-fieldlabel-inner">',s+='<label class="widget-fieldlabel radio-group-fieldlabel">'+t.labelField+"</label>",t.labelField&&(s+='<span class="widget-separator">'+t.separator+"</span>"),s+="</div>",s+="</div>"),s+='<div class="widget-wrap-outer radio-group-wrap-outer">',s+='<div class="radio-group-wrap">',s+="</div>",s+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',s+="</div>",null!=t.tips&&t.tips!=undefined&&(s+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',s+='<div class="widget-tips-wrap">',s+='<div class="content tips-content">'+t.tips+"</div>",s+="</div>",s+="</div>"),s+="</div>",t.tipText&&(s+='<div widget="toolTip"></div>'),e.append(s),t.items&&0<t.items.length&&this.loadItems(t.items)},loadItems:function(e){var t,i=this.dom(),r=this.settings,o=r.toggleText,s=Math.ceil(e.length/r.columns),a=0,n=!1,d=!1;if($.isArray(e)&&!(e.length<=0)){r.items=e,r.name=e[0].name;var l='<ul class="radio-group-list-wrap">',c=function(e,t,i,s,a,n){l+='<li class="radio-list">',l+='<div class="widget-wrap">',l+='<label class="radio-label '+a+" "+m+'" for="'+i+'">',l+='<input class="radio-radio" type="radio" data-text="'+s+'" name="'+e+'" data-index="'+t+'" id="'+i+'" '+g+" />",n?l+='<div class="radio-custom-label-wrap"></div>':(l+='<span class="icon"></span>',l+='<span class="text">'+u.boxlabel+"</span>",o&&(l+='<span class="extra-text checked">'+r.checkedText+"</span>",l+='<span class="extra-text unchecked">'+r.unCheckedText+"</span>")),l+="</label>",l+="</div>",l+='<div class="radio-content-wrap hidden"></div>',l+="</li>"};for(t=0;t<e.length;t++){var u=e[t],h=u.name||"",p=u.value==undefined?"":u.value,f=u.id||$.su.randomId("radio"),v=u.itemCls||"",g="",m="";this.dataMap[t]=p,n=!!u.content||n,d=!!u.customLabel||d,"checked"!==u.checked&&!0!==u.checked||(g='checked="checked"',m="checked",this._defaultValue=p),a<s?c(h,t,f,u.boxlabel,v,d):(l+="</ul>",l+='<ul class="radio-group-list-wrap">',c(h,t,f,u.boxlabel,v,d),a=0),a++}l+="</ul>";var b=this.getContainer();if(b.find("div.radio-group-wrap").empty().append($(l)),n||d)for(t=0;t<e.length;t++){if((u=e[t]).customLabel){var w=$(u.customLabel);b.find("li.radio-list").eq(t).find("div.radio-custom-label-wrap").show().append(w)}else b.find("li.radio-list").eq(t).find("div.radio-custom-label-wrap").hide();if(u.content){var y=$(u.content);b.find("li.radio-list").eq(t).find("div.radio-content-wrap").show().append(y)}else b.find("li.radio-list").eq(t).find("div.radio-content-wrap").hide()}i.triggerHandler("ev_view_update")}},getSelectedText:function(){var e=this.dom();return this.settings,e.find("input.radio-radio:checked").attr("data-text")},getValue:function(){var e;return this.dom().find("input[type=radio]").each(function(){$(this).prop("checked")&&(e=$(this).attr("data-index"))}),e!==undefined?this.dataMap[e]:e},setStyle:function(e){var t,i=this.dom(),s=this.settings,a=i.find("input.radio-radio").removeAttr("checked");for(var n in i.find("label.radio-label").removeClass("checked"),this.dataMap){var r;this.dataMap.hasOwnProperty(n)&&this.dataMap[n]===e?((t=a.filter("[data-index="+n+"]")).prop("checked",!0),t.closest("label.radio-label").addClass("checked"),s.toggleContent&&t.closest("li.radio-list").find(".radio-content-wrap").show(),s.toggleText&&((r=t.closest("li.radio-list")).find(".extra-text.checked").show(),r.find(".extra-text.unchecked").hide())):((t=a.filter("[data-index="+n+"]")).prop("checked",!1),s.toggleContent&&t.closest("li.radio-list").find(".radio-content-wrap").hide(),s.toggleText&&((r=t.closest("li.radio-list")).find(".extra-text.checked").hide(),r.find(".extra-text.unchecked").show()))}},setValue:function(e){if(e===undefined&&(e=""),null===e){if(this._defaultValue!==undefined&&null!==this._defaultValue)return void this.dom().triggerHandler("ev_view_change",[{"type":"record","value":this._defaultValue}]);e=""}this.setStyle(e)},disableItem:function(i){var e=this.dom(),s=this,t=e.find("input.radio-radio");"string"!==$.type(i)&&"number"!==$.type(i)||(i=[i]);var a=function(){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}();t.each(function(e,t){var i=$(t).attr("data-index");s.dataMap[i]in a&&($(t).closest("li.radio-list").addClass("disabled"),$(t).closest("label.radio-label").addClass("disabled"),t.disabled=!0)})},enableItem:function(i){var e=this.dom(),s=this,t=e.find("input.radio-radio");"string"!==$.type(i)&&"number"!==$.type(i)||(i=[i]);var a=function(){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}();t.each(function(e,t){var i=$(t).attr("data-index");s.dataMap[i]in a&&($(t).closest("li.radio-list").removeClass("disabled"),$(t).closest("label.radio-label").removeClass("disabled"),t.disabled=!1)})},showItemContent:function(i){var e=this.dom(),s=this,t=e.find("input.radio-radio");"string"!==$.type(i)&&"number"!==$.type(i)||(i=[i]);var a=function(){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}();t.each(function(e,t){var i=$(t).attr("data-index");s.dataMap[i]in a&&$(t).closest("li.radio-list").find(".radio-content-wrap").show()})},hideItemContent:function(i,s){var e=this.dom(),a=this,t=e.find("input.radio-radio");"string"!==$.type(i)&&"number"!==$.type(i)||(i=[i]);var n=function(){for(var e={},t=0;t<i.length;t++)e[i[t]]=!0;return e}();t.each(function(e,t){var i=$(t).attr("data-index");a.dataMap[i]in n&&(!0===s?$(t).closest("li.radio-list").hide():$(t).closest("li.radio-list").find(".radio-content-wrap").hide())})},disable:function(){var e=this.dom(),t=this.getContainer(),i=e.find("input.radio-radio");t.addClass("disabled"),i.each(function(e,t){var i=$(t);i.closest("li.radio-list").addClass("disabled"),i.closest("label.radio-label").addClass("disabled"),i.prop("disabled",!0)}),e.triggerHandler("ev_view_disable"),this.setStatus("disabled",!0)},enable:function(){var e=this.dom(),t=this.getContainer(),i=e.find("input.radio-radio");t.removeClass("disabled"),i.each(function(e,t){var i=$(t);i.closest("li.radio-list").removeClass("disabled"),i.closest("label.radio-label").removeClass("disabled"),i.prop("disabled",!1)}),e.triggerHandler("ev_view_enable"),this.setStatus("disabled",!1)},getBoxlabel:function(e){var t=this.dom();for(var i in this.dataMap)if(this.dataMap.hasOwnProperty(i)&&this.dataMap[i]===e)return t.find("input.radio-radio[data-index="+i+"]").siblings("span.text").html();return""},setBoxlabel:function(e,t){if("number"===$.type(e)||"string"===$.type(e)){var i=this.dom();for(var s in this.dataMap)if(this.dataMap.hasOwnProperty(s)&&this.dataMap[s]===e)return void i.find("input.radio-radio[data-index="+s+"]").attr("data-text",t).siblings("span.text").html(t)}}}),$.su.Widget.register("checkbox",{settings:{name:{attribute:"name",defaultValue:""},trueValue:{attribute:"true-value",defaultValue:!0},falseValue:{attribute:"false-value",defaultValue:!1},columns:{attribute:"columns",defaultValue:1},tipText:{attribute:"tip-text",defaultValue:""},boxLabel:{attribute:"box-label",defaultValue:""}},listeners:[{selector:".checkbox-label",event:"click",callback:function(e,t){e.preventDefault();var i=$(this),s=t.settings,a=(i.find("input[type=checkbox]").attr("name"),i.find("input[type=checkbox]").prop("checked"),t.getValue());i.hasClass("disabled")||(a=a===s.trueValue?s.falseValue:s.trueValue,t.dom().triggerHandler("ev_view_change",[{"type":"value","value":a}]),t.setStatus("checked",a===s.trueValue))}}],init:function(){this._status.disabled=!1,this._status.checked=!1},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?"label-empty":"",s=this.domId+"-checkbox-"+parseInt(1e3*Math.random()*1e3*1e3,10).toString();e.addClass(t.cls+"checkbox-container "+i);var a="";null!==t.labelField&&(a+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',a+='<div class="widget-fieldlabel-inner">',a+='<label class="widget-fieldlabel checkbox-group-label">'+t.labelField+"</label>",t.labelField&&(a+='<span class="widget-separator">'+t.separator+"</span>"),a+="</div>",a+="</div>"),a+='<div class="widget-wrap-outer checkbox-group-wrap-outer">',a+='<div class="checkbox-group-wrap">',a+="<ul>",a+='<li class="checkbox-list">',a+='<div class="widget-wrap">',a+='<label class="checkbox-label " for="'+s+'">',a+='<input class="checkbox-checkbox" type="checkbox" id="'+s+'" />',a+='<span class="icon"></span>',a+='<span class="text">'+t.boxLabel+"</span>",a+="</label>",a+="</div>",a+="</li>",a+="</ul>",a+="</div>",null!=t.tips&&t.tips!=undefined&&(a+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',a+='<div class="widget-tips-wrap">',a+='<div class="content tips-content">'+t.tips+"</div>",a+="</div>",a+="</div>"),a+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',a+="</div>",a+="</div>",t.tipText&&(a+='<div widget="toolTip"></div>',e.addClass("has-tool-tip")),e.append(a)},setValue:function(e){var t,i,s=this.dom(),a=this,n=this.settings,r=s.find("input[type=checkbox]");t=r.eq(0),(i=e)===n.trueValue||!0===i||1===i?(t.closest("label.checkbox-label").addClass("checked"),t.prop("checked",!0),a.setStatus("checked",!0)):i!==n.falseValue&&!1!==i&&0!==i||(t.closest("label.checkbox-label").removeClass("checked"),t.prop("checked",!1),a.setStatus("checked",!1))},getValue:function(){var e=this.dom(),t=this.settings;return e.find("input[type=checkbox]").eq(0).prop("checked")?t.trueValue:t.falseValue},disable:function(e){var t=this.dom(),i=t.find("input.checkbox-checkbox");this.getContainer().addClass("disabled"),i.each(function(e,t){var i=$(t);i.closest("li.checkbox-list").addClass("disabled"),i.closest("label.checkbox-label").addClass("disabled"),i.prev("input[type=hidden]").prop("disabled",!0),i.prop("disabled",!0)}),e||(t.triggerHandler("ev_view_disable"),this.setStatus("disabled",!0))},enable:function(){var e=this.dom(),t=e.find("input.checkbox-checkbox");this.getContainer().removeClass("disabled"),t.each(function(e,t){var i=$(t);i.closest("li.checkbox-list").removeClass("disabled"),i.closest("label.checkbox-label").removeClass("disabled"),i.prev("input[type=hidden]").prop("disabled",!1),i.prop("disabled",!1)}),e.triggerHandler("ev_view_enable"),this.setStatus("disabled",!1)}}),$.su.Widget.register("checkboxGroup",{settings:{trueValue:{attribute:"true-value",defaultValue:!0},falseValue:{attribute:"false-value",defaultValue:!1},columns:{attribute:"columns",defaultValue:1},tipText:{attribute:"tip-text",defaultValue:""}},listeners:[{selector:".checkbox-label",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var i=$(this),s=t.settings,a=i.find("input[type=checkbox]").attr("name"),n=(i.find("input[type=checkbox]").prop("checked"),t.getValue());i.hasClass("disabled")||("object"==$.type(n)&&n[a]!==undefined?n[a]=n[a]===s.trueValue?s.falseValue:s.trueValue:n=n===s.trueValue?s.falseValue:s.trueValue,t.dom().triggerHandler("ev_view_change",[{"type":"value","value":n}]))}}],init:function(){this._status.disabled=!1},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"checkbox-group-container");var i="";null!==t.labelField&&(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',i+='<div class="widget-fieldlabel-inner">',i+='<label class="widget-fieldlabel checkbox-group-label">'+t.labelField+"</label>",""!==t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div>",i+="</div>"),i+='<div class="widget-wrap-outer checkbox-group-wrap-outer">',i+='<div class="checkbox-group-wrap">',i+="</div>",null!=t.tips&&t.tips!=undefined&&(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',i+='<div class="widget-tips-wrap">',i+='<div class="content tips-content"></div>',i+="</div>",i+="</div>"),i+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',i+="</div>",i+="</div>",t.tipText&&(i+='<div widget="toolTip"></div>'),e.append(i),t.items&&0<t.items.length&&this.loadItems(t.items)},loadItems:function(e){var t=this.dom(),i=this.settings,s=Math.ceil(e.length/i.columns),a=0;if($.isArray(e)||"object"!=typeof e||(e=[e]),$.isArray(e)&&!(e.length<0)){i.items=e;for(var n='<ul class="checkbox-group-list-wrap">',r=function(e,t,i,s,a){n+='<li class="checkbox-list">',n+='<div class="widget-wrap">',n+='<label class="checkbox-label '+t+" "+f+'" for="'+s+'">',n+='<input class="hidden" type="hidden" name="'+e+'" data-checked="'+i+'" '+p+" />",n+='<input class="checkbox-checkbox" type="checkbox" name="'+e+'" value="'+i+'" data-checked="'+i+'" data-index="'+o+'" id="'+s+'" '+h+" />",n+='<span class="icon"></span>',n+='<span class="text">'+a+"</span>",n+="</label>",n+="</div>",n+="</li>"},o=0;o<e.length;o++){var d=e[o].name||"",l=e[o].value||!1,c=e[o].itemCls||"";0==o&&(c+=" first"),o==e.length-1&&(c+=" lst");var u=e[o].id||"checkbox-"+parseInt(1e3*Math.random()*1e3*1e3,10).toString(),h="",p="",f="";"checked"!==e[o].checked&&!0!==e[o].checked||(h='checked="checked"',p='disabled="disabled"',f="checked"),a<s?r(d,c,l,u,e[o].boxlabel||""):(n+="</ul>",n+='<ul class="checkbox-group-list-wrap">',r(d,c,l,u,e[o].boxlabel||""),a=0),a++}n+="</ul>",t.find("div.checkbox-group-wrap").empty().append($(n))}},setValue:function(e){var t=this.dom(),i=this.settings,s=t.find("input[type=checkbox]"),a=function(e,t){t===i.trueValue?(e.closest("label.checkbox-label").addClass("checked"),e.prop("checked",!0)):t===i.falseValue&&(e.closest("label.checkbox-label").removeClass("checked"),e.prop("checked",!1))};if(""!==e){if(1===s.length)a(s.eq(0),e);else if(1<s.length)for(var n in e)if(e.hasOwnProperty(n)){var r=t.find('input[type=checkbox][name="'+n+'"]');0!==r.length&&a(r.eq(0),e[n])}}else s.each(function(e,t){a($(t),i.falseValue)})},getValue:function(){var e=this.dom(),s=this.settings,a={},t=e.find("input[type=checkbox]");return 1===t.length?t.eq(0).prop("checked")?s.trueValue:s.falseValue:1<t.length&&(t.each(function(e,t){var i=$(t).attr("name");a[i]=$(t).prop("checked")?s.trueValue:s.falseValue}),a)},disable:function(){var e=this.dom(),t=e.find("input.checkbox-checkbox");this.getContainer().addClass("disabled"),t.each(function(e,t){var i=$(t);i.closest("li.checkbox-list").addClass("disabled"),i.closest("label.checkbox-label").addClass("disabled"),i.prev("input[type=hidden]").prop("disabled",!0),i.prop("disabled",!0)}),e.triggerHandler("ev_view_disable"),this.setStatus("disabled",!0)},enable:function(){var e=this.dom(),t=e.find("input.checkbox-checkbox");this.getContainer().removeClass("disabled"),t.each(function(e,t){var i=$(t);i.closest("li.checkbox-list").removeClass("disabled"),i.closest("label.checkbox-label").removeClass("disabled"),i.prev("input[type=hidden]").prop("disabled",!1),i.prop("disabled",!1)}),e.triggerHandler("ev_view_enable"),this.setStatus("disabled",!1)},disableItem:function(s){this.dom().find("input.checkbox-checkbox").each(function(e,t){var i=$(t);e===s&&(i.closest("li.checkbox-list").addClass("disabled"),i.closest("label.checkbox-label").addClass("disabled"),i.prev("input[type=hidden]").prop("disabled",!0),i.prop("disabled",!0))})},enableItem:function(s){this.dom().find("input.checkbox-checkbox").each(function(e,t){var i=$(t);e===s&&(i.closest("li.checkbox-list").removeClass("disabled"),i.closest("label.checkbox-label").removeClass("disabled"),i.prev("input[type=hidden]").prop("disabled",!1),i.prop("disabled",!1))})}}),$.su.Widget.register("button",{settings:{text:{attribute:"text",defaultValue:""},iconCls:{attribute:"icon-cls",defaultValue:""},enableToggle:{attribute:"enable-toggle",defaultValue:!1},toggleHander:{attribute:"toggle-hander",defaultValue:null},pressedCls:{attribute:"pressed-cls",defaultValue:"pressed"},pressed:{attribute:"pressed",defaultValue:!1},btnCls:{attribute:"btn-cls",defaultValue:"button-button"},handler:{attribute:"handler",defaultValue:null},tipText:{attribute:"tip-text",defaultValue:""}},listeners:[{selector:"",event:"click",condition:function(e){var t=e.settings.enableToggle;return"true"===t||!0===t},callback:function(e,t){e.preventDefault();var i=$(this),s=t.settings,a=s.pressed;a="false"===a.toString()?(i.addClass(s.pressedCls),!0):(i.removeClass(s.pressedCls),!1),i.attr("pressed",a),s.pressed=a,"function"===$.type(s.toggleHander)&&s.toggleHander.call(this,a)}},{selector:"a.button-button",event:"mousedown touchstart",callback:function(e,t){if(e.stopPropagation(),!t.getContainer().hasClass("disabled")&&!t.getContainer().hasClass("clicked")){t.getContainer().addClass("clicked");var i=$(this),s=i.find(".button-moire"),a=i.outerWidth(),n=i.outerHeight(),r=Math.sqrt(a*a+n*n);s.css({width:2*r,height:2*r,left:e.offsetX-r,top:e.offsetY-r})}}},{selector:"a.button-button",event:"mouseup mouseleave touchend touchcancel",callback:function(e,t){e.stopPropagation(),t.getContainer().hasClass("clicked")&&setTimeout(function(){var e=t.getContainer();e&&e.removeClass("clicked")},200)}},{selector:"a.button-button",event:"click",callback:function(e,t){e.preventDefault(),t.getContainer().hasClass("disabled")?e.stopPropagation():t.dom().triggerHandler("ev_button_click")}}],init:function(e){},render:function(){var e=this.dom(),t=this.settings,i=t.btnCls||"",s=t.text||"",a=!1===t.labelField?"label-empty":"";e.addClass(t.cls+"button-container "+a);var n="";if(null!==t.labelField&&(n+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',n+='<div class="widget-fieldlabel-inner">',n+='<label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(n+='<span class="widget-separator">'+t.separator+"</span>"),n+="</div>",n+="</div>"),n+='<div class="widget-wrap-outer button-wrap-outer">',n+='<div class="widget-wrap button-wrap">',n+='<a href="javascript:void(0);" class="'+i+'" type="button" title="'+s+'">',n+='<span class="button-button-before"></span>',""!==t.iconCls&&(n+='<span class="icon button-icon '+t.iconCls+'"></span>'),n+='<span class="text button-text">'+s+"</span>",n+='<span class="icon button-loading"></span>',n+='<span class="button-moire"></span>',n+="</a>",n+="</div>",null!=t.tips&&t.tips!=undefined&&(n+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',n+='<div class="content tips-content"></div>',n+="</div>"),n+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',n+="</div>",n+="</div>",t.tipText&&(n+='<div widget="toolTip"></div>'),e.empty().append(n),!0===t.enableToggle){var r=t.pressed;e.attr("pressed",r),"true"===r.toString()&&e.addClass(t.pressedCls)}this.setTips(t.tips)},setText:function(e){var t=this.settings,i=this.getContainer(),s=i.find("a.button-button"),a=i.find("a.button-button span.button-text");e&&(t.text=e,a.html(e),s.attr("title",e))},getText:function(){return this.settings.text},setValue:function(e){},loading:function(e){var t=this.dom();!1===e?(t.removeClass("loading"),this.enable()):(t.addClass("loading"),this.disable())},setIconCls:function(e){this.dom().find(".button-icon").removeClass().addClass("icon button-icon "+e)},status:function(e){return e!==undefined&&(this.dom().removeClass(this.dom().data("status")),this.dom().data("status",e),this.dom().addClass(e)),this.dom().data("status")},textAnimate:function(e){var t=this,i=(this.dom(),this.getContainer().find("a.button-button span.button-text"));!1!==e?(clearInterval(this.underTextTimer),this.underTextTimer=setInterval(function(){if(t.dom().is(":visible")){var e=i.text();/\.\.\.$/.test(e)?e=e.replace(/\.\.\.$/,""):e+=".",e=e.replace(/(\.*$)/,'<span class="dots">$1</span>'),i.html(e)}else clearInterval(t.underTextTimer)},500)):clearInterval(this.underTextTimer)}}),$.su.Widget.register("file",{settings:{inputCls:{attribute:"input-cls",defaultValue:"l"},buttonCls:{attribute:"button-cls",defaultValue:"inline-block"},buttonText:{attribute:"button-text",defaultValue:$.su.CHAR.OPERATION.FILEBUTTONTEXT},blankText:{attribute:"blank-text",defaultValue:$.su.CHAR.OPERATION.FILEBLANKTEXT},extension:{attribute:"extension",defaultValue:"txt, ai, docx"},extensionErrorText:{attribute:"extension-error-text",defaultValue:$.su.CHAR.ERROR["00000074"]},tipText:{attribute:"tip-text",defaultValue:""},paramName:{attribute:"param-name",defaultValue:"file"},note:{attribute:"note",defaultValue:""}},listeners:[{selector:"div.file-button",event:"click",callback:function(e,t){var i=t.getContainer();e.preventDefault(),e.stopPropagation(),i.find("input.file-input").click()}},{selector:"label.file-text",event:"click",callback:function(e,t){var i=t.getContainer();e.preventDefault(),e.stopPropagation(),i.hasClass("disabled")||i.find("div.file-button").click()}},{selector:function(){return{parent:this.dom().find("input.file-input")}},event:"change",callback:function(e,t){var i=t.getContainer(),s=$(this).val(),a=s.toString().match(/.+(?=\\)/g);a=a&&a[0]&&a[0].length?s.substring(a[0].length+1):s,t.dom().triggerHandler("ev_file_change",[a]),i.find("label.file-text").html(a),i.find("label.file-text").attr("title",a)}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"text-container file-container");var i="";null!==t.labelField&&(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',i+='<div class="widget-fieldlabel-inner">',i+='<label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",""!==t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div>",i+="</div>"),i+='<div class="file-wrap-outer widget-wrap-outer">',i+='<div class="file-wrap widget-wrap">',i+='<div class="widget-wrap text-wrap">',i+='<span class="text-wrap-before"></span>',i+='<span class="text-wrap-inner">',i+='<label class="file-text text-text '+t.inputCls+'"></label>',i+="</span>",i+='<span class="text-wrap-after"></span>',i+="</div>",t.note&&(i+='<div class="note"><span>'+t.note+"</span></div>"),i+="</div>",i+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',i+="</div>",i+='<div class="button-container file-button-container '+t.buttonCls+'">',i+='<div widget="button" id="'+this.domId+'-btn" class="file-button" type="button" text="'+t.buttonText+'"></div>',i+="</div>",t.tips&&(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',i+='<div class="content tips-content">'+t.tips+"</div>",i+="</div>"),i+="</div>",t.tipText&&(i+='<div widget="toolTip"></div>'),e.append(i);var s=this.getContainer(),a='<form method="post" id="'+this.domId+'_form" class="hidden" name="form" enctype="multipart/form-data"><input type="file" name="'+t.paramName+'" class="file-input"></form>';s.find("div.file-wrap").append($(a).prop("single",!0)),s.find("div.file-wrap").append('<div class="file-text-hover"></div>');var n=e.find("div[widget=button]")[0];this.btn=new $.su.widgets.button({id:$(n)}),this.btn.render(),this.setTips(t.tips)},getFile:function(){return this.dom().find("input.file-input")[0]},getFileName:function(){var e=this.dom().find("input.file-input");return e.val()===undefined?"":e.val()},getFileSize:function(){var e=this.dom().find("input.file-input");return Math.round(e[0].files[0].size/1024*100)/100},startUpload:function(){this.dom().addClass("disabled"),this.btn.loading(!0)},endUpload:function(){this.dom().removeClass("disabled"),this.btn.loading(!1)},resetFile:function(){var e=this.dom(),t=e.find("input.file-input"),i=e.find("label.file-text");t.val(""),i.html("")},getFileValue:function(){return this.dom().find("input.file-input").val()}}),$.su.Widget.register("progressbar",{settings:{text:{attribute:"text",defaultValue:""},unit:{attribute:"unit",defaultValue:"%"},_timeout:{attribute:"timeout",defaultValue:"0"},duration:{attribute:"duration",defaultValue:1e3},value:{attribute:"value",defaultValue:0},url:{attribute:"url",defaultValue:null},animate:{attribute:"animate",defaultValue:!0},showPercentage:{attribute:"show-percentage",defaultValue:!0},underText:{attribute:"under-text",defaultValue:null},infinite:{attribute:"infinite",defaultValue:!1},circle:{attribute:"circle",defaultValue:!1},fn:{attribute:"fn",defaultValue:null},ptype:{attribute:"ptype",defaultValue:"horizontal"},tipText:{attribute:"tip-text",defaultValue:""},step:{attribute:"step",defaultValue:!1},animateText:{attribute:"animate-text",defaultValue:""}},init:function(){var e=this.settings;!1!==e.step&&(e.step=parseInt(e.step,10))},render:function(){var e=this.dom(),t=this.settings,i=t.ptype,s=t.value,a=t.width,n=t.height,r=!1===t.labelField?"label-empty":"",o=t.infinite?" infinite-progress":"",d=t.circle?" circle-progress":"";e.addClass(t.cls+"progressbar-container progressbar-"+i+" "+r+o+d);var l="";null!==t.labelField&&(l+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',l+='<div class="widget-fieldlabel-inner">',l+='<label class="widget-fieldlabel processbar-fieldlabel">'+t.labelField+"</label>",t.labelField&&(l+='<span class="widget-separator">'+t.separator+"</span>"),l+="</div>",l+="</div>"),l+='<div class="widget-wrap-outer progressbar-wrap-outer">',l+='<div class="widget-wrap progressbar-wrap">',l+='<div class="widget-wrap progressbar-content">',l+='<div class="progressbar-value"></div>',l+="</div>",(""!=t.text||t.showPercentage)&&(l+='<div class="progressbar-text">',""!=t.text&&(l+='<span class="progressbar-text">'+t.text+"</span>"),t.showPercentage&&(l+='<span class="progressbar-percentage">'+s+t.unit+"</span>"),l+="</div>"),l+="</div>",null!=t.underText&&t.underText!=undefined&&(l+='<div class="progressbar-under-text-wrap">',l+='<div class="progressbar-under-text">',l+=t.underText,l+="</div>",l+="</div>"),l+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',l+="</div>",null!=t.tips&&t.tips!=undefined&&(l+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',l+='<div class="content tips-content">'+t.tips+"</div>",l+="</div>"),l+="</div>",t.tipText&&(l+='<div widget="toolTip"></div>'),e.append(l),e.find("div.progressbar-content").css({width:a,height:n}),this.setTips(t.tips),this.childrenDom={},this.childrenDom.container=this.getContainer(),this.childrenDom.progressbarBox=this.childrenDom.container.find("div.progressbar-content"),this.childrenDom.progressbarBar=this.childrenDom.progressbarBox.children("div.progressbar-value"),this.childrenDom.percentageBox=this.childrenDom.container.find("span.progressbar-percentage")},getValue:function(){return this.settings.value},setValue:function(e,t){if(e!==undefined&&null!==e){var i=this.settings;i.prevValue=i.value,i.value=e,i.animate?this.animate({percentageStart:i.prevValue,percentageEnd:e,duration:t||i.duration}):this.updateViewByPercentageVal(e)}},animate:function(e){var a=this,n=this.settings,t=this.getContainer(),i=n.ptype,r=n.unit,o="horizontal"===i?"width":"height",s=null===e.percentageStart?0:e.percentageStart;s=parseInt(s,10);var d=parseInt(e.percentageEnd,10),l="number"===$.type(parseInt(e.duration,10))?parseInt(e.duration,10):500,c=e.callback||null,u=s||0,h=t.find("div.progressbar-content"),p=h.children("div.progressbar-value"),f=t.find("span.progressbar-percentage");h[o](),this.updateViewByPercentageVal(s);var v=parseInt(l/Math.abs(d-s),10),g=(new Date).getTime();clearInterval(n._timeout),n._timeout=setInterval(function(){var e,t=(new Date).getTime(),i=t-g,s=Math.round(i/v);g=t,u!=d?(u=d<u?(u-=s)<d?d:u:d<(u+=s)?d:u,n.percentageCurrent=u.toFixed(1)/100,!1!==n.step?a.updateViewByPercentageVal(u):(e="width"===o?{"width":u+r}:{"height":u+r},p.clearQueue().animate(e,v,function(){f.html(u+r)}),a.settings.value=u)):(clearInterval(n._timeout),n._timeout=0,a.updateViewByPercentageVal(d),c&&c.call(this))},v)},animateInfinite:function(e){this.underTextAnimate(e);var t=this.settings,i=this.getContainer(),s=(t.ptype,t.unit,i.find("div.progressbar-content").children("div.progressbar-value"));if(1!=t.circle)if(!1!==e){var a=function(){s.css({left:-s.width()}),s.clearQueue().animate({left:"100%"},4e3)};a(),clearInterval(t._timeout),t._timeout=setInterval(function(){a()},4e3)}else s.clearQueue(),clearInterval(t._timeout)},reset:function(){var e=this.settings,t=this.getContainer(),i=e.unit,s="horizontal"===e.ptype?"width":"height";this.stop();var a=t.find("div.progressbar-content").children("div.progressbar-value"),n=t.find("span.progressbar-percentage"),r="width"===s?{"width":0}:{"height":0};a.stop(),a.css(r),n.html(0+i),this.settings.value=0},stop:function(){clearInterval(this.settings._timeout)},setText:function(e){this.getContainer().find("span.progressbar-text").text(e)},hide:function(){this.getContainer().css("display","none")},show:function(){this.getContainer().fadeIn(150)},hideBar:function(){var e=this.dom();e.find("div.progressbar-content").hide(),e.addClass("hide-bar")},showBar:function(){var e=this.dom();e.find("div.progressbar-content").show(),e.removeClass("hide-bar")},updateViewByPercentageVal:function(e){var t=this.childrenDom,i=this.settings,s=(t.container,i.ptype),a=i.unit,n="horizontal"===s?"width":"height",r=(t.progressbarBox,t.progressbarBar),o=t.percentageBox,d=e+"%";!1!==i.step&&(d=(e*i.step/100).toFixed(0)/i.step+"%"),r.css(n,d),o.text(e+a),this.settings.value=e},setUnderText:function(e){var t=this.dom();if(null!==e&&e!==undefined){var i=t.find(".progressbar-under-text-wrap");""==e?i.hide():i.show().find(".progressbar-under-text").html(e)}},underTextAnimate:function(e){var t,i=this,s=this.dom();0!=(t=this.settings.animateText?$(this.settings.animateText):s.find(".progressbar-under-text")).length&&(!1!==e?(clearInterval(this.underTextTimer),this.underTextTimer=setInterval(function(){if(i.dom().is(":visible")){var e=t.text();/\.\.\.$/.test(e)?e=e.replace(/\.\.\.$/,""):e+=".",t.text(e)}else clearInterval(i.underTextTimer)},500)):clearInterval(this.underTextTimer))},destroy:function(){this.stop()}}),$.su.Widget.register("password",{settings:{hint:{attribute:"hint",defaultValue:null},validateIcon:{attribute:"validate-icon",defaultValue:!1},showLevel:{attribute:"show-level",defaultValue:!1},allowBlank:{attribute:"allow-blank",defaultValue:!0},_minLength:{attribute:"min-length",defaultValue:2},_maxLength:{attribute:"max-length",defaultValue:16},vtype:{attribute:"vtype",defaultValue:"password"},invalidText:{attribute:"invalid-text",defaultValue:$.su.CHAR.VTYPETEXT.INVALIDTEXT},blankText:{attribute:"blank-text",defaultValue:$.su.CHAR.VTYPETEXT.BLANKTEXT},allowVisible:{attribute:"allow-visible",defaultValue:!0},visibleDefault:{attribute:"visible-default",defaultValue:!1},readOnly:{attribute:"read-only",defaultValue:!1},tipText:{attribute:"tip-text",defaultValue:""},securityCheck:{attribute:"security-check",defaultValue:!1},autoTrim:{attribute:"auto-trim",defaultValue:null}},listeners:[{selector:"input.password-text",event:"click focus",callback:function(e,t){e.preventDefault(),t.dom().find("input.password-hint").fadeOut(50),t.setFocus(),t.securityCheck(!0,!1)}},{selector:".text-wrap, .allow-visible-wrapper",event:"mouseenter",callback:function(e,t){t.dom().addClass("hover")}},{selector:".text-wrap, .allow-visible-wrapper",event:"mouseleave",callback:function(e,t){t.dom().removeClass("hover")}},{selector:"input.password-text",event:"blur",callback:function(e,t){var i=t.dom(),s=t.settings,a=(s.encrypt,i.find("input.password-visible")),n=i.find("input.password-hidden"),r=i.find("input.password-hint"),o=s.passwordVisible?a.val():n.val();!0===t.settings.autoTrim&&(o=$.trim(o),a.val(o),n.val(o)),t.removeFocus(),o||r.css("display","inline"),t.dom().triggerHandler("ev_view_change",[{"type":"valid","value":o}]),t.dom().triggerHandler("ev_password_blur"),t.securityCheck(!1,!0)}},{selector:"input.password-text",event:"keyup",callback:function(e,t){var i=$(this).val();t.levelCheck(),t.securityCheck(!1,!1),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}},{selector:"input.password-text",event:"change",callback:function(e,t){var i=t.dom(),s=t.settings,a=i.find("input.password-visible"),n=i.find("input.password-hidden"),r=s.passwordVisible?a.val():n.val();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":r}])}},{selector:"span.allow-visible-btn",event:"click",callback:function(e,t){var i=t.dom(),s=t.settings,a=i.find("input.password-visible"),n=i.find("input.password-hidden"),r=i.hasClass("disabled"),o=$(this),d="";r||(s.passwordVisible?(d=a.val(),n.val(d),a.css("display","none"),n.css("display","inline-block"),o.removeClass("visible"),s.passwordVisible=!1):(d=n.val(),a.val(d),n.css("display","none"),a.css("display","inline-block"),o.addClass("visible"),s.passwordVisible=!0))}},{selector:"input.password-hint",event:"click focus",callback:function(e,t){e.preventDefault();var i=t.dom(),s=t.settings,a=i.find("input.password-visible"),n=i.find("input.password-hidden");return i.fadeOut(50,function(){s.passwordVisible?a.focus():n.focus()}),!1}}],init:function(){var e=this.settings;if(e.vtype){var t=e.vtype;e.vtypeText&&(e.vtype.vtypeText=e.vtypeText),e.vtype=t}},render:function(){var e=this.dom(),t=this.settings,i=""===t.tips?"":" tips",s=(t.shortTips,t.readOnly?'readonly="readonly"':""),a=t.allowVisible?" visible":"";e.addClass(t.cls+"text-container password-container "+i+a);var n="";null!==t.labelField&&(n+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',n+='<div class="widget-fieldlabel-inner">',n+='<label class="widget-fieldlabel text-fieldlabel password-fieldlabel">'+t.labelField+"</label>",""!==t.labelField&&(n+='<span class="widget-separator">'+t.separator+"</span>"),n+="</div>",n+="</div>"),n+='<div class="widget-wrap-outer text-wrap-outer password-wrap-outer '+(t.allowVisible?"allow-visible":"")+'">',n+='<div class="widget-wrap text-wrap password-wrap">',n+='<span class="text-wrap-before"></span>',n+='<span class="text-wrap-inner password-wrap ">',n+='<input type="password" '+s+' class="text-text password-text password-hidden '+(t.visibleDefault?"hidden ":" ")+t.inputCls+'"/>',t.allowVisible&&(t.passwordVisible=t.visibleDefault,n+='<input type="text" '+s+' class="text-text password-text password-visible '+(t.visibleDefault?" ":"hidden ")+t.inputCls+'"/>'),n+="</span>",t.hint&&(n+='<span class="hint text-hint password-hint">',n+='<input class="text-hint password-hint '+t.inputCls+'" value="'+t.hint+'" contenteditable="false" readonly="readonly"/>',n+="</span>"),t.showLevel&&(n+='<div class="password-level hidden '+t.inputCls+'">',n+='<span class="level low">'+$.su.CHAR.OPERATION.LOW+"</span>",n+='<span class="level middle">'+$.su.CHAR.OPERATION.MIDDLE+"</span>",n+='<span class="level high">'+$.su.CHAR.OPERATION.HIGH+"</span>",n+="</div>"),n+='<span class="text-wrap-after"></span>',n+="</div>",t.validateIcon&&(n+='<span class="widget-validate-icon"></span>'),""!=t.shortTips&&null!=t.shortTips&&t.shortTips!=undefined&&(n+='<div class="widget-short-tips textbox-short-tips">',n+='<div class="content short-tips-content">'+t.shortTips+"</div>",n+="</div>"),""!=t.tips&&null!=t.tips&&t.tips!=undefined&&(n+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',n+='<div class="content tips-content">'+t.tips+"</div>",n+="</div>"),t.allowVisible&&(n+='<div class="allow-visible-wrapper">',n+='<span class="icon allow-visible-btn '+(t.visibleDefault?"visible":"")+'"></span>',n+='<span class="text allow-visible-text">'+$.su.CHAR.OPERATION.SHOW+"</span>",n+="</div>"),n+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',n+="</div>",t.securityCheck&&(n+='<div class="pw-secure-check hidden">',n+='<ul class="pw-secure-check-ls">',n+='<li class="pw-nospace-hint"><div>'+$.su.CHAR.VTYPETEXT.PWD_NOSPACE_CHECK+"</div></li>",n+='<li class="pw-length-hint"><div>'+$.su.CHAR.VTYPETEXT.PWD_LENGTH_CHECK+"</div></li>",n+='<li class="pw-symbol-hint"><div>'+$.su.CHAR.VTYPETEXT.PWD_SYMBOL_CHECK+"</div></li>",n+="</ul>",n+="</div>"),n+="</div>",t.tipText&&(n+='<div widget="toolTip"></div>'),e.append(n),e.find("div.progressbar-container").addClass("hidden");var r=this.getContainer(),o=r.find("input.password-hidden"),d=r.find("input.password-visible"),l=r.find("input.password-hint");r.find("input.password-level"),t.visibleDefault?(d.css("display","inline-block"),o.css("display","none")):(d.css("display","none"),o.css("display","inline-block")),setTimeout(function(){""!=o.val()&&l.css("display","none")},100),this.setTips(t.tips)},securityCheck:function(e,t){var i=this.settings;if(i.securityCheck){var s=this.getContainer(),a=s.find("input.password-visible"),n=s.find("input.password-hidden"),r="";r=i.passwordVisible?a.val():n.val();var o=!/[\s]/i.test(r),d=6<=r.length&&r.length<=32,l=2<=Boolean(/[a-zA-Z]/g.test(r))+Boolean(/[0-9]/g.test(r))+Boolean(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\x20]/g.test(r)),c=s.find("div.pw-secure-check"),u=s.find("li.pw-nospace-hint"),h=s.find("li.pw-length-hint"),p=s.find("li.pw-symbol-hint");u.removeClass("warning error passed"),h.removeClass("warning error passed"),p.removeClass("warning error passed"),t?(o?u.hide():u.addClass("error"),d?h.hide():h.addClass("error"),l?p.hide():p.addClass("error"),o&&d&&l?s.removeClass("error").addClass("valid"):s.removeClass("valid").addClass("error")):!e&&c.hasClass("hidden")||(u.addClass(o?"passed":"warning"),h.addClass(d?"passed":"warning"),p.addClass(l?"passed":"warning"),u.show(),h.show(),p.show(),e&&c.removeClass("hidden").fadeIn(100))}},levelCheck:function(){var e=this.settings;if(e.showLevel){var t,i=this.getContainer(),s=i.find("input.password-visible"),a=i.find("input.password-hidden"),n="",r=(n=e.passwordVisible?s.val():a.val()).length;t=(/[A-Z]/g.test(n)?1:0)+(/[a-z]/g.test(n)?1:0)+(/[0-9]/g.test(n)?1:0)+(10<=r?1:0)+(/[\`\~\!\@\#\$\%\^\&\*\(\)\-\=\_\+\[\]\{\}\;\:\'\"\\\|\/\?\.\,\<\>\x20]/g.test(n)?1:0);var o=0;r<=5?t<=2?o=1:3!=t&&4!=t||(o=2):t<=1?o=1:2==t||3==t?o=2:4<=t&&(o=3);var d=i.find("div.password-level");d.removeClass("level-0 level-1 level-2 level-3"),""!==n?(d.fadeIn(100).addClass("level-"+o).removeClass("hidden"),i.addClass("level")):(d.hide().addClass("hidden"),i.removeClass("level"))}},setValue:function(e){this.dom().find("span.password-wrap input").val(e),this.levelCheck(),this.securityCheck(!1,!1)},getValue:function(){return this.dom().find("span.password-wrap input").val()},setMaxLength:function(e){var t=this.dom();e=parseInt(e),"number"===$.type(e)&&t.find("span.password-wrap input").attr("maxlength",e)},disable:function(){var e=this.getContainer(),t=e.find("input.password-text");e.addClass("disabled"),t.prop("disabled",!0),e.triggerHandler("ev_view_disable")},enable:function(){var e=this.getContainer(),t=e.find("input.password-text");e.removeClass("disabled"),t.prop("disabled",!1),e.triggerHandler("ev_view_enable")},setCorrect:function(){this.setNormal(),this.getContainer().addClass("correct")},setError:function(e){var t=this.dom(),i=this.getContainer(),s=t.find("div[widget=errortip]"),a=t.find(".widget-tips");if(i&&!this.isDisabled()&&e){if(a.hide(),this.settings.securityCheck)this.securityCheck(!1,!0);else if(this.errortip)this.errortip.show(e);else if(0<s.length&&i){var n=i.children(".widget-wrap-outer").children("div[widget=errortip]");n.get(0)&&($(n[0]).attr("id",this.domId+"_errortip"),this.errortip=$(n[0]).errortip({type:this.type})[0],this.errortip.render(),this.errortip.show(e))}i.removeClass("valid").addClass("error"),i.find("span.widget-validate-icon").css({"display":"inline-block"})}},setNormal:function(){var e=this.dom(),t=(this.settings,this.getContainer()||e),i=(e.find("div[widget=errortip]"),e.find(".widget-tips"));t&&(t.removeClass("focus error disable dirty correct"),t.find("span.widget-validate-icon").css({"display":"none"}),this.errortip&&this.errortip.hide(),0<i.length&&($.su.isIe?i.show():i.fadeIn(150)))}}),$.su.Widget.register("slider",{settings:{showPercentage:{attribute:"show-percentage",defaultValue:!0},_width:{attribute:"width",defaultValue:255},inputBox:{attribute:"input-box",defaultValue:!1},increment:{attribute:"increment",defaultValue:1},minValue:{attribute:"min-value",defaultValue:0},maxValue:{attribute:"max-value",defaultValue:100},range:{attribute:"range",defaultValue:null},unit:{attribute:"unit",defaultValue:""},value:{attribute:"value",defaultValue:0},tipText:{attribute:"tip-text",defaultValue:""},rangeSlider:{attribute:"range-slider",defaultValue:!1},poleValue:{attribute:"pole-value",defaultValue:!1},displayValue:{attribute:"display-value",defaultValue:!1},valueMarker:{attribute:"value-marker",defaultValue:!1},valueMarkerPos:{attribute:"value-marker-pos",defaultValue:"top"},disablePole:{attribute:"disable-pole",defaultValue:!1}},listeners:[{selector:"div.left-box input[type=text]",event:"keyup",callback:function(e,t){var i=$.su.clone(t.settings.value),s=$(this).val(),a=t.formatType(s);a&&($(this).val(a),a<=(i[0]>i[1]?i[0]:i[1])&&(i[0]<i[1]?i[0]=a:i[1]=a,t.setValue(i)))}},{selector:"div.right-box input[type=text]",event:"keyup",callback:function(e,t){var i=$.su.clone(t.settings.value),s=$(this).val(),a=t.formatType(s);a&&($(this).val(a),t.settings.rangeSlider?(i[0]<i[1]?i[0]:i[1])<=a&&(i[0]>i[1]?i[0]=a:i[1]=a,t.setValue(i)):t.setValue(a))}},{selector:"div.widget-wrap.slider-wrap",event:"click",callback:function(e,t){t.dom().hasClass("disabled")||t.dragingHandler(e)}}],init:function(){var e=this.settings;if(e.value=e.rangeSlider?[0,0]:0,this.leftBox=undefined,this.rightBox=undefined,e.configs&&"function"===$.type(e.configs.convertValue)&&(this.convertValue=e.configs.convertValue),e.width&&(e._width=e.width,delete e.width),e._splitorWidth=2,"s"==$.su.widgetSize){var t=.75*document.body.clientWidth;if(t<e._width){var i=Math.round((e.maxValue-e.minValue)/e.increment);t=Math.floor(t/i)*i,e._width=t,e._splitorWidth=1}}e._splitorAll=Math.round(e._width/Math.round((e.maxValue-e.minValue)/e.increment))},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"slider-container"+(t.rangeSlider?" range":""));var i="";null!==t.labelField&&!1!==t.labelField&&(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',i+='<label class="widget-fieldlabel slider-fieldlabel">'+t.labelField+"</label>",""!==t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div>"),i+='<div class="widget-wrap-outer slider-wrap-outer">',t.inputBox&&t.rangeSlider&&(i+='<div widget="textbox" id="'+this.domId+'_left_textbox" class="left-box"></div>'),!t.inputBox&&t.rangeSlider&&t.displayValue&&(i+='<div class="display-value-container left-value"><span class="content"></span></div>'),i+='<div class="widget-wrap slider-wrap">',i+='<div class="widget-wrap slider-content-left">',i+='<div class="widget-wrap slider-content-right">',i+='<div class="widget-wrap slider-content">',i+='<div class="widget-value slider-value"></div>',i+='<div class="split-background"></div>';var s=this.convertValue?this.convertValue(t.value[0]):t.value[0];if(i+='<div data-tip="'+s+'" data-pointer="top" class="widget-value-outer slider-value-outer left">',t.valueMarker&&(i+="<span class='slider-value-marker %pos'>%value</span>".replace("%pos","top"===t.valueMarkerPos?"top":"bottom").replace("%value",s)),i+="</div>",t.rangeSlider){var a=t.rangeSlider?t.value[1]:t.value;i+='<div data-tip="'+(a=this.convertValue?this.convertValue(a):a)+'" data-pointer="top" class="widget-value-outer slider-value-outer right"></div>'}if(i+="</div>",i+="</div>",i+="</div>",t.poleValue){var n=t.minValue,r=t.maxValue,o=t.anchors;$.isArray(o)&&o.length<=2&&(n=o[0]||n,r=o[1]||r),i+='<div class="pole-tips-container">',i+='<span class="pole-tips left-tip">'+(this.convertValue?this.convertValue(n):n)+"</span>",i+='<span class="pole-tips right-tip">'+(this.convertValue?this.convertValue(r):r)+"</span>",i+="</div>"}if(i+="</div>",t.inputBox&&(i+='<div widget="textbox" id="'+this.domId+'_right_textbox" class="right-box"></div>'),!t.inputBox&&t.displayValue&&(i+='<div class="display-value-container right-value"><span class="content"></span></div>'),t.tipText&&(i+='<div widget="toolTip"></div>'),i+='<div widget="errortip">',i+="</div>",i+="</div>",e.append($(i)),this.leftBox=new $.su.widgets.textbox({id:this.domId+"_left_textbox"}),this.rightBox=new $.su.widgets.textbox({id:this.domId+"_right_textbox"}),this.leftBox.render(),this.rightBox.render(),!(t.maxValue<=t.minValue)){t.range||(t.range=[t.minValue,t.maxValue]),e.find("div.slider-content").css({"width":t._width}),e.find(".split-background").css({"right":t._splitorWidth,"background":"repeating-linear-gradient(to right, transparent 0 "+(t._splitorAll-t._splitorWidth)+"px, white "+(t._splitorAll-t._splitorWidth)+"px "+t._splitorAll+"px)"}),e.find("span.slider-percentage").text(t.value+t.unit);var g=this;e.find("div.slider-value-outer").on("mousedown touchstart",function(e){if(!g.dom().hasClass("disabled")){$(this).parent().find("div.slider-mask").remove(),$(this).before('<div class="slider-mask"></div>');var v=$(this).hasClass("left"),t=function(e){var t=g.dom(),i=g.settings;"mousemove"===e.type&&e.preventDefault();var s=g.dom().find("div.slider-wrap");g.dom().find("div.slider-value-outer"+(v?".left":".right")).trigger("mouseenter");var a=parseInt(i.maxValue,10),n=parseInt(i.minValue,10),r=parseInt(i._width,10),o=parseInt(i.increment,10),d="mousemove"===e.type?e.pageX||e.screenX:e.originalEvent.changedTouches[0].pageX,l=d-s.offset().left,c=Math.round(l/r*(a-n))+n,u=Math.round(c/o)*o;a<u?u=a:u<n&&(u=n);var h=i.disablePole;if(h&&(u!=n||"both"!=h&&"min"!=h||(u+=o),u!=a||"both"!=h&&"max"!=h||(u-=o)),!v){var p=d-s.offset().left;c=Math.round(p/r*a);var f=Math.round(c/o)*o;a<f?f=a:f<n&&(f=n)}t.triggerHandler("ev_view_change",[{"type":"value","value":g.settings.rangeSlider?[v?u:g.settings.value[0],v?g.settings.value[1]:f]:u}])},i=function(){$("html").off("mousemove touchmove",t).off("mouseup touchend",i)};$("html").on("mousemove touchmove",t),$("html").on("mouseup touchend",i)}})}},dragingHandler:function(e){var t=this.dom(),i=this.settings;e.preventDefault();var s=t.find("div.slider-wrap"),a=parseInt(i.maxValue,10),n=parseInt(i.minValue,10),r=parseInt(i._width,10),o=parseInt(i.increment,10),d=(e.pageX||e.screenX)-s.offset().left,l=Math.round(d/r*(a-n))+n,c=Math.round(l/o)*o;a<c?c=a:c<n&&(c=n);var u=i.disablePole;u&&(c!=n||"both"!=u&&"min"!=u||(c+=o),c!=a||"both"!=u&&"max"!=u||(c-=o));var h=$.isArray(this.settings.value)?$.su.clone(this.settings.value):this.settings.value;$.isArray(h)&&(Math.abs(c-h[0])<Math.abs(c-h[1])?h[0]=c:h[1]=c);var p=i.configs&&i.configs.values||[];if(0<p.length&&!this.settings.rangeSlider){h=i.value;for(var f=0,v=p.length-1;f<v;f++)if(p[f]<h&&h<p[f+1]){t.triggerHandler("ev_view_change",[{"type":"value","value":h-p[f]<=p[f+1]-h?p[f]:p[f+1]}]);break}}else this.setDisplay(this.settings.rangeSlider?h:c),t.triggerHandler("ev_view_change",[{"type":"value","value":this.settings.rangeSlider?h:c}])},getValue:function(){return this.settings.value},setRangeSytle:function(e,t){var i=this.dom(),s=this.settings,a=i.find("div.slider-value"),n=i.find("div.slider-value-outer.left"),r=i.find("div.slider-value-outer.right"),o=parseInt(s.maxValue,10),d=parseInt(s.minValue,10),l=parseInt(s.range[1],10),c=parseInt(s.range[0],10),u=parseInt(s._width,10);l<e?e=l:e<c&&(e=c),l<t?t=l:t<c&&(t=c);var h=u/(o-d)*(e-d),p=u/(o-d)*(t-d),f=u/(o-d)*Math.abs(t-e);a.css({"left":h<p?h:p,"width":f}),n.css({"left":h}),r.css({"left":p}),e=this.convertValue?this.convertValue(e):e,t=this.convertValue?this.convertValue(t):t,i.find(".slider-value-outer.left").attr("data-tip",e),i.find(".slider-value-outer.right").attr("data-tip",t)},setStyle:function(e){var t=this.dom(),i=this.settings,s=t.find("div.slider-value"),a=t.find("div.slider-value-outer.left"),n=parseInt(i.maxValue,10),r=parseInt(i.minValue,10),o=parseInt(i.range[1],10),d=parseInt(i.range[0],10);o<e?e=o:e<d&&(e=d);var l=parseInt(i._width,10),c=Math.round(l/(n-r)*(e-r));s.css({"width":c}),a.css({"left":c}),t.find("span.slider-percentage").html(e+i.unit),e=this.convertValue?this.convertValue(e):e,t.find(".slider-value-outer.left").attr("data-tip",e),i.valueMarker&&t.find(".slider-value-marker").html(e)},setValue:function(e){var t=this.settings;if(e=e||(t.rangeSlider?[0,0]:0),t.value=e,$.isArray(e))this.leftBox&&this.leftBox.setValue(e[0]<e[1]?e[0]:e[1]),this.rightBox&&this.rightBox.setValue(e[0]<e[1]?e[1]:e[0]),this.setRangeSytle(e[0],e[1]);else{if(t.disablePoints&&0<t.disablePoints.length&&-1!==t.disablePoints.indexOf(e))for(var i=t.enableValue,s=0,a=i.length;s<a;s++)if(i[s]>e){e=0===s?i[s]:e-i[s-1]<=i[s]-e?i[s-1]:i[s],t.value=e;break}this.rightBox&&this.rightBox.setValue(e),this.setStyle(e)}this.setDisplay(e)},setDisplay:function(e){var t=this.settings;if(!t.inputBox&&t.displayValue){var i=this.dom().find(".display-value-container"),s=i.filter(".left-value").find(".content"),a=i.filter(".right-value").find(".content");if($.isArray(e)){var n=e[0]<e[1]?e[0]:e[1],r=e[0]<e[1]?e[1]:e[0];this.convertValue&&(n=this.convertValue(n),r=this.convertValue(r)),0<s.length&&s.text(n),0<a.length&&a.text(r)}else e=this.convertValue?this.convertValue(e):e,a.text(e)}},setRange:function(e){var t=this.settings;e[0]<t.minValue&&(e[0]=t.minValue),e[1]>t.maxValue&&(e[1]=t.maxValue),e[0]>e[1]&&(e[1]=e[0]-e[1],e[0]=e[0]-e[1],e[1]=e[0]+e[1]),t.range=e},setMaxValue:function(e){e=parseInt(e),"number"===$.type(e)&&(this.settings.maxValue=e)},setMinValue:function(e){e=parseInt(e),"number"===$.type(e)&&(this.settings.minValue=e)},formatType:function(e){var t=parseFloat(e,10);return/^\d+$/.test(e)&&$.isNumeric(t)?t:!(!isNaN(t)&&(t+"").length===(e+"").length)&&e},disable:function(){this.dom().addClass("disabled"),this.leftBox&&this.leftBox.disable(),this.rightBox&&this.rightBox.disable()},enable:function(){this.dom().removeClass("disabled"),this.leftBox&&this.leftBox.enable(),this.rightBox&&this.rightBox.enable()},setDisablePoints:function(e){var t=this.settings;if(t.configs&&t.configs.values){var i=t.configs.values.slice();e="array"===$.type(e)?e:[e];var s=this.getValue(),a=e.indexOf(s);t.disablePoints=e.slice();for(var n=0,r=e.length;n<r;n++){var o=i.indexOf(e[n]);-1!==o&&i.splice(o,1)}i.sort(function(e,t){return e-t}),t.enableValue=i,-1!==a&&this.setValue(s)}}}),$.su.Widget.register("switch",{settings:{name:{attribute:"name",defaultValue:""},trueValue:{attribute:"true-value",defaultValue:1},falseValue:{attribute:"false-value",defaultValue:0},columns:{attribute:"columns",defaultValue:1},tipText:{attribute:"tip-text",defaultValue:""},animateTime:{attribute:"animate-time",defaultValue:300}},listeners:[{selector:".switch-label",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var i=$(this),s=t.settings,a=t.getValue(),n=i.closest(".switch-container");if(!(i.hasClass("disabled")||n.hasClass("loading-on")||n.hasClass("loading-off"))){a=a===s.trueValue?s.falseValue:s.trueValue;var r=$.su.getDefaultEvent(t,function(){t.dom().triggerHandler("ev_view_change",[{"type":"value","value":a}])});t.dom().trigger("ev_view_will_change",[r.ev]),r.exe()}}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;this.value=null,e.addClass(t.cls+"switch-container");var i="";null!==t.labelField&&(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',i+='<div class="widget-fieldlabel-inner">',i+='<label class="widget-fieldlabel switch-fieldlabel">'+t.labelField+"</label>",""!==t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div>",i+="</div>"),i+='<div class="widget-wrap-outer switch-wrap-outer">',i+='<div class="switch-wrap">',i+='<div class="widget-wrap">',i+='<label class="switch-label">',i+='<span class="icon-bg"></span>',i+='<span class="icon-ball"></span>',i+='<span class="icon-loading"></span>',i+="</label>",i+="</div>",i+="</div>",null!=t.tips&&t.tips!=undefined&&(i+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',i+='<div class="widget-tips-wrap">',i+='<div class="content tips-content">'+t.tips+"</div>",i+="</div>",i+="</div>"),i+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',i+="</div>",i+="</div>",t.tipText&&(i+='<div widget="toolTip"></div>'),e.empty().append(i)},init:function(){},setValue:function(e){var t,i,s=this.dom(),a=this.settings,n=s.find("label.switch-label"),r=this;t=n.eq(0),(i=e)===a.trueValue?(t.addClass("checked"),r.value=i):i===a.falseValue&&(t.removeClass("checked"),r.value=i)},getValue:function(){var e=this.settings;return this.value===e.trueValue?e.trueValue:e.falseValue},disable:function(){this.getContainer().addClass("disabled"),this.dom().find("label.switch-label").addClass("disabled"),this.setStatus("disabled",!0)},enable:function(){this.getContainer().removeClass("disabled"),this.dom().find("label.switch-label").removeClass("disabled"),this.setStatus("disabled",!1)},showTips:function(){this.dom().find(".widget-tips").removeClass("hidden")},hideTips:function(){this.dom().find(".widget-tips").addClass("hidden")},showLoading:function(e){"on"==e?this.dom().removeClass("loading-off").addClass("loading-on"):this.dom().removeClass("loading-on").addClass("loading-off")},hideLoading:function(){this.dom().removeClass("loading-on loading-off")}}),$.su.Widget.register("time",{settings:{format:{attribute:"format",defaultValue:"h:i:s"},hourSystem:{attribute:"hour-system",defaultValue:"24"},subLabelField:{attribute:"sub-label-field",defaultValue:""},shortTips:{attribute:"short-tips",defaultValue:null}},listeners:[{selector:function(){return{parent:this.timers.hour.dom()}},condition:function(e){return!!e.timers.hour},event:"ev_view_change",callback:function(e,t){var i=Array.prototype.slice.call(arguments,0).reverse()[0];"value"===t.type&&(i.timers.hour.setValue(t.value),i.viewChange(i.getValue()))}},{selector:function(){return{parent:this.timers.minute.dom()}},condition:function(e){return!!e.timers.minute},event:"ev_view_change",callback:function(e,t){var i=Array.prototype.slice.call(arguments,0).reverse()[0];"value"===t.type&&(i.timers.minute.setValue(t.value),i.viewChange(i.getValue()))}},{selector:function(){return{parent:this.timers.second.dom()}},condition:function(e){return!!e.timers.second},event:"ev_view_change",callback:function(e,t){var i=Array.prototype.slice.call(arguments,0).reverse()[0];"value"===t.type&&(i.timers.second.setValue(t.value),i.viewChange(i.getValue()))}},{selector:function(){return{parent:this.timers.ampm.dom()}},condition:function(e){return!!e.timers.ampm},event:"ev_view_change",callback:function(e,t){var i=Array.prototype.slice.call(arguments,0).reverse()[0];"value"===t.type&&(i.timers.ampm.setValue(t.value),i.viewChange(i.getValue()))}}],init:function(){this.timers={hour:null,minute:null,second:null,ampm:null}},destroy:function(){var e=this.dom();for(var t in e.removeClass(),e.empty(),this.timers)this.timers.hasOwnProperty(t)&&this.timers[t]&&this.timers[t].dom().remove()},render:function(){var e=this.dom(),t=this.settings,i=" hour-"+t.hourSystem,s=""===t.shortTips?"":" short-tips";e.addClass(t.cls+"combobox-container time-container"+i+s);var a="";(!1!==t.labelField||t.subLabelField)&&(a+='<div class="widget-fieldlabel-wrap '+t.labelCls+(t.labelField?" has-main-label":"")+'">',a+='<div class="widget-fieldlabel-inner">',a+='<label class="widget-fieldlabel time-fieldlabel">'+t.labelField+"</label>",""!==t.labelField&&(a+='<span class="widget-separator">'+t.separator+"</span>"),""!==t.subLabelField&&(a+='<span class="widget-sub-fieldlabel time-sub-fieldlabel">'+t.subLabelField+"</span>"),a+="</div>",a+="</div>");var n=t.format,r=n.charAt(1)||" ",o=n.split(r);t.sepMark=r;var d=0;a+='<div class="widget-wrap-outer time-wrap-outer">',a+='<div class="widget-wrap time-wrap">';for(var l=0,c=o.length;l<c;l++){switch(d++,o[l]){case"H":case"h":a+='<div widget="combobox" id="'+this.domId+'_hour" class="label-empty combobox-hour combobox-'+l+'"></div>',this.timers.hour=this.domId+"_hour";break;case"I":case"i":a+='<div widget="combobox" id="'+this.domId+'_minute" class="label-empty combobox-minute combobox-'+l+'"></div>',this.timers.minute=this.domId+"_minute";break;case"S":case"s":a+='<div widget="combobox" id="'+this.domId+'_second" class="label-empty combobox-second combobox-'+l+'"></div>',this.timers.second=this.domId+"_second"}l<c-1&&(a+='<span class="separator separator-'+l+'">'+r+"</span>")}for(var u in"12"===t.hourSystem&&(d++,a+='<span class="separator separator-'+(l-1)+'"> </span>',a+='<div widget="combobox" id="'+this.domId+'_ampm" class="label-empty combobox-ampm combobox-'+l+'"></div>',this.timers.ampm=this.domId+"_ampm"),a+="</div>",null!=t.shortTips&&t.shortTips!=undefined&&(a+='<div class="widget-short-tips textbox-short-tips">',a+='<div class="content short-tips-content">'+t.shortTips+"</div>",a+="</div>"),a+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',a+="</div>",null!=t.tips&&t.tips!=undefined&&(a+='<div class="widget-tips textbox-tips '+t.tipsCls+'">',a+='<div class="content tips-content"></div>',a+="</div>"),a+="</div>",t.tipText&&(a+='<div widget="toolTip"></div>'),e.append($(a)),e.addClass("total-"+d),this.timers)this.timers.hasOwnProperty(u)&&this.timers[u]&&(this.timers[u]=new $.su.widgets.combobox({id:this.timers[u]}),this.timers[u].render(),this.timers[u].loadItems(this.getOptions(u)))},getHour:function(){return this.timers.hour&&this.timers.hour.getValue()||0},getMinute:function(){return this.timers.minute&&this.timers.minute.getValue()||0},getSecond:function(){return this.timers.second&&this.timers.second.getValue()||0},setValue:function(e){this.dom();var t=this.settings,i=t.format,s=t.sepMark;if("string"===$.type(e)&&(e=e.split(s)),"array"===$.type(e)){this._value=e;for(var a=i.split(s),n=0,r=a.length;n<r;n++){var o=a[n],d=parseInt(e[n],10);switch(o){case"H":case"h":"12"===t.hourSystem&&(d<12?this.timers.ampm.setValue(0):this.timers.ampm.setValue(1),0==(d%=12)&&(d=12)),this.timers.hour.setValue(d);break;case"i":this.timers.minute.setValue(d);break;case"s":this.timers.second.setValue(d)}}}},getValue:function(){var e=[],t=this.settings.format,i=this.getHour(),s=this.getMinute(),a=this.getSecond();return"number"===$.type(i)&&"12"===this.settings.hourSystem&&(1===this.timers.ampm.getValue()?12!==i&&(i+=12):12===i&&(i=0)),/[hH]/.test(t)&&e.push(i<10?"0"+i:i),/[iI]/.test(t)&&e.push(s<10?"0"+s:s),/[sS]/.test(t)&&e.push(a<10?"0"+a:a),e.join(this.settings.sepMark)},viewChange:function(e){this.dom().triggerHandler("ev_view_change",[{type:"value",value:e}])},getOptions:function(e){var t=0,i=0,s=[],a=this.settings;if("ampm"===e)return[{name:"AM",value:0,boxlabel:"AM",selected:!0},{name:"PM",value:1,boxlabel:"PM"}];switch(e){case"hour":t="12"===a.hourSystem?1:0,i="12"===a.hourSystem?12:23;break;case"minute":case"second":i=59}for(var n=t;n<=i;n++){var r=n<10&&("24"===a.hourSystem||"hour"!==e)?"0"+n:""+n;s.push({name:r,value:n,boxlabel:r,selected:n===t})}return s},setSubLabel:function(e){e!==undefined&&null!==e&&this.dom().find(".time-sub-fieldlabel").html(e)},setHourSystem:function(e){if("12"!==e&&"24"!==e)return!1;var t=this.settings,i=this.getValue();e!==t.hourSystem&&(t.hourSystem=e,this.destroy(),this.init(),this.render(),this.setValue(i))}}),$.su.Widget.register("datepicker",{settings:{format:{attribute:"format",defaultValue:"yyyy/mm/dd"},startDay:{attribute:"start-day",defaultValue:0},blankFilling:{attribute:"blank-filling",defaultValue:1},labelField:{attribute:"label-field",defaultValue:""}},listeners:[{selector:".datepicker-input-container .display-area",event:"click",callback:function(e,t){var i=t.settings,s=t.dom().find(".text-container");i.pickerShow?(t.showDatepicker(),i.pickerShow=!1,s.addClass("focus")):(t.hideDatepicker(),i.pickerShow=!0,s.removeClass("focus"))}},{selector:".date-calendar tbody a",event:"click",callback:function(e,t){var i=e.target?e.target:e.srcElement;t.selectDate(i),$(i).closest("td").hasClass("current-month-date")&&(t.hideDatepicker(),t.settings.pickerShow=!0)}},{selector:"div.text-wrap",event:"mouseenter",callback:function(e,t){t.dom().find(".text-container").addClass("hover")}},{selector:"div.text-wrap",event:"mouseleave",callback:function(e,t){t.dom().find(".text-container").removeClass("hover")}},{selector:function(){return{parent:"div",target:""}},event:"click",callback:function(e,t){var i=t.settings,s=e.target?e.target:e.srcElement,a=$(s).closest(".date-picker");i.pickerShow||0!==a.length||(t.dom().find(".text-container").removeClass("focus"),t.hideDatepicker(),i.pickerShow=!0)}}],init:function(e){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"datepicker-container");var i="";null!==t.labelField&&(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',i+='<div class="widget-fieldlabel-inner">',i+='<label class="widget-fieldlabel combobox-fieldlabel">'+("false"===t.labelField?"":t.labelField)+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div>",i+="</div>"),i+='<div class="widget-wrap-outer datepicker-wrap-outer">',i+='<div id="'+this.domId+'_picker" class="date-picker">',i+='<div class="datepicker-input-container text-container">',i+='<div class="widget-wrap text-wrap">',i+='<span class="text-wrap-before"></span>',i+='<span class="text-wrap-inner">',i+='<input type="text" class="display-area" readonly>',i+="</span>",i+='<span class="text-wrap-after"></span>',i+="</div>",i+="</div>",i+="</div>",i+="</div>",e.append(i),t.picker=$("#"+this.domId+"_picker"),t.pickerShow=!0,e.on("selectstart",function(){return!1}),this.initCalendar()},initCalendar:function(){this.datepickerInfo={},this.datepickerInfo.today=new Date,this.datepickerInfo.date=this.datepickerInfo.today,this.datepickerInfo.lastDate=this.datepickerInfo.date,this.datepickerInfo.selected=this.datepickerInfo.date.getMonth()+1+"/"+this.datepickerInfo.date.getDate()+"/"+this.datepickerInfo.date.getFullYear(),this.renderCalendarHead(),this.syncCalendar(this.datepickerInfo.date),this.setSelectDate(this.datepickerInfo.date),this.dom().find(".datepicker-calendar-container").hide()},renderCalendarHead:function(e){var t=$('<div class="datepicker-calendar-container"></div>'),i=$.su.CHAR.DATEPICKER,s=this.sortWeek().join(",").replace(/\d/g,function(e,t){switch(e){case"0":return i.SUNDAY;case"1":return i.MONDAY;case"2":return i.TUESDAY;case"3":return i.WEDNESDAY;case"4":return i.THURSDAY;case"5":return i.FRIDAY;case"6":return i.SATURDAY}}).split(","),a="<div class='date-calendar-container'>";a+="<table class='date-calendar calendar-body'>",a+="<thead class='calendar-days-container'>",a+="<tr>",$.each(s,function(e,t){a+="<th>",a+="<span>"+t+"</span>",a+="</th>"}),a+="</tr>",a+="</thead>",a+="</table>",a+="</div>",t.append($(a)).appendTo(this.dom().find(".date-picker"))},syncCalendar:function(u){var l=this,h=parseInt(this.settings.blankFilling),e=(this.settings,this.datepickerInfo),t="<tbody>",i=new Date(u),s=this.getDays(u),a=e.selected.split("/"),n=new Date(a[2],a[0]-1,a[1],e.date.getHours()),r=(new Date(e.today),this.sortWeek()),o=1,d=this.dom().find(".date-calendar");d.find("tbody").remove();for(var c=0;c<6;c++){var p="<tr>";for(0==c&&(p+=v($.inArray(i.getDay(i.setDate(1)),r)));o<=s;){i.setDate(o);var f=$.inArray(i.getDay(),r);if(0==f&&0==c){p+="</tr>";break}if(f<=6&&(i.getTime()==n.getTime()?p+='<td class="date-selected current-month-date datepicker-selected" item-value="'+o+'">':p+='<td class="current-month-date" item-value="'+o+'">',p+="<a>"+o+"</a>",p+="</td>",o+=1,6==f)){p+="</tr>";break}}s<o&&(p+=g(f,c),c=6),t+=p}function v(e){var t="",i=u.getFullYear(),s=u.getMonth()-1,a=u.getDate(),n=new Date(i,s,a),r=l.getDays(n);if(0==e&&(e=7),0==h)for(var o=0;o<e;o++)t='<td class="prev-month-date other-selection" item-value="'+r+'"><a>'+r+"</a></td>"+t,r-=1;else{if(1==h)var d="-";else d="";for(o=0;o<e;o++)t='<td class="other-selection stroke-selection"><span>'+d+"</span></td>"+t}return t}function g(e,t){var i=7*t+e+1,s=42-i,a=u.getFullYear(),n=u.getMonth()+1,r=u.getDate(),o=(new Date(a,n,r),1),d="";if(0==h)for(var l=0;l<s;l++)(l+i)%7==0&&l!=s-1&&(d+="</tr><tr>"),d+='<td class="next-month-date other-selection" item-value="'+o+'"><a>'+o+"</a></td>",o+=1;else{if(1==h)var c="-";else c="";for(l=0;l<s;l++)(l+i)%7==0&&l!=s-1&&(d+="</tr><tr>"),d+='<td class="other-selection stroke-selection"><span>'+c+"</span></td>"}return d+="</tr>"}t+="</tbody>",d.append(t)},getDays:function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},deformatDate:function(e){var t=this.settings.format,i=parseInt(e.substring(t.indexOf("y"),t.lastIndexOf("y")+1)),s=parseInt(e.substring(t.indexOf("m"),t.lastIndexOf("m")+1)),a=parseInt(e.substring(t.indexOf("d"),t.lastIndexOf("d")+1));if(-1!=e.indexOf(":"))var n=e.indexOf(":"),r=parseInt(e.substr(n-2,2)),o=parseInt(e.substr(n+1,2));else r=this.datepickerInfo.date.getHours(),o=this.datepickerInfo.date.getMinutes();return new Date(i,s-1,a,r,o)},formatDate:function(e){var t,i=this.settings.format,s=(t=e?new Date(e):new Date).getFullYear(),a=1==(t.getMonth()+1+"").length?"0"+(t.getMonth()+1):t.getMonth()+1+"",n=1==(t.getDate()+"").length?"0"+t.getDate():t.getDate()+"";return i.replace("yyyy",s).replace("mm",a).replace("dd",n)},updateCalendar:function(e){var t=e.getFullYear(),i=e.getMonth(),s=(e.getDate(),this.datepickerInfo.selected.split("/"));t==s[2]&&i==s[0]-1?this.setSelectDate(e):(this.updateSelectedInfo(e),this.syncCalendar(e))},setSelectDate:function(e){var t=e.getFullYear(),i=e.getMonth(),s=e.getDate(),a=new Date(t,i,1).getDay(),n=this.sortWeek(),r=$.inArray(a,n),o=Math.floor((s+r)/7),d=(s+r)%7;a==n[0]&&o++,0==d&&(o--,d=7),$("#"+this.domId+" .date-selected").removeClass("date-selected datepicker-selected"),this.dom().find(".date-calendar").find("tbody tr").eq(o).find("td").eq(d-1).addClass("date-selected datepicker-selected"),this.updateSelectedInfo(e)},sortWeek:function(){var e=parseInt(this.settings.startDay),t=[0,1,2,3,4,5,6],i=$.inArray(e,t),s=t.slice(0,i);return t=t.slice(i).concat(s)},showDatepicker:function(){var e=this.datepickerInfo,t=this.dom().find(".date-picker");0<t.find(".datepicker-calendar-container").size()&&(e.lastDate.getTime()!=e.date.getTime()?this.updateCalendar(e.date):($.su.isIe?t.children().not(".datepicker-input-container").show():t.children().not(".datepicker-input-container").slideDown(150),$("#"+this.domId+" .display-area").val(this.formatDate(this.datepickerInfo.date)))),$.su.isIe?t.children().not(".datepicker-input-container").show():t.children().not(".datepicker-input-container").slideDown(150)},selectDate:function(e){e=$(e).closest("td");var t,s=parseInt(e.attr("item-value")),a=this.datepickerInfo.date;e.hasClass("current-month-date")?(t=new Date(a.getFullYear(),a.getMonth(),s,a.getHours()),this.setSelectDate(t)):(e.hasClass("prev-month-date")||e.hasClass("next-month-date"))&&(t=function n(e){var t,i;return i=e.hasClass("prev-month-date")?a.getMonth()-1:a.getMonth()+1,t=a.getFullYear(),new Date(t,i,s,a.getHours())}(e),this.updateCalendar(t))},updateSelectedInfo:function(e){$("#"+this.domId+" .display-area").val(this.formatDate(e)),e.getTime()!=this.datepickerInfo.date.getTime()&&(this.datepickerInfo.lastDate=this.datepickerInfo.date,this.datepickerInfo.date=e,this.datepickerInfo.today=new Date,this.datepickerInfo.selected=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear())},hideDatepicker:function(){var e=this.dom().find(".date-picker").children().not(".datepicker-input-container");$.su.isIe?e.hide():e.slideUp(150)}}),function(){var t=$.su.Widget.register("simpleDatepicker",{extend:["datepicker"],settings:{},listeners:[{selector:".display-area",event:"click",callback:function(e,t){0==t.dom().find(".calendar-bar-month").size()&&t.renderDateCalendarBar()}},{selector:".date-calendar-container a",event:"click",callback:function(e,t){var i=$(e.target);if(i.closest("table").hasClass("calendar-bar-month")){var s=i.closest("th");if(s.hasClass("displayed-month")){t.dom().find(".date-calendar-container").hide();var a=t.dom().find(".month-calendar-container");0<a.size()?(a.show(),t.updateMonthCalendar()):t.syncMonthCalendar()}else t.changeMonth(s),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])}else t.updateDateCalendarBar(t.datepickerInfo.date),$(i).closest("td").hasClass("stroke-selection")||t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])}},{selector:".month-calendar-container a",event:"click",callback:function(e,t){e.stopPropagation();var i=$(e.target);if(i.closest("table").hasClass("calendar-bar-year")){(s=i.closest("th")).hasClass("displayed-year")?(t.dom().find(".month-calendar-container").hide(),t.syncYearCalendar()):t.changeYear(s)}else{var s=i.closest("td");t.selectMonth(s)}t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])}},{selector:".year-calendar-container a",event:"click",callback:function(e,t){var i=$(e.target);if(i.closest("table").hasClass("calendar-bar-yearslot")){(s=i.closest("th")).hasClass("displayed-yearslot")?(t.dom().find(".year-calendar-container").hide(),t.syncYearslotCalendar()):t.changeYearslot(s)}else{var s=i.closest("td");t.selectYear(s)}t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])}},{selector:".yearslot-calendar-container a",event:"click",callback:function(e,t){var i=$(e.target);if(i.closest("table").hasClass("calendar-bar-century")){(s=i.closest("th")).hasClass("displayed-century")||t.changeCentury(s)}else{var s=i.closest("td");t.selectYearslot(s)}t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])}}],init:function(e){t.superclass.init.call(this,e)},render:function(){t.superclass.render.call(this)},renderDateCalendarBar:function(){var e=this.dom().find(".date-calendar-container"),t=this.datepickerInfo.date,i=this.getMonths("whole"),s=t.getMonth(),a=t.getFullYear(),n='<table class="calendar-bar-month calendar-head">';n+="<tr>",n+='<th class="prev-month-icon left-icon datepicker-icon">',n+='<a href="javascript:void(0);"><</a>',n+="</th>",n+='<th class="displayed-month calendar-time-th" colspan="5" item-value="'+s+"-"+a+'">',n+='<a href="javascript:void(0);">'+i[s]+" "+a+"</a>",n+="</th>",n+='<th class="next-month-icon right-icon datepicker-icon">',n+='<a href="javascript:void(0);">></a>',n+="</th>",n+="</tr>",n+="</table>",e.prepend($(n))},changeMonth:function(e){var t=this.datepickerInfo.date,i=t.getFullYear(),s=t.getMonth(),a=t.getDate();e.hasClass("prev-month-icon")?s-=1:s+=1;var n=new Date(i,s,a);this.updateDateCalendarBar(n),this.updateCalendar(n)},updateDateCalendarBar:function(e){var t=this.getMonths("whole"),i=e.getMonth(),s=e.getFullYear();this.dom().find(".displayed-month").attr("item-value",i+"-"+s).find("a").text(t[i]+" "+s)},getMonths:function(e){var t=$.su.CHAR.DATEPICKER;return"simplified"==e?[t.JAN,t.FEB,t.MAR,t.APR,t.MAY,t.JUN,t.JUL,t.AUG,t.SEP,t.OCT,t.NOV,t.DEC]:[t.JANUARY,t.FEBRUARY,t.MARCH,t.APRIL,t.MAY,t.JUNE,t.JULY,t.AUGUST,t.SEPTEMBER,t.OCTOBER,t.NOVEMBER,t.DECEMBER]},syncMonthCalendar:function(){var e=this.datepickerInfo.date,t=this.getMonths("simplified"),i='<div class="month-calendar-container">';i+="<div>",i+='<table class="calendar-bar-year calendar-head">',i+="<tr>",i+='<th class="prev-year-icon left-icon datepicker-icon">',i+='<a href="javascript:void(0);"><</a>',i+="</th>",i+='<th class="displayed-year calendar-time-th" colspan="2" item-value="'+e.getFullYear()+'">',i+='<a href="javascript:void(0);">'+e.getFullYear()+"</a>",i+="</th>",i+='<th class="next-year-icon right-icon datepicker-icon">',i+='<a href="javascript:void(0);">></a>',i+="</th>",i+="</tr>",i+="</table>",i+='<table class="month-calendar calendar-body">';for(var s=0;s<3;s++){i+="<tr>";for(var a=0;a<4;a++)e.getMonth()==4*s+a?i+='<td class="current-month month-selected datepicker-selected" item-value="'+(4*s+a)+'"><a>'+t[4*s+a]+"</a></td>":i+='<td class="current-month" item-value="'+(4*s+a)+'"><a>'+t[4*s+a]+"</a></td>";i+="</tr>"}i+="</table>",i+="</div>",i+="</div>",this.dom().find(".datepicker-calendar-container").append($(i))},changeYear:function(e){var t=this.dom().find(".displayed-year"),i=parseInt(t.attr("item-value")),s=this.datepickerInfo.date;if($(e).hasClass("prev-year-icon"))var a=i-1;else a=i+1;t.attr("item-value",a),t.find("a").text(a);var n=new Date(a,s.getMonth(),s.getDate());this.updateSelectedInfo(n),this.setSelectMonth(n)},selectMonth:function(e){var t=this.dom(),i=(this.getMonths("simplified"),parseInt(e.attr("item-value"))),s=this.datepickerInfo,a=parseInt(this.dom().find(".displayed-year").attr("item-value")),n=s.date.getDate(),r=new Date(a,i,n);this.setSelectMonth(r),t.find(".month-calendar-container").hide(),t.find(".date-calendar-container").show(),this.updateDateCalendarBar(r),this.updateCalendar(r)},setSelectMonth:function(e){var t=e.getMonth(),i=this.dom(),s=Math.floor(t/4),a=t%4;i.find(".month-selected").removeClass("month-selected datepicker-selected"),i.find(".month-calendar tr").eq(s).find("td").eq(a).addClass("month-selected datepicker-selected")},updateMonthCalendar:function(){var e=this.datepickerInfo.date;this.dom().find(".displayed-year").attr("item-value",e.getFullYear()).find("a").text(e.getFullYear()),this.setSelectMonth(e)},syncYearCalendar:function(e){var t=this.dom(),i=(e||this.datepickerInfo.date).getFullYear()+"",s=i.slice(-1),a=i-s;t.find(".year-calendar-container").remove();var n='<div class="year-calendar-container">';n+="<div>",n+='<table class="calendar-bar-yearslot calendar-head">',n+="<tr>",n+='<th class="prev-yearslot-icon left-icon datepicker-icon">',n+='<a href="javascript:void(0);"><</a>',n+="</th>",n+='<th class="displayed-yearslot calendar-time-th" colspan="2" item-value="'+a+" - "+(a+9)+'">',n+="<span>"+a+" - "+(a+9)+"</span>",n+="</th>",n+='<th class="next-yearslot-icon right-icon datepicker-icon">',n+='<a href="javascript:void(0);">></a>',n+="</th>",n+="</tr>",n+="</table>",n+='<table class="year-calendar calendar-body">',n+="<tr>",n+='<td class="prev-year" item-value="'+(a-=1)+'">',n+="<a>"+a+"</a>",n+="</td>",a+=1;for(var r=1;r<11;r++)n+=i==a?'<td class="current-year year-selected datepicker-selected" item-value="'+a+'">':'<td class="current-year" item-value="'+a+'">',n+="<a>"+a+"</a>",n+="</td>",a+=1,(r+1)%4==0&&(n+="</tr><tr>");n+='<td class="next-year" item-value="'+a+'">',n+="<a>"+a+"</a>",n+="</td>",n+="</tr>",n+="</table>",n+="</div>",n+="</div>",a+=1,t.find(".datepicker-calendar-container").append($(n))},changeYearslot:function(e){var t=this.datepickerInfo.date,i=t.getFullYear(),s=t.getMonth(),a=t.getDate();e.hasClass("prev-yearslot-icon")?i-=10:i+=10;var n=new Date(i,s,a);this.syncYearCalendar(n),this.updateSelectedInfo(n)},selectYear:function(e){var t=this.dom(),i=this.datepickerInfo.date,s=parseInt(e.attr("item-value")),a=new Date(s,i.getMonth(),i.getDate());this.updateSelectedInfo(a),e.hasClass("current-year")?(t.find(".month-calendar-container").show(),t.find(".year-calendar-container").hide(),this.updateMonthCalendar()):this.syncYearCalendar(a)},syncYearslotCalendar:function(){var e=this.dom(),t=this.datepickerInfo.date.getFullYear()+"",i=t.slice(-1),s=t-i,a=s-(s+"").slice(-2)-10,n=s+" - "+(s+9);e.find(".yearslot-calendar-container").remove();var r='<div class="yearslot-calendar-container">';r+="<div>",r+='<table class="calendar-bar-century calendar-head">',r+="<tr>",r+='<th class="prev-century-icon left-icon datepicker-icon">',r+='<a href="javascript:void(0);"><</a>',r+="</th>",r+='<th class="displayed-century calendar-time-th" colspan="2" item-value="'+(a+10)+" - "+(a+109)+'">',r+="<span>"+(a+10)+" - "+(a+109)+"</span>",r+="</th>",r+='<th class="next-century-icon right-icon datepicker-icon">',r+='<a href="javascript:void(0);">></a>',r+="</th>",r+="</tr>",r+="</table>",r+='<table class="yearslot-calendar calendar-body">',r+="<tr>",r+='<td class="prev-yearslot" item-value="'+a+" - "+(a+9)+'">',r+="<a>"+a+" - "+(a+9)+"</a>",r+="</td>",a+=10;for(var o=1;o<11;o++){var d=a+" - "+(a+9);r+=d==n?'<td class="current-yearslot yearslot-selected datepicker-selected" item-value="'+d+'">':'<td class="current-yearslot" item-value="'+d+'">',r+="<a>"+d+"</a>",r+="</td>",(o+1)%4==0&&(r+="</tr><tr>"),a+=10}r+='<td class="next-yearslot" item-value="'+a+" - "+(a+9)+'">',r+="<a>"+a+" - "+(a+9)+"</a>",r+="</td>",r+="</tr>",r+="</table>",r+="</div>",r+="</div>",e.find(".datepicker-calendar-container").append($(r))},selectYearslot:function(e){var t=this.dom(),i=this.datepickerInfo.date,s=e.attr("item-value").split(" - ")[0];s=s-0+((i.getFullYear()+"").slice(-1)-0);var a=new Date(s,i.getMonth(),i.getDate());this.updateSelectedInfo(a),e.hasClass("current-yearslot")?(t.find(".year-calendar-container").show(),t.find(".yearslot-calendar-container").hide(),this.syncYearCalendar()):this.syncYearslotCalendar()},changeCentury:function(e){var t=this.datepickerInfo.date,i=this.dom().find(".displayed-century").attr("item-value").split(" - ")[0];e.hasClass("prev-century-icon")?i-=100:i=i-0+100,i=i-0+((t.getFullYear()+"").slice(-1)-0);var s=new Date(i,t.getMonth(),t.getDate());this.updateSelectedInfo(s),this.syncYearslotCalendar()},getText:function(){return this.dom().find(".display-area").val()},getValue:function(){return this.formatDate(this.datepickerInfo.date)},setValue:function(e){if(e){if("date"===$.type(e))var t=e;else{if("string"!==$.type(e))return;t=this.deformatDate(e)}this.updateCalendar(t),this.updateDateCalendarBar(t),this.setSelectDate(t)}}})}(),function(k){function t(e){var t=e.toString();return(1===t.length?"0"+e:t)+":00"}function i(e){var t=e%12;return(0===t?12:t)+(1<=e/12&&e/12<2?" PM":" AM")}function T(e,t,i,s){var a=s(t)+" - "+s(i),n="<div class='time-range' data-week='"+e+"' data-start='"+t+"' data-end='"+i+"'>";return n+="<span class='week'>"+c[e]+"</span>",n+="<span class='hour'>"+a+"</span>",n+="<span class='del-icon'></span>",n+="</div>"}function I(e,t,i,s,a){var n=s(t)+" - "+s(i);e.find(".hour").text(n),e.attr("data-start",t).attr("data-end",i),a&&(e.find(".week").text(c[a]),e.attr("data-week",a))}function O(e,t,i,s){return!(t<i||s<e)}function v(e){for(var t,i,s,a={},n=e.length;n--;)a[(s=e[n].data()).week]||(a[s.week]=[]),a[s.week].push(s.timeStart);for(var r in a)t=Math.min.apply(null,a[r]),i=Math.max.apply(null,a[r]),a[r]=[t,i+1];return a}var c={"mon":k.su.CHAR.DATEPICKER.MONDAY,"tue":k.su.CHAR.DATEPICKER.TUESDAY,"wed":k.su.CHAR.DATEPICKER.WEDNESDAY,"thu":k.su.CHAR.DATEPICKER.THURSDAY,"fri":k.su.CHAR.DATEPICKER.FRIDAY,"sat":k.su.CHAR.DATEPICKER.SATURDAY,"sun":k.su.CHAR.DATEPICKER.SUNDAY},V=["sun","mon","tue","wed","thu","fri","sat"],y=JSON.stringify({"sun":[],"mon":[],"tue":[],"wed":[],"thu":[],"fri":[],"sat":[]});k.su.Widget.register("timepicker",{settings:{viewOnly:{attribute:"view-only",defaultValue:!1},showLegend:{attribute:"show-legend",defaultValue:!0},selLegendText:{attribute:"selected-legend",defaultValue:""},deselLegendText:{attribute:"deselected-legend",defaultValue:""},is24:{attribute:"is-24",defaultValue:!0}},listeners:[{selector:"div.btn-sel",event:"click",callback:function(e,t){if(e.preventDefault(),e.stopPropagation(),!t.settings.viewOnly&&!t.getContainer().hasClass("disabled")){var i;if(t.dom().find(".btn-sel").hasClass("sel")){i=JSON.stringify({"mon":[[0,24]],"tue":[[0,24]],"wed":[[0,24]],"thu":[[0,24]],"fri":[[0,24]],"sat":[[0,24]],"sun":[[0,24]]})}else i=y;t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}}},{selector:"div.btn-reset",event:"click",callback:function(e,t){if(e.preventDefault(),e.stopPropagation(),!t.settings.viewOnly&&!t.getContainer().hasClass("disabled")){var i=t.snapshot;i||(i=JSON.stringify({"mon":[],"tue":[],"wed":[],"thu":[],"fri":[],"sat":[],"sun":[]})),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}}},{selector:".time-range .del-icon",event:"click",callback:function(e,t){if(e.preventDefault(),e.stopPropagation(),!t.settings.viewOnly&&!t.getContainer().hasClass("disabled")){for(var i,s=k(this).parent(),a=s.attr("data-week"),n=parseInt(s.attr("data-start")),r=parseInt(s.attr("data-end")),o=JSON.parse(t.getValue()),d=o[a],l=d.length;l--;)if((i=d[l])[0]==n&&i[1]==r){d.splice(l,1);break}t.dom().triggerHandler("ev_view_change",[{"type":"value","value":JSON.stringify(o)}])}}},{selector:".timepicker-picker",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault()}},{selector:"div.timepicker-container-wrap",event:"mousedown touchstart",callback:function(e,p){if("mousedown"==e.type&&e.preventDefault(),e.stopPropagation(),!p.settings.viewOnly&&!p.getContainer().hasClass("disabled")){var t=p.dom(),i="mousedown"==e.type?e.pageX||e.screenX:e.originalEvent.changedTouches[0].pageX;posY="mousedown"==e.type?e.pageY||e.screenY:e.originalEvent.changedTouches[0].pageY;var s=k(this);i-=s.offset().left,posY-=s.offset().top;var a=s.find("div.timepicker-select-wrap");return 0==a.length&&(a=k('<div class="timepicker-select-wrap"></div>'),s.append(a)),a.attr("fl",i),a.attr("ft",posY),a.css({"left":i,"top":posY,"display":"block"}),t.attr("dragFlag",!0),t.on("mousemove touchmove",r).on("mouseup touchend",function f(e){if(e.preventDefault(),e.stopPropagation(),!p.settings.viewOnly&&!p.getContainer().hasClass("disabled")){var t=p.dom(),i=t.find("div.timepicker-select-wrap");if(0<i.length){var o=i.offset().left,d=i.offset().top,l=o+i.width(),c=d+i.height(),s=k(this).find("div.timepicker-picker"),u=!1,h=[];if(0==o&&0==d&&0==l&&0==c)return;if(s.each(function(e,t){var i=k(t),s=i.offset().left,a=i.offset().top,n=s+i.width(),r=a+i.height();(s<=o&&o<=n||o<=s&&n<=l||s<=l&&l<=n)&&(a<=d&&d<=r||d<=a&&r<=c||a<=c&&c<=r)&&(h.push(i),i.hasClass("selected")||(u=!0))}),0<h.length){var a="";if(u){var n=v(h);a=p._getAfterValue(n,"add")}else n=v(h),a=p._getAfterValue(n,"remove");t.triggerHandler("ev_view_change",[{"type":"value","value":a}])}i.css({"display":"none","width":0,"height":0}),t.removeAttr("dragFlag")}t.off("mouseup touchend",f).off("mousemove touchmove",r)}}),!1}function r(e){if("mousemove"==e.type&&e.preventDefault(),e.stopPropagation(),!p.settings.viewOnly&&!p.getContainer().hasClass("disabled")){var t="mousemove"==e.type?e.pageX||e.screenX:e.originalEvent.changedTouches[0].pageX,i="mousemove"==e.type?e.pageY||e.screenY:e.originalEvent.changedTouches[0].pageY,s=k(this);t-=s.offset().left,i-=s.offset().top;var a=p.dom();if(a.attr("dragFlag")){var n=a.find("div.timepicker-select-wrap"),r=parseInt(n.attr("fl"),10),o=parseInt(n.attr("ft"),10),d=t-r;0<d?n.css({"width":d}):(d=Math.abs(d),n.css({"width":d,"left":t}));var l=i-o;0<l?n.css({"height":l}):(l=Math.abs(l),n.css({"height":l,"top":i}))}}}}}],init:function(){this.snapshot=null,this._value="",this.transHour=this.settings.is24?t:i},render:function(){var e=this.dom(),t=this.settings,i=t.viewOnly?" view-only":"";e.addClass(t.cls+"timepicker-container"+i);var s="";s+="<div class='timepicker-layout'>",s+='<div class="canvas">',s+='<div class="timepicker-container-wrap">',s+='<table class="timepicker">',s+="<thead>",s+="<tr>",s+='<th class="fst"></th>';for(var a,n=0,r=V.length;n<r;n++)s+='<th class="week-picker" data-week="'+(a=V[n])+'">'+c[a]+"</th>";s+="</tr>",s+="</thead>",s+="<tbody>";for(var o=0;o<24;o++){s+="<tr>",s+='<td class="fst"><div class="row-picker"></div></td>';for(var d=0;d<7;d++)s+='<td><div data-time-start="'+o+'" data-time-end="'+(o+1)+'" data-week="'+V[d]+'" class="timepicker-picker"></div></td>';s+="</tr>"}s+="</tbody>",s+="</table>",s+="</div>",s+='<div class="x-axis">',s+='<div class="x-axis-wrap">';for(o=0;o<=24;o++)s+="<span>"+this.transHour(o)+"</span>";s+="</div>",s+="</div>",s+='<div class="legend-container">',s+='<span class="icon selected"></span>',s+='<span class="text">'+t.selLegendText+"</span>",null!==t.deselLegendText&&("s"==k.su.widgetSize&&(s+="<br>"),s+='<span class="icon nonselect"></span>',s+='<span class="text">'+t.deselLegendText+"</span>"),s+="</div>",s+="</div>",t.viewOnly||(s+="<div class='timepicker-right'>",s+="<div class='right-btn-container'>",s+='<div widget="button" id="'+this.domId+'-sel-all" class="btn-sel sel" label-field="{false}" text="'+k.su.CHAR.OPERATION.SELECT_ALL+'"></div>',s+='<div widget="button" id="'+this.domId+'-reset" class="btn-reset btn-msg-no" label-field="{false}" text="'+k.su.CHAR.OPERATION.REVERT+'"></div>',s+="</div>",s+="<div class='timepicker-labels su-scroll empty'><div class='empty-note'>"+k.su.CHAR.OPERATION.SELECT_TIME_SLOT+"</div><div class='range-btn-container'></div></div>",s+="</div>",s+="</div>"),s+="</div>",e.append(s);var l=e.find(".right-btn-container").find("div[widget=button]");for(o=0,r=l.length;o<r;o++)new k.su.widgets.button({id:k(l[o])}).render()},enable:function(){var e=this.dom();e.removeClass("disabled"),e.find("a.timepicker-switch, .time-range").removeClass("disabled")},disable:function(){var e=this.dom();e.addClass("disabled"),e.find("a.timepicker-switch, .time-range").addClass("disabled")},setValue:function(e){e=e||y,this._value=e;for(var t,i=JSON.parse(e),s=!0,a=this.dom().find(".btn-sel"),n=a.data("viewObj"),r=V.length;r--;)if(!((t=i[V[r]])&&1===t.length&&0===t[0][0]&&24===t[0][1])){s=!1;break}a.hasClass("sel")&&s?(n.setText(k.su.CHAR.OPERATION.DESELECT_ALL),a.removeClass("sel").addClass("desel")):a.hasClass("desel")&&!s&&(n.setText(k.su.CHAR.OPERATION.SELECT_ALL),a.removeClass("desel").addClass("sel")),this.setStyle(e||y)},setStyle:function(e){var t=this.dom(),i=this.transHour,s=t.find("div.timepicker-picker").removeClass("selected"),a="";e=JSON.parse(e);for(var n,r=0,o=V.length;r<o;r++){var d=e[n=V[r]];if(d)for(var l=s.filter("[data-week="+n+"]"),c=0,u=d.length;c<u;c++){for(var h=d[c],p=h[0],f=h[1],v=p;v<f;v++)l.filter('[data-time-start="'+v+'"]').addClass("selected");a+=T(n,p,f,i)}}var g=t.find(".range-btn-container");g.empty().html(a),0<a.length?g.parent().removeClass("empty"):g.parent().addClass("empty")},getValue:function(){return this._value},setSnapshot:function(e){this.snapshot=e},setIs24:function(e){e=Boolean(e),this.settings.is24=e,this.transHour=e?t:i,(context=this).dom().find(".x-axis-wrap").children().each(function(e,t){k(t).text(context.transHour(e))})},_getAfterValue:function(e,t){var i,s,a,n,r=JSON.parse(this._value||y);if("add"===t)for(var o in e){i=e[o],k.isArray(r[o])||(r[o]=[]),n=r[o];for(var d=[s=i[0],a=i[1]],l=[],c=n.length;c--;)O(p=(h=n[c])[0],f=h[1],s,a)&&(l.push(c),p<d[0]&&(d[0]=p),f>d[1]&&(d[1]=f));if(0===l.length){c=n.length;for(var u=-1;c--;)if(n[c][1]<s){u=c;break}n.splice(u+1,0,d)}else n.splice(l[l.length-1],l.length,d)}else for(var o in e){i=e[o],n=r[o],s=i[0],a=i[1];for(var h,p,f,v=n.length,g=-1;v--;)if(p=(h=n[v])[0],f=h[1],p<=s&&a<=f){g=v;break}0<=g&&(p==s&&f==a?n.splice(g,1):p==s?n[g][0]=a:f==a?n[g][1]=s:n.splice(g,1,[p,s],[a,f]))}for(var m=0,b=V.length,w={};m<b;m++)w[o=V[m]]=r[o]||[];return JSON.stringify(w)},_table2label:function(e,t){var i,s,a,n=this.dom();if("add"===t)for(var r in e){s=(i=e[r])[0],a=i[1],btns=n.find(".time-range[data-week='"+r+"']");for(var o=[s,a],d=[],l=btns.length;l--;)c=k(btns[l]),O(w=parseInt(c.attr("data-start")),y=parseInt(c.attr("data-end")),s,a)&&(d.push(c),w<o[0]&&(o[0]=w),y>o[1]&&(o[1]=y));if(0===d.length){var c,u=null,h=T(r,s,a,this.transHour);for(l=btns.length;l--;)if((c=k(btns[l])).attr("data-end")<s){u=c;break}var p=V.indexOf(r);if(null===u&&1<p){for(var f=V.slice(0,p),v=f.length;v--;)f[v]=".time-range[data-week='"+f[v]+"']";var g=n.find(f.join(","));u=0<g.length?g.last():null}null!==u?k(h).insertAfter(u):n.find(".range-btn-container").prepend(h)}else{I(d[0],o[0],o[1],this.transHour);for(var m=d.length;1<m--;)d[m].remove()}}else if("remove"===t)for(var r in e){s=(i=e[r])[0],a=i[1],btns=n.find(".time-range[data-week='"+r+"']");for(var b,w,y,x,_=btns.length;_--;)if(b=k(btns[_]),w=parseInt(b.attr("data-start")),y=parseInt(b.attr("data-end")),w<=s&&a<=y){x=b;break}x&&(w==s&&y==a?x.remove():w==s?I(x,a,y,this.transHour):(I(x,w,s,this.transHour),y!=a&&k(T(r,a,y,this.transHour)).insertAfter(x)))}var C=n.find(".range-btn-container");0<C.find(" .time-range").length?C.parent().removeClass("empty"):C.parent().addClass("empty")}})}(jQuery),$.su.Widget.register("fieldset",{settings:{legend:{attribute:"legend",defaultValue:""},disableOnHide:{attribute:"disable-on-hide",defaultValue:!0},enableOnShow:{attribute:"enable-on-show",defaultValue:!0},showValue:{attribute:"show-value",defaultValue:null},enableValue:{attribute:"enable-value",defaultValue:null},parentEnabled:{defaultValue:!0},selfEnabled:{defaultValue:!0},autoExpand:{attribute:"auto-expand",defaultValue:!0}},listeners:[{selector:"div.legend",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var i=t.getContainer();i.hasClass("expand")?i.removeClass("expand").addClass("collapse"):i.hasClass("collapse")?i.removeClass("collapse").addClass("expand"):i.addClass("collapse")}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"fieldset-container"),t.autoExpand?e.addClass("expand"):e.addClass("collapse");var i="";i+='<div class="legend">',i+='<div class="fieldset-img"></div>',i+='<div class="fieldset-text">'+t.legend+"</div>",i+="</div>",i+='<div class="fieldset-content"></div>';var s=e.children("div");e.append(i),e.find("div.fieldset-content").eq(0).append(s);var n=[];!function r(e){for(var t=$(e).children("div"),i=0,s=t.length;i<s;i++)if($(t[i]).attr("widget")){var a={id:$(t[i]).attr("id"),type:$(t[i]).attr("widget")};n.push(a)}else r(t[i])}(e.find("div.fieldset-content").get(0)),this.fields=n},hide:function(e){var t=this.dom(),i=this.settings;"true"!==i.disableOnHide&&!0!==i.disableOnHide||this.disable(),t.stop(!0).hide(),this.setStatus("shown",!1),e&&e.call(t)},show:function(e){var t=this.dom(),i=this.settings;this.setStatus("shown",!0),$.su.isIe?(t.show(),"true"!==i.enableOnShow&&!0!==i.enableOnShow||this.enable(),e&&e()):(t.fadeIn(200,e),"true"!==i.enableOnShow&&!0!==i.enableOnShow||this.enable())},setValue:function(e){var t=this.settings;t.data=e,null!==t.showValue&&(e==t.showValue?this.show():this.hide()),null!==t.enableValue&&(e==t.enableValue?this.enable():this.disable())},getValue:function(){return this.settings.data},disable:function(e,t){var i=this.getContainer(),s=this.fields;!0===e||e===undefined?this.settings.selfEnabled=!1:this.settings.parentEnabled=!1,i.addClass("disabled");for(var a=0,n=s.length;a<n;a++){var r=s[a];if(r){var o=$("#"+r.id);if(r.type,0<o.length)try{o.data("viewObj").disable(!1)}catch(d){}}}t&&t.call(this)},enable:function(e,t){var i=this.getContainer(),s=this.fields;if(!1===e?this.settings.parentEnabled=!0:this.settings.selfEnabled=!0,!1!==this.settings.parentEnabled&&(!1!==this.settings.selfEnabled||!1!==e)){i.removeClass("disabled");for(var a=0,n=s.length;a<n;a++){var r=s[a];if(r){var o=$("#"+r.id);if(r.type,0<o.length)try{o.data("viewObj").enable(!1)}catch(d){}}}this.setStatus("disabled",!1),t&&t.call(this)}},expand:function(e){var t=this.getContainer();e?t.removeClass("collapse").addClass("expand"):t.removeClass("expand").addClass("collapse")},remove:function(){this.dom().remove()}}),$.su.Widget.register("toolTip",{settings:{tipPrefix:{attribute:"tip-prefix",defaultValue:""},tipTitle:{attribute:"tip-title",defaultValue:""},tipText:{attribute:"tip-text",defaultValue:""},tipPosition:{attribute:"tip-position",defaultValue:""},iconCls:{attribute:"icon-cls",defaultValue:""},sizeMapping:{attribute:"size-mapping",defaultValue:{}},globalCls:{attribute:"global-cls",defaultValue:""}},listeners:[{selector:"span.tooltip-icon, div.tip-text-container, span.tooltip-title, span.tooltip-prefix",event:"click",callback:function(e,t){e.stopPropagation(),$("#global-tips-text").hasClass("show")?t.hideTips():t.showTips()}}],init:function(e){$.extend(this.settings,e)},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"tooltip-container");var i="";i+='<div class="widget-wrap-outer tooltip-wrap-outer">',i+='<div class="widget-wrap tooltip-wrap">',i+='<div class="tooltip-icon-container">',i+='<span class="tooltip-icon-mask"></span>',t.tipPrefix&&(i+='<span class="tooltip-prefix">'+t.tipPrefix+"</span>"),i+='<span class="tooltip-icon '+t.iconCls+'"></span>',i+='<span class="tooltip-title">'+t.tipTitle+"</span>",i+="</div>",i+='<div class="tip-text-container">',i+='<div class="tip-text-delta-container">',i+='<span class="icon-delta"></span>',i+="</div>",i+='<div class="tip-text-box">',i+='<p class="tip-text"></p>',i+="</div>",i+="</div>",i+="</div>",i+="</div>",e.append(i);var s=e.find("div.tip-text-container"),a=this.settings.tipText||e.find(".tip-text-content").get(0);s.find("p.tip-text").html(a)},showTips:function(){var t=this,e=$("#global-tips-text");e.attr("data-shown",this.domId),this.settings.globalCls&&e.addClass(this.settings.globalCls),$("div:not(.tooltip-container,.tooltip-container div, .global-tips-text, .global-tips-text div)").off(".toolTip").on("click.toolTip scroll.toolTip",function(e){t.hideTips(),$("div").off(".toolTip")}),e.empty().append(this.dom().find("div.tip-text-container").clone()),$.su.isIe?e.show().addClass("show"):e.fadeIn(150).addClass("show"),this.adjustLayout($.su.widgetSize)},hideTips:function(){var e=this,t=$("#global-tips-text");$.su.isIe?(e.settings.globalCls&&t.removeClass(e.settings.globalCls),t.hide().removeClass("show").attr("data-shown","_hidden_")):t.fadeOut(150,function(){e.settings.globalCls&&t.removeClass(e.settings.globalCls),t.removeClass("show").attr("data-shown","_hidden_")})},adjustLayout:function(e){var t=$("#global-tips-text");if(t.hasClass("show")){e=this.settings.sizeMapping[e]||e;var i=this.settings.tipPosition||{s:"bottom",m:"top",l:"right",xl:"right"}[e];t.css({width:"auto",left:-9999,top:-9999});var s=t.height(),a=t.width();t.removeClass("s m l xl").addClass(e);var n=this.dom(),r=t.find("div.tip-text-container");r.removeClass("top bottom right").addClass(i);var o,d,l,c,u=r.height(),h=r.width(),p=n.find(".tooltip-icon-container"),f=p.offset(),v=p.height(),g=p.width(),m=t.find(".tip-text-delta-container"),b=m.height(),w=m.width(),y=$(n).closest(".panel-container"),x=y.offset();switch(i){case"right":o=f.top-(s-v)/2,d=f.left+g,l=(u-b)/2,c=-w;break;case"top":o=f.top-s,d=f.left-(a-g)/2,l=u,c=(h-w)/2;break;case"bottom":o=f.top+v,d=x.left,l=1-b,c=f.left-x.left+(g-w)/2}m.css({top:l,left:c}),t.css({top:o,left:d}),"top"===i&&(t.css({top:f.top-t.height()}),m.css({top:r.height()})),"s"===e&&t.css({width:y.outerWidth()||$("body").width()-50})}}}),$.su.Widget.register("paragraph",{settings:{text:{attribute:"text",defaultValue:""}},init:function(){},render:function(){var e=this.dom(),t=this.settings,i=t.labelField?"":"label-empty";e.addClass(t.cls+" "+i+" paragraph-container");var s="";t.labelField&&(s+='<div class="widget-fieldlabel-wrap '+t.labelCls+(0==/\S/.test(t.labelField)?" empty":"")+'">',s+='<label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(s+='<span class="widget-separator">'+t.separator+"</span>"),s+="</div>"),s+='<div class="widget-wrap-outer paragraph-wrap-outer">',s+=t.text,s+="</div>",e.html(s)},setText:function(e){var t=this.settings,i=this.getContainer().find("div.paragraph-wrap-outer");e&&(t.text=e,i.html(e))},getText:function(){return this.getContainer().find("div.paragraph-wrap-outer").text()},setStatus:function(e,t){var i=this.getContainer();i.removeClass("error link correct"),i.addClass(e),this.setText(t)},setHtml:function(e){this.dom().find("div.paragraph-wrap-outer").html(e)},hide:function(){this.dom().css("display","none")},show:function(){this.dom().css("display","block")},textAnimate:function(e){var t=this;!1!==e?(clearInterval(this.underTextTimer),this.underTextTimer=setInterval(function(){if(t.dom().is(":visible")){var e=t.getText();/\.\.\.$/.test(e)?e=e.replace(/\.\.\.$/,""):e+=".",t.setText(e)}else clearInterval(t.underTextTimer)},500)):clearInterval(this.underTextTimer)}}),$.su.Widget.register("errortip",{settings:{errorCls:{attribute:"error-cls",defaultValue:""}},listeners:[{selector:"span.widget-error-tips-delta",event:"mouseenter",callback:function(e,t){t.dom().find("div.widget-error-tips-wrap").addClass("hover"),t.animate()}},{selector:"span.widget-error-tips-delta",event:"mouseleave",callback:function(e,t){t.dom().find("div.widget-error-tips-wrap").removeClass("hover")}}],init:function(e){var t=this.dom();switch(e.type){case"errortip":case"fieldset":case"form":case"msg":return!1;case"textbox":case"password":t.addClass("textbox-error-tips");break;case"button":case"checkbox":case"combobox":case"displaylabel":case"radio":t.addClass(e.type+"-error-tips")}},render:function(){var e=this.dom(),t=this.settings;e.append('<span class="widget-error-tips-delta"></span><div class="widget-error-tips-wrap"><span class="widget-error-tips-delta"></span><div class="content error-tips-content"></div></div>'),e.addClass(t.errorCls+" widget-error-tips")},show:function(e){var t=this.dom();t.find("div.widget-error-tips-wrap"),t.find("div.error-tips-content"),""==e||this.animate(e)},showHtml:function(e){var t=this.dom();t.find("div.widget-error-tips-wrap"),t.find("div.error-tips-content"),""==e||this.animate(e,!0)},animate:function(e,t){var i=this.dom(),s=(i.find("div.widget-error-tips-wrap"),i.find("div.error-tips-content"));"string"===$.type(e)&&(t?s.html(e):s.text(e)),i.addClass("show"),$.su.isIe?i.show():i.fadeIn(150)},hide:function(){var e=this.dom();e.find("div.widget-error-tips-wrap"),e.find("div.error-tips-content"),e.removeClass("show").stop(!0).hide()}}),function(s){s.su.Widget.register("status",{settings:{loadingText:{attribute:"loading-text",defaultValue:""},successText:{attribute:"success-text",defaultValue:""},failedText:{attribute:"fail-text",defaultValue:""},showText:{attribute:"show-text",defaultValue:!0}},render:function(){var e=this.settings,t=this.dom();t.addClass("status-container widget-container");var i="";null!==e.labelField&&"false"!==e.labelField&&(i+='<div class="widget-fieldlabel-wrap '+e.labelCls+'">',i+='<label class="widget-fieldlabel status-fieldlabel">'+e.labelField+"</label>",e.labelField&&(i+='<span class="widget-separator">'+e.separator+"</span>"),i+="</div>"),i+='<div class="widget-wrap status-wrap">',i+='<span class="icon"></span>',i+='<span class="text"></span>',i+="</div>",i+="</div>",t.append(s(i)).hide(),e.showText||container.find("span.text").css("display","none"),this.setNormal()},reset:function(){var e=this.dom();e.closest("div.status-container").removeClass("loading failed success normal"),e.find("div.status-wrap span.text").empty()},setNormal:function(e){var t=this.dom();this.reset(),t.addClass("normal"),this.setText(e)},setSuccess:function(e){var t=this.dom();this.reset(),t.addClass("success"),this.setText(e)},setFailed:function(e){var t=this.dom();this.reset(),t.addClass("failed"),this.setText(e)},setLoading:function(e){var t=this.dom();this.reset(),t.addClass("loading"),this.setText(e)},setText:function(e){this.dom().find("div.status-wrap span.text").empty().html(e)}})}(jQuery),$.su.Widget.register("tip",{settings:{},listeners:[{selector:function(){return{parent:"body",target:"[data-tip]"}},event:"mouseenter",callback:function(e,c){null!==c.timer&&(clearTimeout(c.timer),c.timer=null);var u=this;function t(){var e=$.su.escapeHtml($(u).attr("data-tip")),t=$(u).data("tleft"),i=$(u).data("ttop"),s=$(u).data("pointer"),a=$(u).attr("tip-width"),n=$(u).attr("tip-max-width"),r=$(u).attr("tip-wrap"),o="html"===$(u).attr("tip-html"),d="other"===$(u).attr("tip-target"),l="";$(u).attr("tip-class")&&(l=$(u).attr("tip-class").split(" ")),e&&c.setTip($(u),e,{left:t,top:i,pointer:s,width:a,wrap:r,tipClass:l,maxWidth:n,html:o,target:d})}var i=$(this).attr("time-delay");i===undefined?t():c.timer=setTimeout(t,parseInt(i)),$(this).one("mouseleave click",function(){c.removeTip(),clearTimeout(c.timer),c.timer=null}),"close"===$(this).attr("click-operation")&&$(this).off("click").on("click",function(e){c.removeTip(),clearTimeout(c.timer),c.timer=null})}}],init:function(){this.timer=null},render:function(){this.dom().addClass("title-tip"),this.dom().append('<span class="title-tip-text"></span><span class="tip-pointer"></span>')},setTip:function(e,t,i){var s;i.html||i.target||(t=t),s=i.target?$("#"+t):this.dom();var a=e.offset(),n=e.width(),r=e.height(),o="bottom",d=0;if(!i.target&&s.find(".title-tip-text").html(t),s.css({position:"absolute","display":"inline-block","visibility":"hidden","width":i.width||"","white-space":i.wrap||"normal","max-width":i.maxWidth||"auto"}),s.removeClass().addClass("title-tip"),"array"===$.type(i.tipClass))for(var l=0;l<i.tipClass.length;l++)s.addClass(i.tipClass[l]);else"string"===$.type(i.tipClass)&&s.addClass(i.tipClass);i&&i.pointer&&(o=i.pointer);var c=s.outerWidth(),u=s.outerHeight(),h=c/2,p=$("body").width()-a.left-n/2,f=a.left+n/2-c/2;"nowrap"===i.wrap?d=p-h:p<h?i.width?(s.outerWidth(i.width),d=p-h):(c=2*p-2,s.outerWidth(c)):f<=0?d=-f:i.width||s.css("width","");var v=(c-n)/2,g=(u-r)/2;if("bottom"===o&&(i.top===undefined?a.top+e.height():i.top)+10+u>$(window).height()&&(o="top"),s.addClass(o),"bottom"===o?s.css({"visibility":"visible","left":(i.left===undefined?a.left-v:i.left-c/2)+d+"px","top":(i.top===undefined?a.top+e.height():i.top)+10+"px"}):"top"===o?s.css({"visibility":"visible","left":(i.left===undefined?a.left-v:i.left-c/2)+d+"px","top":(i.top===undefined?a.top:i.top)-u-10+"px"}):"left"===o?s.css({"visibility":"visible","left":(i.left===undefined?a.left:i.left)-c-10+"px","top":(i.top===undefined?a.top-g:i.top-u/2)+"px"}):"right"===o&&s.css({"visibility":"visible","left":(i.left===undefined?a.left+v:i.left)+"px","top":(i.top===undefined?a.top-g:i.top-u/2)+"px"}),"nowrap"===i.wrap||d){var m=s.offset(),b=a.left-m.left+n/2;s.find(".tip-pointer").css("left",b)}else"bottom"===o||"top"===o?s.find(".tip-pointer").css({left:"50%",right:""}):"left"===o?s.find(".tip-pointer").css({right:"-5px",left:""}):"right"===o&&s.find(".tip-pointer").css({right:"",left:"-5px"})},setText:function(e,t){("string"===$.type(e)?$("#"+e):$(e)).attr("data-tip",t)},removeTip:function(){this.dom().css("display","none")}}),$.su.Widget.register("grid",{settings:{operation:{attribute:"operation",defaultValue:null},plugins:{attribute:"plugins",defaultValue:""},minLines:{attribute:"min-lines",defaultValue:0},multiSelect:{attribute:"multi-select",defaultValue:!1},selectAll:{attribute:"select-all",defaultValue:!1},selectType:{attribute:"select-type",defaultValue:"row"},xScroll:{attribute:"x-scroll",defaultValue:!1},maxLines:{attribute:"max-lines",defaultValue:!1},showPrompt:{attribute:"show-prompt",defaultValue:!0},configs:{attribute:"configs",defaultValue:null},delAllText:{attribute:"del-all-text",defaultValue:$.su.CHAR.COMMON.DELETE_CONFIRM_CONTENT},maxRulesText:{attribute:"max-rules-text",defaultValue:$.su.CHAR.GRID.MAX_RULES_TIPS},autoMinHeight:{attribute:"auto-min-height",defaultValue:!1}},listeners:[{selector:"td.grid-content-td-check-column label.checkbox-label",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i,s=t.dom(),a=$(this),n=a.closest("tr.grid-content-tr"),r=t.getKeyById(n.attr("id")),o=a.find("input[type=checkbox]");if(!n.hasClass("disabled")){if(!1===t.settings.multiSelect){var d=s.find("tr.grid-content-tr").find("input[type=checkbox]");s.find("tr.grid-content-tr").each(function(){var e=t.getKeyById($(this).attr("id"));$(this).hasClass("selected")&&s.triggerHandler("ev_grid_row_unselected",[e])}),d.each(function(){$(this).prop("checked",!1),$(this).closest("label.checkbox-label").removeClass("checked"),$(this).closest("tr.grid-content-tr").removeClass("selected")}),o.prop("checked",!0),a.addClass("checked"),n.addClass("selected"),t.dom().triggerHandler("ev_grid_row_selected",[r])}else!0===t.settings.multiSelect&&(n.toggleClass("selected"),n.hasClass("selected")?(o.prop("checked",!0),a.addClass("checked"),t.dom().triggerHandler("ev_grid_row_selected",[r])):(o.prop("checked",!1),a.removeClass("checked"),t.dom().triggerHandler("ev_grid_row_unselected",[r])));s.triggerHandler("ev_grid_row_clicked",[r]),t.checkSelected();var l=s.find("tr.grid-content-tr"),c=(a=s.find("tr.grid-header-tr label.checkbox-label")).closest("div.checkbox-group-container");if(0<l.length){for(i=0;i<l.length&&($(l[i]).hasClass("disabled")||$(l[i]).hasClass("selected"));++i);for(i!=l.length&&(c.removeClass("selected"),a.removeClass("checked")),i=0;i<l.length&&($(l[i]).hasClass("disabled")||$(l[i]).hasClass("selected"));++i);i==l.length&&(c.addClass("selected"),a.addClass("checked"))}}}},{selector:"th.grid-header div.checkcolumn label.checkbox-label",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i=t.dom(),s=$(this),a=$(this).closest("div.checkbox-group-container"),n=i.find("tr.grid-content-tr:not(.disabled)");if(n.hasClass("empty"))return!1;a.hasClass("selected")?(a.removeClass("selected"),n.removeClass("selected"),n.find("label.checkbox-label").removeClass("checked"),n.find("input[type=checkbox]").prop("checked",!1),s.find("input[type=checkbox]").prop("checked",!1),s.removeClass("checked"),t.dom().triggerHandler("ev_grid_row_unselected_all",["all"])):(a.addClass("selected"),n.addClass("selected"),n.find("input[type=checkbox]").prop("checked",!0),n.find("label.checkbox-label").addClass("checked"),s.find("input[type=checkbox]").prop("checked",!0),s.addClass("checked"),t.dom().triggerHandler("ev_grid_row_selected_all",["all"])),t.checkSelected()}},{selector:"td.grid-content-td-action-column a, td.custom-action-column a",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i=$(this).closest("tr.grid-content-tr"),s=t.getKeyById(i.attr("id"));$(this).trigger("ev_grid_action_click",[s])}},{selector:"td.grid-content-td",event:"click",callback:function(e,t){e.preventDefault();var i=$(this).parent().attr("data-key");$(e.target).hasClass("grid-content-td")||$(e.target).hasClass("content")?$(this).trigger("ev_grid_td_click",[i]):$(this).trigger("ev_grid_action_click",[i])}},{selector:".grid-content-btn-edit",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i=$(this).closest("tr.grid-content-tr"),s=t.getKeyById(i.attr("id")),a=t.getPlugin("editor");if(a&&!a.isEditing()&&!1!==s&&!i.hasClass("disabled")){var n=$.su.getDefaultEvent(t,function(){a.startEdit(s),t.dom().triggerHandler("ev_grid_edit",[s])});t.dom().triggerHandler("ev_grid_before_edit",[n.ev,s]),n.exe()}}},{selector:".grid-content-btn-delete",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var i=$(this),s=i.closest("tr.grid-content-tr"),a=t.getPlugin("editor"),n=t.getKeyById(s.attr("id"));if(!s.hasClass("disabled")&&!i.hasClass("disabled")&&!1!==n)if(a&&!1!==a.isEditing())a.shake();else{var r=$.su.getDefaultEvent(t,function(){t.dom().triggerHandler("ev_grid_delete",[[n]])});t.dom().triggerHandler("ev_grid_before_item_delete",[r.ev,n]),r.exe()}}},{selector:"",event:"ev_widget_show",callback:function(e,t){t.setGridHeight()}}],init:function(){this.objs={},(this.objs.grid=this).objs.modelMap={};var e=$('<tr id="'+$.su.randomId("trTool")+'"></tr>'),t=$('<td id="'+$.su.randomId("tdTool")+'"></td>');this.objs.row=new $.su.widgets.row({id:e,objs:this.objs}),this.objs.cell=new $.su.widgets.cell({id:t}),this._keys=[],this._renderMap={},this.objs.rows=[]},render:function(){var e=this.dom(),t=this.settings,i=t.configs.columns,s='<style type="text/css" name="column">',a=!1;e.addClass(t.cls+"grid-container");for(var n=this.columnOffset=0,r=i.length;n<r;n++)"row"===t.selectType&&i[n]&&"checkcolumn"===i[n].xtype&&(i.splice(n,1),this.columnOffset-=1),i[n]&&"btn"===i[n].xtype&&(a=!0);a||(i.unshift({width:0,xtype:"btn"}),this.columnOffset+=1);var o="";o+='<div  id="'+this.domId+'-panel" class="grid-panel">',o+='<div class="container widget-container grid-panel-container'+t.cls+'">',o+='<div class="grid-panel-wrap">',o+='<div class="grid-panel-content">',o+='<div class="grid-status-container hidden"></div>',o+='<div class="grid-limit-container hidden"></div>',o+='<div class="grid-panel-tbar-container tbar-container hidden"></div>',o+='<div class="grid-panel-content-container">',o+='<div class="container grid-container">',o+='<div class="scroll-x-container">',o+='<div class="container grid-header-container">',o+='<table border="0" cellspacing="0" cellpadding="0">',o+='<tr class="grid-header-tr">';for(var d=0;d<i.length;d++){var l=i[d];if(l.cls=l.cls||"",l.dataIndex=l.dataIndex||"",!1!==l.colspan){l.width!==undefined&&("number"==typeof l.width&&(l.width=l.width+"px"),s+="div#"+this.domId+" th.grid-header-"+d+",",s+="div#"+this.domId+" td.grid-tool-td-"+d+",",s+="div#"+this.domId+" td.grid-content-td-"+d,s+="{width:"+l.width+";",0===l.width&&(s+="padding: 0;"),s+="}");var c="";switch(l.xtype){case"checkcolumn":!1!==t.selectAll&&(c+='<div class="checkbox-group-container grid-header-checkbox checkcolumn inline">',c+='<div class="widget-wrap">',c+='<label class="checkbox-label">',c+='<input class="checkbox-checkbox" type="checkbox" value=""/>',c+='<span class="icon"></span>',c+="</label>",c+="</div>",c+="</div>"),l.text=l.text||"",l.name=l.name||"select";break;case"rownumberer":l.text=l.text||$.su.CHAR.GRID.ID,l.name=l.name||"seq";break;case"settings":l.text=l.text||$.su.CHAR.GRID.MODIFY,l.name=l.name||"settings";break;case"statuscolumn":l.text=l.text||$.su.CHAR.GRID.STATUS,l.dataIndex=l.dataIndex||"",l.name=l.name||l.dataIndex;break;default:l.text=l.text||"",l.name=l.name||l.dataIndex}if(l.thRenderer)o+=l.thRenderer();else{var u="grid-header-"+(l.xtype||"other")+(l.cls?" "+l.cls:"");o+='<th class="grid-header grid-header-'+d+" "+l.dataIndex+(d==i.length-1?" lst":"")+" "+u+'" '+(l.colspan?'colspan="'+l.colspan+'"':"")+' name="'+l.dataIndex+'">',o+=c,o+='<span class="content '+(l.xtype||"")+'">'+l.text+"</span>",l.tipText&&(o+='<div widget="toolTip" data-index="'+d+'" class="grid-header-toolTip"></div>'),o+="</th>"}}}o+="</tr>",o+="</table>",o+="</div>",o+='<div class="grid-tool-container hidden"></div>',o+='<div class="grid-content-container-outer">',o+='<div class="grid-content-container">',o+='<table border="0" cellspacing="0" cellpadding="0">',o+='<tbody class="grid-content-data">',o+="</tbody>",o+="</table>",o+="</div>",o+="</div>",o+="</div>",o+="</div>",o+="</div>",o+='<div class="grid-panel-fbar-container"></div>',o+="</div>",o+="</div>",o+="</div>",o+="</div>";var h=$(o);if(e.find(".grid-panel, .grid-prompt-msg").remove(),e.append(h),e[0]){this.msgId=e[0].id+"-prompt-msg",this.confirmId=e[0].id+"-confirm-msg",e.append($('<div class="grid-prompt-msg global-alert" widget="msg" type="alert" id = "'+this.msgId+'"></div>')),e.append($('<div class="grid-confirm-msg global-confirm" widget="msg" type="confirm" id = "'+this.confirmId+'"></div>')),s+="</style>",h.prepend($(s)),t.plugins&&this.initPlugins(t.plugins.split("|")),this.initToolTip();var p=e.find("div.grid-header-container>table").outerWidth();if(p&&t.xScroll){var f=e.find(".scroll-x-container");f.css("width",p+10+"px"),f.parent().css("overflow-x","auto")}}},initToolTip:function(){var a=this;this.dom().find("div[widget=toolTip]").each(function(e,t){var i=$(t).attr("data-index"),s=a.settings.configs.columns[i];new $.su.widgets.toolTip({id:$(t),tipText:s.tipText,sizeMapping:{"l":"m","xl":"m"}}).render()})},initPlugins:function(e){var n=this.dom(),r=this,o=this.settings;r.plugins={};for(var t=0,i=(e=$.isArray(e)?e:[e]).length;t<i;t++)s(e[t]);function s(e){var t=$.extend({},o,{objs:r.objs,plugins:r.plugins});switch(e){case"tBar":$.extend(t,{custom:o.configs.tbar});var i=$('<div id="'+r.domId+'_bar" operation="'+o.operation+'"></div>').appendTo(n);r.plugins.tBar=new $.su.widgets.tBar($.extend(t,{id:i})),r.plugins.tBar.render();break;case"rowEditor":var s=$('<div id="'+r.domId+'_tr_editor"></div>').appendTo(n);r.plugins.rowEditor=new $.su.widgets.rowEditor($.extend(t,{id:s})),r.plugins.rowEditor.render();break;default:var a=$('<div id="'+r.domId+"_"+e+'"></div>').appendTo(n);$.su.widgets[e]&&(r.plugins[e]=new $.su.widgets[e]($.extend(t,{id:a})),r.plugins[e].render())}}},getValue:function(){return this.objs.rows},setValue:function(){return 0},syncData:function(e,t){var i=this.dom(),s=this.getPlugin("paging");if(this.objs.rows=[],this.objs.modelMap={},this._keys=e,this._renderMap={},s?(s.updateRowPage(e),s.updateBtns(e)):i.triggerHandler("ev_store_render_items",[e]),this.settings.autoMinHeight&&(i.css("min-height",0),i.css("min-height",i.outerHeight())),$.su.isIe){var a=this.dom().find("table");a.css("display","inline-table"),setTimeout(function(){a.css("display","")},0)}},renderModels:function(e,t,i){for(var s,a=this,n=this.settings,r="",o=[],d=$.extend({},n,{objs:a.objs}),l=this.dom().find("tbody.grid-content-data").eq(0),c=[],u=a.getPlugin("paging"),h=u?u._pageMap:{},p=0,f=t.length;p<f;p++){var v=t[p][e].getValue();a.objs.modelMap[v]=t[p],s=a.objs.row.initRow(v,d),o.push(s),this._renderMap[v]=!0,r+=s.domContent}if(u){if(0<t.length){var g=t[0][e].getValue(),m=$.inArray(g,this._keys);if(-1!==m)if(0===m)l.prepend(r);else{for(var b,w=m-1;0<=w;w--)if(this._renderMap[this._keys[w]]){b=this._keys[w];break}b?l.find('tr[data-key="'+b+'"]').after(r):l.prepend(r)}}}else l.prepend(r);for(var y=0,x=o.length;y<x;y++){var _=o[y].domId,C=o[y].key,k=new $.su.widgets.row({id:_}),T=o[y].settings.cellObjs;u&&k.dom().attr("data-page",h[C]),$.extend(k,o[y]),a.objs.rows.push({key:C,obj:k}),c.push({key:C,obj:k});for(var I=0,O=T.length;I<O;I++){var V=T[I].domId,A=new $.su.widgets.cell({id:V});$.extend(A,T[I]),T[I].callback&&T[I].callback.call(A),k.cells.push(A)}}for(var j=0;j<c.length;j++){var M=c[j].obj;e=c[j].key,M&&M.dom().find("span.grid-row-numberer").html($.inArray(e,this._keys)+1)}this.settings.operation&&-1!==this.settings.operation.indexOf("columns")&&this.objs.tool.renderDefaultCol(this),this.updateRowNumber(),i(c)},addItem:function(e){this._keys.push(e);var t=this.getPlugin("paging");t?(t.updateRowPage(this._keys),t.updateBtns()):this.dom().triggerHandler("ev_store_render_items",[[e]])},deleteItem:function(e){var t=$.inArray(e,this._keys);if(0<=t){this._keys.splice(t,1),this.remove(e);var i=this.getPlugin("paging");i&&(i.updateRowPage(this._keys),i.updateBtns())}},createRow:function(e,t){var i=this,s=this.settings,a={},n=$.extend({},s,{objs:i.objs}),r={},o=i.dom().find("tbody.grid-content-data").eq(0);r[e]=[],i.objs.cells=r,i.objs.modelMap[e]=t,this._keys.push(e),a.key=e;var d=i.objs.row.initRow(e,n);o.append(d.domContent),a.obj=new $.su.widgets.row({id:d.domId}),$.extend(a.obj,d);for(var l=0,c=d.settings.cellObjs.length;l<c;l++){var u=d.settings.cellObjs[l],h=u.domId,p=new $.su.widgets.cell({id:h});$.extend(p,u),u.callback&&u.callback.call(p),a.obj.cells.push(p)}i.objs.rows.push(a),this._renderMap[e]=!0,i.updateRowNumber();var f=this.getPlugin("paging");return f&&(f.updateRowPage(this._keys),f.updateBtns()),i.dom().triggerHandler("ev_grid_row_created",[i.objs.rows]),a.obj},updateRowNumber:function(){0<this.dom().length&&this.updateRow()},updateRow:function(){var e,t=this.dom(),i=t.find("tbody.grid-content-data"),s=t.find("th.grid-header div.checkcolumn label.checkbox-label"),a=s.closest("div.checkbox-group-container");this.getPlugin("toolRow");var n=this.objs.rows,r=n.length;if(0==r){if(0===i.find("tr.grid-content-tr.empty").length){var o=this.objs.row.initEmptyRow(this.getColumns().length,this);return i.append(o),a.removeClass("selected"),s.removeClass("checked"),this.setGridHeight(),void this.checkSelected()}}else t.find(".grid-content-tr.empty").remove();for(e=0;e<r;e++){var d=n[e].obj,l=n[e].key;d&&d.dom().find("span.grid-row-numberer").html($.inArray(l,this._keys)+1)}var c=t.find("tr.grid-content-tr:not(.disabled)");if(0<c.length){for(e=0;e<c.length&&($(c[e]).hasClass("disabled")||$(c[e]).hasClass("selected"));++e);for(e!=c.length&&(a.removeClass("selected"),s.removeClass("checked")),e=0;e<c.length&&($(c[e]).hasClass("disabled")||$(c[e]).hasClass("selected"));++e);e==c.length&&(a.addClass("selected"),s.addClass("checked"))}this.setGridHeight(),this.checkSelected()},setGridHeight:function(){var e=this.settings,t=this.getContainer(),i=t.find(".grid-content-container")[0],s=i.scrollTop;0<t.find("style[name=grid]").length&&t.find("style[name=grid]").remove();var a='<style type="text/css" name="grid">';a+="div#"+this.domId+" div.grid-content-container{";for(var n=t.find("tr.grid-content-tr"),r=null,o=0,d=n.length;o<d;o++){for(var l=n.eq(o),c=l.find("td"),u=!1,h=0,p=c.length;h<p;h++)if(1<c.eq(h).attr("rowspan")){u=!0;break}if(!u){r=l;break}}var f=0;r&&(f=r.outerHeight()),e.minLines&&(a+="min-height:"+e.minLines*f+"px;"),e.maxLines&&(a+="max-height:"+e.maxLines*f+"px;",t.hasClass("allow-scroll")||$.su.scrollbar({ele:i}),t.addClass("allow-scroll")),a+="}",a+="</style>",t.prepend($(a)),i.scrollTop=s,$(i).height()<$(i).find("table").height()?this._resetWidth||($(i).width(),$(i).children("table").width(),this._resetWidth=!0):this._resetWidth&&(this._resetWidth=!1)},setGridColumnName:function(e){var t=this.dom(),i=this.settings.configs.columns;if($.isArray(e))for(var s=0,a=e.length;s<a;s++){var n=parseInt(e[s].index)+this.columnOffset,r=e[s].text,o=t.find(".grid-header-container th").get(n);o&&$(o).find("span.content").text(r),i[n].text=r}},reRenderColumn:function(e){for(var t=this.objs.rows,i=this.objs.modelMap,s=0,a=t.length;s<a;s++)for(var n=t[s].key,r=t[s].obj.cells,o=i[n].getData()[e],d=0,l=r.length;d<l;d++)r[d].field===e&&r[d].setValue(o)},getKeys:function(){var e=[],t=this.objs.modelMap;for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},getRow:function(e){var t=this.objs.rows;if(e===undefined)return t;for(var i=0,s=t.length;i<s;i++)if(e===t[i].key)return t[i].obj;return!1},getRows:function(){for(var e=this.objs.rows,t=[],i=0,s=e.length;i<s;i++)t.push(e[i].obj);return t},getPlugin:function(e){var t=this.settings.plugins.split("|");if("editor"===e){if(-1!==$.inArray("editor",t))return this.plugins["editor"];if(-1!==$.inArray("rowEditor",t))return this.plugins["rowEditor"];if(-1!==$.inArray("popEditor",t))return this.plugins["popEditor"]}return-1!==$.inArray(e,t)&&this.plugins[e]},getColumns:function(){return this.settings.configs.columns},getSelected:function(){var n=this,e=this.dom().find("tr.grid-content-tr.selected"),r=[];return e.each(function(e,t){var i=$(t);if(!i.hasClass("empty")&&!i.hasClass("disabled")){var s=i.attr("id"),a=n.getKeyById(s);r.push(a)}}),r},checkSelected:function(){var e=this,t=this.getSelected(),i=this.getPlugin("tBar");i&&(0===t.length?i.disable(["delete","edit"]):1===t.length?i.enable(["delete","edit"]):1<t.length&&(i.disable("edit"),i.enable("delete"))),clearTimeout(this._checkStatusEvent),this._checkStatusEvent=setTimeout(function(){e.dom().triggerHandler("ev_grid_check_status")},10)},setSelected:function(e){var t=this.dom(),i=this.getSelected();e===undefined&&(e=this._keys);for(var s=0,a=(e=$.isArray(e)?e:[e]).length;s<a;s++)-1===$.inArray(e[s],i)&&t.find('tr.grid-content-tr[data-key="'+e[s]+'"]').find("label.checkbox-label").trigger("click")},setUnselected:function(e){var t=this.dom(),i=this.getSelected();e===undefined&&(e=this._keys);for(var s=0,a=(e=$.isArray(e)?e:[e]).length;s<a;s++)-1!==$.inArray(e[s],i)&&t.find('tr.grid-content-tr[data-key="'+e[s]+'"]').find("label.checkbox-label").trigger("click")},getDisplay:function(){var e=this.dom().find("input.grid-display");return 0<e.length?e:null},search:function(e){if(!e)return null},updateRowId:function(){this.dom().find("tbody.grid-content-data tr.grid-content-tr").each(function(e,t){$(t).find("span.grid-row-numberer").text(e+1)})},moveItem:function(e,t){var i=this.dom(),s=i.find("tr.grid-content-tr[data-key="+e+"]");if(s.index()!==t){var a=i.find("tbody.grid-content-data tr.grid-content-tr").get(t);$(a).before(s);var n=$.inArray(e,this._keys);this._keys.splice(n,1),this._keys.splice(t,0,e),this.updateRowId();var r=this.getPlugin("paging");r&&(r.updateRowPage(this._keys),r.updateBtns())}},runProgress:function(){var e=this.getPlugin("tBar").dom().find("div.gird-prompt-progressbar"),t=e.find("div.progressbar-value");t.stop(),t.css("width","0px"),e.clearQueue().fadeIn(100,function(){t.animate({width:"50%"},5e3)})},prompt:function(e){var t=$("#"+this.msgId);if(t.data("viewObj"))return t.data("viewObj").setContent(e),t.data("viewObj").show(),t.data("viewObj");var i=new $.su.widgets.msg({id:this.msgId});return i.render(),i._gridObj=this,i.setContent(e),i.show(),i},confirm:function(e){var t=$("#"+this.confirmId);if(t.data("viewObj"))return t.data("viewObj").setContent(e),t.data("viewObj").show(),t.data("viewObj");var i=new $.su.widgets.msg({id:this.confirmId});return i.render(),i._gridObj=this,i.setContent(e),i.show(),i},insert:function(e,t){var i=this.dom(),s=this.settings,a=i.find("tbody.grid-content-data");e=parseInt(e,10)||0,t=t||[{}],$.isArray(t)||(t=[t]),t.reverse();for(var n=0,r=t.length;n<r;n++){var o=s.row.initRow(e+n,t[n]);0==e?a.prepend(o):o.insertBefore(this.objs.rows[e]),this.objs.rows.splice(e,0,o)}this.updateRowNumber(),i.triggerHandler("ev_insert",[e,t])},remove:function(e){var t,i,s=this.objs.rows;if(e){for(t=s.length-1;0<=t;t--)s[t].key===e&&(0<(n=s[t].obj.dom().closest(".row-merge-tr")).length&&1==n.find(".grid-content-tr").length?n.remove():s[t].obj.dom().remove(),s.splice(t,1));delete this.objs.modelMap[e];var a=$.inArray(e,this._keys);0<=a&&this._keys.splice(a,1)}else{for(t=0,i=s.length;t<i;t++){var n;0<(n=s[t].obj.dom().closest(".row-merge-tr")).length&&1==n.find(".grid-content-tr").length?n.remove():s[t].obj.dom().remove()}s.length=0,this.objs.modelMap=[],this._keys=[]}this.updateRowNumber();var r=this.getPlugin("paging");r&&(r.updateRowPage(this._keys),r.updateBtns())},getEditStatus:function(){var e=this.getPlugin("editor");return e.isEditing()?""===e.getEditingId()?0:"add"===e.getEditingId()?2:1:0},getKeyById:function(e){for(var t=this.objs.rows,i=0,s=t.length;i<s;i++)if(e===t[i].obj.domId)return t[i].key;return!1},rowSpan:function(e,t){var i=this.dom(),s={};if(t===undefined)s["0"]=this.objs.rows.length;else for(var a=0,n=t.length;a<n;a++){var r=t[a];s[r[0]]=r.length}i.find("td.grid-content-td-"+e).each(function(e,t){$(t).show(),s[e]?$(t).attr("rowspan",s[e]):$(t).hide()})},rowMerge:function(e){var i,t=this.dom();if($.isArray(e)){for(var s=0;s<e.length;s++){var a=e[s],n="";if($.isArray(a)&&1<a.length){for(var r=0;r<a.length;r++)n+="tr.grid-content-tr:eq("+a[r]+"),";n=n.slice(0,n.length-1);var o=t.find(n);i=i||o.eq(0).children(".grid-content-td").length,o.wrapAll("<tr class='row-merge-tr'><td class='row-merge-td' colspan='"+i+"'><table class='row-merge-table'></table></td></tr>")}}t.find(".grid-content-data").children("tr.grid-content-tr").each(function(e,t){i=i||$(this).children(".grid-content-td").length,$(this).wrap("<tr class='row-merge-tr'><td class='row-merge-td' colspan='"+i+"'><table class='row-merge-table'></table></td></tr>")})}},colSpan:function(e,t){var i=this.dom(),s={},a=[],n=[];if(t===undefined)for(var r=0,o=this.objs.rows.length;r<o;r++)a.push(this.objs.rows[r].key);else a=$.isArray(t)?t:[t];for(var d=0,l=e.length;d<l;d++){var c=e[d];s[c[0]]=c.length,n=n.concat(c.slice(1))}for(var u=0,h=a.length;u<h;u++){var p=i.find('tr.grid-content-tr[data-key="'+a[u]+'"]');0<p.length&&p.find("td.grid-content-td").each(function(e,t){var i=$(t).attr("name");"btn-column"!==i&&($(t).show(),s[i]?$(t).attr("colspan",s[i]):(-1!==$.inArray(i,n)&&$(t).hide(),$(t).removeAttr("colspan")))})}},enableColumn:function(e){var t="td.grid-content-td-"+e;this.dom().find(t).removeClass("disabled")},disableColumn:function(e){var t="td.grid-content-td-"+e;this.dom().find(t).addClass("disabled")},showColumn:function(e){this.dom().find("div.grid-container").children("style.column-hide-style[data-index="+e+"]").remove()},hideColumn:function(e){var t="",i="#"+this.domId+" ";t+='<style class="column-hide-style" data-index="'+e+'">',t+=i+"th.grid-header."+e+", ",t+=i+"td.grid-content-td-"+e+", ",t+=i+"td.grid-tool-td-"+e,t+="{display: none;}</style>",this.dom().find("div.grid-container").append(t)},setMaxRules:function(e,t,i){t=t||!1,i=i||this.settings.maxRulesText,e=parseInt(e,10),(isNaN(e)||e<=0)&&(e=0,t=!1);var s=this.dom().find("div.grid-limit-container"),a="";a+='<div class="grid-limit-bar-container">',a+="<span>"+$.su.CHAR.GRID.MAX_LIMIT+': <span class="limit-num"></span></span>',a+="</div>",s.append(a),"object"!==$.type(this.objs.maxRulesObj)&&(this.objs.maxRulesObj={}),this.objs.maxRulesObj.maxRules=e,this.objs.maxRulesObj.errorText=i,s.find(".limit-num").text(this.objs.maxRulesObj.maxRules),t?s.removeClass("hidden"):s.addClass("hidden")},getMaxRules:function(){return"object"!==$.type(this.objs.maxRulesObj)?0:this.objs.maxRulesObj.maxRules||0},isExceeded:function(){return 0<this.getMaxRules()&&this.objs.grid.dataBind[0].getSize()>=this.getMaxRules()},showMaxRulesWarning:function(){this.prompt(this.objs.maxRulesObj.errorText)},destroy:function(){var e=$("#"+this.msgId).data("viewObj"),t=$("#"+this.confirmId).data("viewObj"),i=this.getPlugin("popEditor");e&&e.destroy(),t&&t.destroy(),i&&i.destroy()}}),$.su.Widget.register("tBar",{settings:{operation:{attribute:"operation",defaultValue:""}},listeners:[{selector:"a.btn-add",event:"click",callback:function(e,t){if(e.stopPropagation(),e.preventDefault(),!$(this).hasClass("disabled")){var i=t.settings,s=i.objs.grid;if(s.isExceeded())s.showMaxRulesWarning();else{var a=s.getPlugin("editor");if(a&&!$(this).hasClass("disabled")&&("function"!=$.type(i.beforeStartAdd)||i.beforeStartAdd())&&!1===a.isEditing()){var n=i.configs.paging,r=s.plugins.paging,o=$.su.getDefaultEvent(t,function(){n&&n.isPaging&&r.goToPage(0),a.startEdit("add"),s.dom().triggerHandler("ev_grid_edit",["add"])});s.dom().triggerHandler("ev_grid_before_edit",[o.ev]),o.exe()}}}}},{selector:"a.btn-delete",event:"click",callback:function(e,s){e.stopPropagation(),e.preventDefault();var a=s.settings.objs.grid,n=a.getPlugin("paging"),r=a.objs.rows,t=a.getPlugin("editor"),o=a.getSelected();$(this).hasClass("disabled")||t&&!1===t.isEditing()&&(a.confirm($.su.CHAR.COMMON.DELETE_CONFIRM_CONTENT),$("#"+a.confirmId).one("ev_msg_ok",function(){for(var e=r.length-1;0<=e;e--){var t=r[e].obj;-1!==$.inArray(t.dom().attr("data-key"),o)&&(t.dom().remove(),r.splice(e,1))}a.updateRowNumber(),n&&n.updateBtns();var i=$.su.getDefaultEvent(s,function(){a.dom().triggerHandler("ev_grid_delete",[o])});a.dom().triggerHandler("ev_grid_before_delete",[i.ev]),i.exe(),a.dom().triggerHandler("ev_grid_after_delete"),$(this).off("ev_msg_no")}).one("ev_msg_no",function(){$(this).off("ev_msg_ok")}))}},{selector:"a.btn-edit",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i=t.settings.objs.grid,s=i.getSelected(),a=i.getPlugin("editor");a&&!$(this).hasClass("disabled")&&0<s.length&&a&&!a.isEditing()&&(a.startEdit(s[0]),i.dom().triggerHandler("ev_grid_edit",[s[0]]))}},{selector:"a.btn-delete-all",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i=t.settings.objs.grid,s=i.getPlugin("editor");if(s&&!1===s.isEditing()){for(var a=[],n=i.getPlugin("paging"),r=i.objs.rows,o=r.length-1;0<=o;o--)a.push(r[o].key),r[o].obj.dom().remove(),r.splice(o,1);i.updateRowNumber(),n&&n.updateBtns(),i.dom().triggerHandler("ev_grid_delete",[a])}}},{selector:"a.btn-clear",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i=t.settings,s=i.objs.grid,a=s.getPlugin("editor");s.confirm(i.delAllText).dom().off("ev_msg_ok").on("ev_msg_ok",function(){a&&!1===a.isEditing()&&s.dom().triggerHandler("ev_grid_delete_all")})}},{selector:"input.search-text",event:"focus",callback:function(e){e.stopPropagation(),$(this).closest("div.search-container").addClass("focus")}},{selector:"input.search-text",event:"blur",callback:function(e){e.stopPropagation(),$("div.search-container").removeClass("focus")}},{selector:"a.operation-btn",event:"click",callback:function(e,t){if(e.preventDefault(),e.stopPropagation(),!$(this).hasClass("disabled")){var i=t.settings.objs.grid;if(!i.isExceeded()||$(this).hasClass("btn-refresh")){var s=$(this).attr("tbar-name");i.dom().triggerHandler("ev_grid_tbar_"+s)}else i.showMaxRulesWarning()}}},{selector:"a.search-switch",event:"click",callback:function(e,t){e.stopPropagation();var i=t.settings.objs.grid,s=$(this).prevAll("input.search-text").val();i.search(s)}}],init:function(e){this.settings=e},render:function(){var e=this.dom(),t=e.parent().find("div.grid-panel-tbar-container"),i=this.settings,s=$.type(i.operation),a=[];if(i.objs.grid.dom().addClass("grid-tbar"),"string"===s)a=i.operation.split("|");else if("array"===s)a=i.operation;else if(!i.custom)return null;i.operation=a,t.removeClass("hidden");for(var n='<div class="operation-container" id="'+this.domId+'">',r=0,o=a.length;r<o;r++){var d=0===r?"fst":"",l=r===o-1?"lst":"";switch(a[r]){case"add":n+='<a href="javascript:void(0);" tbar-name="add" class="operation-btn btn-add '+d+" "+l+'">',n+='<span class="icon"></span>',n+='<span class="text">'+$.su.CHAR.OPERATION.ADD+"</span>",n+="</a>",i.maxRulesMsgText;break;case"edit":n+='<a href="javascript:void(0);" tbar-name="edit" class="operation-btn btn-edit '+d+" "+l+'">',n+='<span class="icon"></span>',n+='<span class="text">'+$.su.CHAR.OPERATION.EDIT+"</span>",n+="</a>";break;case"prompt":n+='<div class="grid-prompt hidden widget-container successed inline-block left">',n+='<div class="content">',n+='<span class="icon"></span>',n+='<span class="text text-successed">'+i.promptTextSuccessed+"</span>",n+='<span class="text text-failed">'+i.promptTextFailed+"</span>",n+="</div>",n+="</div>",i.showPrompt=!0;break;case"delete":n+='<a href="javascript:void(0);" tbar-name="delete" class="operation-btn btn-delete '+d+" "+l+'">',n+='<span class="icon"></span>',n+='<span class="text">'+$.su.CHAR.OPERATION.DELETE+"</span>",n+="</a>",i.noneSelectedMsgText,i.deleteConfirmMsgText;break;case"deleteAll":n+='<a href="javascript:void(0);" tbar-name="deleteAll" class="operation-btn btn-delete-all '+d+" "+l+'">',n+='<span class="icon"></span>',n+='<span class="text">'+$.su.CHAR.OPERATION.DELETE_ALL+"</span>",n+="</a>",i.noneSelectedMsgText,i.deleteAllConfirmMsgText;break;case"clear":n+='<a href="javascript:void(0);" tbar-name="clear" class="operation-btn btn-clear '+d+" "+l+'">',n+='<span class="icon"></span>',n+='<span class="text">'+$.su.CHAR.OPERATION.DELETE_ALL+"</span>",n+="</a>";break;case"enable":n+='<a href="javascript:void(0);" tbar-name="enable" class="operation-btn btn-enable '+d+" "+l+'">',n+='<span class="icon"></span>',n+='<span class="text">'+$.su.CHAR.OPERATION.ENABLE+"</span>",n+="</a>";break;case"disable":n+='<a href="javascript:void(0);" tbar-name="disable" class="operation-btn btn-disable '+d+" "+l+'">',n+='<span class="icon"></span>',n+='<span class="text">'+$.su.CHAR.OPERATION.DISABLE+"</span>",n+="</a>";break;case"search":n+='<div class="container widget-container text-container search-container inline">',n+='<span class="widget-wrap text-wrap search-wrap">',n+='<input type="text" class="text-text search-text" value="'+$.su.CHAR.OPERATION.SEARCH+'" />',n+='<span class="pos"></span>',n+='<a href="javascript:void(0);" class="search-switch"></a>',n+="</span>",n+="</div>";break;case"refresh":n+='<a href="javascript:void(0);" tbar-name="refresh" class="operation-btn btn-refresh '+d+" "+l+'">',n+='<span class="icon"></span>',n+='<span class="text">'+$.su.CHAR.OPERATION.REFRESH+"</span>",n+="</a>";break;default:var c=a[r].xtype;c&&(n+='<input operation-index="'+r+'" class="operation-user-defined operation-'+r+" "+d+" "+l+" "+c+'"/>')}}n+="</div>";var u=$(n);for(var h in t.append(u),e.remove(),this.settings.custom)if(this.settings.custom.hasOwnProperty(h)){var p=this.settings.custom[h],f='<a href="javascript:void(0);" tbar-name="'+h+'" class="operation-btn btn-'+h+" "+p.cls+'">';if(f+='<span class="icon"></span>',f+='<span class="text">'+p.text+"</span>",f+="</a>",p.index!==undefined){var v=this.dom().children();0===p.index?this.dom().prepend($(f)):p.index<=v.length?$(v.get(p.index-1)).after($(f)):this.dom().append($(f))}else this.dom().append($(f))}this.disable(["delete","edit"])},disable:function(e){$.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;t++){var s=".operation-btn.btn-"+e[t];this.dom().find(s).addClass("disabled")}},enable:function(e){$.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;t++){var s=".operation-btn.btn-"+e[t];this.dom().find(s).removeClass("disabled")}}}),$.su.Widget.register("row",{settings:{},init:function(e){this.objs=e.objs,this.cells=[]},render:function(){},initRow:function(e,t){for(var i=t.configs.columns,s={inited:!0,columns:i,objs:t.objs,cells:[],cellObjs:[]},a=t.objs.modelMap[e].selected,n=i.length,r=(s.objs.grid.dom().find("tbody.grid-content-data").eq(0),{domId:s.objs.grid.domId+"_tr_"+$.appUtils.keyHandler(e),key:e,domContent:""}),o="",d=0;d<n;d++)s.cellObjs[d]=s.objs.cell.initCell(e,d,t),o+=s.cellObjs[d].domContent;return o+="<td class='ghost-td'><div class='head'></div><div class='foot'></div></td>",r.domContent='<tr id="'+r.domId+'" class="grid-content-tr '+(a?"selected":"")+" grid-content-tr-"+$.appUtils.keyHandler(e)+'" data-key="'+e+'">'+o+"</tr>",r.settings=s,r},getAllFields:function(){return this.cells},initEmptyRow:function(e,t){this.objs.grid.columnOffset!==undefined&&this.objs.grid.columnOffset;var i='<tr class="grid-content-tr empty">';return t.dom().find("tr.grid-header-tr th"),i+='<td colspan="'+e+'">'+$.su.CHAR.COMMON.NO_ENTRY+"</td>",i+='<td class="ghost-td"><div class="head"></div><div class="foot"></div></td>',i+="</tr>",$(i)},disableRow:function(e){var t=this.dom(),i=this.settings.columns,s=t;if(s){s.addClass("disabled");for(var a=0,n=i.length;a<n;a++){var r=i[a],o=r.items;if("actioncolumn"===r.xtype)for(var d=0,l=o.length;d<l;d++){var c=o[d].xtype,u=r.dataIndex,h=s.find("input[data-property="+u+"][data-type="+c+"]");h&&"function"==$.type(h[c])&&h[c]("disable")}else if(e&&"customWidget"===r.xtype){var p=s.find("[widget="+r.widgetName+"]"),f=0<p.length&&p.data("viewObj");f&&f.disable()}}}},enableRow:function(){var e=this.dom(),t=this.settings.columns,i=e;if(i){i.removeClass("disabled");for(var s=0,a=t.length;s<a;s++){var n=t[s],r=n.items;if("actioncolumn"===n.xtype&&r)for(var o=0,d=r.length;o<d;o++){var l=r[o].xtype,c=n.dataIndex,u=i.find("input[data-property="+c+"][data-type="+l+"]");u&&"function"==$.type(u[l])&&u[l]("enable")}else if("customWidget"===n.xtype){var h=i.find("[widget="+n.widgetName+"]"),p=0<h.length&&h.data("viewObj");p&&p.enable()}}}}}),$.su.Widget.register("cell",{settings:{},init:function(){},render:function(){},initCell:function(e,t,i){var s={rowKey:e,columns:i.configs.columns,cellId:t,objs:i.objs},a=function(e){return e===undefined||null===e||""===e?"---":e},n=i.objs.modelMap[e].getData(),r=s.columns[t],o=s.columns.length,d=a(n[r.dataIndex]),l=0===t?"fst":"",c=t===o-1?"lst":"",u="",h=r.cls||"";h&&(h+=" ");var p="",f={domId:s.objs.grid.domId+"_tr_"+$.appUtils.keyHandler(e)+"_td_"+t,domContent:"",column:r,field:r.dataIndex||!1,renderer:function(e,t){var s=function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=typeof e[t];"string"===i?e[t]=$.su.escapeHtml(e[t]):"object"===i&&null!=e[t]&&(e[t]=s(e[t]))}return e};return t=s(t),"string"==typeof e&&(e=$.su.escapeHtml(e)),r.renderer?r.renderer(e,t):a(e)}};if(i.editor)0===t?f.addClass("grid-content-td grid-content-td-0").css({position:"relative"}):r.dataIndex?f.addClass("grid-content-td grid-content-td-"+t).append($(i.editorItems[r.dataIndex])):f.addClass("grid-content-td grid-content-td-"+t);else switch(r.xtype){case"rownumberer":h+="grid-content-td grid-content-td-"+t+" grid-content-td-row-numberer "+l+" "+c+" "+r.cls,p+=' name="row-numberer"',u+='<span class="grid-row-numberer content"></span>';break;case"checkcolumn":var v=i.objs.modelMap[e].selected;h+=" grid-content-td grid-content-td-"+t+" grid-content-td-check-column "+l+" "+c,p+=' name="check-column"',u+='<div class="checkbox-group-container">',u+='<div class="widget-wrap">',u+='<label class="checkbox-label '+(v?"checked":"")+'">',u+='<input class="checkbox-checkbox" '+(v?' checked="checked" ':" ")+' type="checkbox" value="'+e+'"/>',u+='<span class="icon"></span>',u+="</label>",u+="</div>",u+="</div>",u+='<span class="content">--</span>';break;case"statuscolumn":var g,m,b=r.trueValue||"on",w=r.falseValue||"off";g=$.su.CHAR.GRID.DISABLED,m=w,h+="grid-content-td grid-content-td-"+t+" grid-content-td-status-column "+l+" "+c,p+=' name="check-column"',u+='<a href="javascript:void(0);" data-index="'+t+'" data-name="'+r.dataIndex+'" data-value="'+m+'" data-key="'+e+'" data-on="'+b+'" data-off="'+w+'" class="grid-content-btn grid-content-btn-status btn-status disabled">',u+='<span class="icon"></span>',u+='<span class="text">'+g+"</span>",u+="</a>";break;case"settings":s.objs.grid.dom().addClass("settings"),h+="grid-content-td grid-content-td-"+t+" grid-content-td-settings-column "+l+" "+c,u+='<div class="grid-btn-container">',r.items!==undefined&&-1===$.inArray("edit",r.items)||(u+='<a href="javascript:void(0);" data-index="'+t+'" data-key="'+e+'" class="grid-content-btn grid-content-btn-edit btn-edit">',u+='<span class="icon"></span>',u+='<span class="text">'+$.su.CHAR.OPERATION.EDIT+"</span>",u+="</a>"),r.items!==undefined&&-1===$.inArray("delete",r.items)||(u+='<a href="javascript:void(0);" data-index="'+t+'" data-key="'+e+'" class="grid-content-btn grid-content-btn-delete btn-delete">',u+='<span class="icon"></span>',u+='<span class="text">'+$.su.CHAR.OPERATION.DELETE+"</span>",u+="</a>"),u+="<div>";break;case"actioncolumn":s.objs.grid.dom().addClass("actioncolumn"),h+="grid-content-td grid-content-td-"+t+" grid-content-td-action-column "+l+" "+c,p+=' name="action-column"',u+='<div class="grid-content-td-wrap" data-key="'+e+'">',u+=f.renderer.call(f,d,s.objs.modelMap[e].getData()),u+="</div>";break;case"btn":h+="grid-content-td grid-content-td-"+t+" "+l+" "+c,p+=' name="btn-column"';break;case"customWidget":var y=r.widgetName;if(h+="grid-content-td grid-content-td-"+t+" grid-content-td-"+r.name+" "+l+" "+c+" "+r.cls,p+=' name="'+y+'"',y){var x="textbox"==y&&"false"!==f.renderer.call(f,d,s.objs.modelMap[e].getData())?"hidden":"";u+='<div widget="'+y+'" id="'+$.su.randomId("grid-content-custom-widget")+'" class="'+x+'"></div>',r.renderer&&(u+='<div class="content">'+f.renderer.call(f,d,s.objs.modelMap[e].getData())+"</div>")}else u+='<div class="content">'+f.renderer.call(f,d,s.objs.modelMap[e].getData())+"</div>";break;default:h+="grid-content-td grid-content-td-"+t+" grid-content-td-"+r.name+" "+l+" "+c+" "+r.cls,p+=' name="'+r.name+'"',u+='<div class="content">'+f.renderer.call(f,d,s.objs.modelMap[e].getData())+"</div>"}return f.domContent='<td id="'+f.domId+'" class="'+h+'" '+p+'><div class="td-label">'+r.text+'<span class="content-separator">:</span></div><div class="td-content">'+u+"</div></td>",f.callback=function(){var i=this,e=$("#"+f.domId).find("div[widget]");if(0<e.length){var t=i.dom().attr("name");i.customWidget=new $.su.widgets[t]({id:e,customSettings:i.column.settings}),i.customWidget.render(),$("#"+f.domId).find("div[widget]").on("ev_view_change",function(e,t){i.dom().triggerHandler("ev_view_change",[t]),s.objs.grid.dom().triggerHandler("ev_grid_custom_change",[t,i.customWidget,s.rowKey,r])})}},f.settings=s,f},getValue:function(){var e=this.dom();if(this.statusColumn){var t=e.find("a");return!!t.length&&t.attr("data-value")}return this.dom().find("div.content").text().replace(/\u00A0/g," ")},setValue:function(e){var t,i,s,a=this.dom(),n=this.settings,r=n.cellId,o=n.columns[r],d=o.trueValue||"on",l=o.falseValue||"off",c=this.settings.objs.modelMap[this.settings.rowKey].getData();"string"===$.type(e)&&(e=$.su.transSpecialChar(e));var u=this.renderer(e,c,n.objs.rows.length-1);this.statusColumn?(s="on"===u?(t=$.su.CHAR.GRID.ENABLED,i="enabled",d):(t=$.su.CHAR.GRID.DISABLED,i="disabled",l),a.find("a").removeClass("enabled disabled").addClass(i).attr("data-value",s),a.find("span.text").text(t)):this.customWidget?o.renderer&&!1!==u?"progressbar"==o.widgetName?(this.customWidget.show(),this.customWidget.setValue(u[0]),this.dom().find("div.content").show().html(u[1])):("combobox"==o.widgetName&&o.showRenderer?"---"==u?this.customWidget.hide():(this.customWidget.show(),this.customWidget.setValue(e)):this.customWidget.hide(),this.dom().find("div.content").show().html(u)):(this.dom().find("div.content").hide(),this.customWidget.show(),this.customWidget.setValue(e)):this.dom().find("div.td-content").html(u)},hideButton:function(e){this.dom().find(e).hide()},showButton:function(e){this.dom().find(e).show()},getInnerWidget:function(){return this.customWidget},getInnerWidgetChange:function(e){this.customWidget[e]()},getDisplay:function(){var e=this.dom();if(!this.customWidget)return e.find("div.content").text();switch(this.customWidget.type){case"grid":return this.customWidget;case"combobox":return this.customWidget.getText();case"textbox":default:return this.customWidget.getValue()}}}),$.su.Widget.register("editor",{settings:{},listeners:[],init:function(e){var a=this,t=$(e.configs[this._type].content).find("div[widget][name]");this.widgets=[],this.settings=e,t.each(function(e,t){var i=$(t).attr("name"),s=$(t).attr("widget");a.widgets.push({id:$(t).attr("id"),name:i,widget:s})}),this.setEditing(!1)},getAllFields:function(){for(var e=[],t=0,i=this.widgets.length;t<i;t++){var s=$("#"+this.widgets[t].id),a=(this.widgets[t].widget,this.widgets[t].name);if(a){var n=s.data("viewObj");n.field=a,e.push(n)}}return e},hide:function(){this.dom().detach().css("display","none")},startEdit:function(e){this.dom();var t=this.settings,i=e||"add",s=(t.objs.grid.dom(),this.getAllFields());t.configs[this._type],this.hide(),this.setEditing(!0),this.setEditingId(i);for(var a=0,n=s.length;a<n;a++)s[a].setNormal()},loadData:function(e){this.settings;for(var t=this.widgets,i=0,s=t.length;i<s;i++)$("#"+t[i].id).data("viewObj").setValue(e[t[i].name])},completeEdit:function(){this.setEditing(!1),this.setEditingId("")},cancelEdit:function(){this.setEditing(!1),this.setEditingId("")},setEditing:function(e){this.settings.configs[this._type].editing=e},isEditing:function(){return this.settings.configs[this._type].editing},setEditingId:function(e){this.settings.configs[this._type].editingIndex=e},getEditingId:function(){return this.settings.configs[this._type].editingIndex}}),function(){var l=$.su.Widget.register("rowEditor",{extend:["editor"],settings:{},listeners:[{selector:"div.btn-cancel",event:"click",callback:function(e,t){var i=t.settings,s=i.objs.grid,a=t.getEditingId(),n=i.objs.grid.getRow(a);t.isEditing()&&!i.configs.rowEditor.adding&&n.enableRow(a).dom().show(),s.dom().triggerHandler("ev_grid_cancel",[a]),t.cancelEdit()}},{selector:"div.btn-submit",event:"click",callback:function(e,t){$(this);var i=t.settings,s=i.objs.grid,a=t.getEditingId(),n=i.objs.grid.getRow(a),r=$.su.getDefaultEvent(t,function(){t.isEditing()&&!i.configs.rowEditor.adding&&n.enableRow(a).dom().show(),t.completeEdit()});s.dom().triggerHandler("ev_grid_save",[r.ev,a]),r.exe()}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:"tr.grid-content-tr:not(.empty)"}},event:"dblclick",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i=t.settings.objs.grid,s=$(this).attr("data-key");t&&!t.isEditing()&&(t.startEdit(s),i.dom().triggerHandler("ev_grid_edit",[s]))}}],init:function(e){l.superclass.init.call(this,e),this.cells=[]},render:function(){var e=this.dom(),t=this.settings,i=t.configs.columns,s=t.objs.cell,a=t.objs.grid,n=$('<tr class="editor-container" id='+this.domId+"></tr>");e.parent().find("tbody.grid-content-data").append(n),e.remove();for(var r=0,o=i.length;r<o;r++){var d=s.initCell("editor",r,this.editorConfigs);this.cells.push(d)}var l=$('<div id="'+a.domId+'-cancel-button" widget="button" class="btn-cancel button-button" text= "Cancel"></div>'),c=$('<div id="'+a.domId+'-save-button" widget="button" class="btn-submit button-button" text= "Save"></div>'),u=this.dom().find("td").eq(0).empty();l.appendTo(u),c.appendTo(u),this.cancelObj=new $.su.widgets.button({id:l}),this.saveObj=new $.su.widgets.button({id:c}),this.cancelObj.render(),this.saveObj.render(),$(t.configs.rowEditor.content).remove(),this.dom().css("display","none")},startEdit:function(e){var t=this.dom(),s=e||"add",a=this.settings.objs.grid,n=a.dom(),r=null;this.getAllFields();(l.superclass.startEdit.call(this,e),"add"!=s)?(r=a.getRow(s))&&(r.dom().addClass("editing"),r.disableRow(s).dom().hide()):r=n.find("tbody.grid-content-data").find("tr.grid-content-tr").eq(0).row();for(r&&r.dom?t.insertBefore(r.dom()):t.prependTo(n.find("tbody.grid-content-data")),t.show(),i=0,len=this.widgets.length;i<len;i++){var o=this.widgets[i];this.setWidgetWidth($("#"+o.id),o.name,o.widget)}var d=t.height();this.cancelObj.dom().css("top",d),this.saveObj.dom().css("top",d)},completeEdit:function(){var e=this.dom(),t=this.settings,i=t.objs.grid,s=this.getEditingId();if(l.superclass.completeEdit.call(this),this.isEditing()&&!t.configs.rowEditor.adding){var a=t.objs.grid.getRow(s);a.dom().removeClass("editing"),a.enableRow()}e.hide(),i.updateRowNumber()},cancelEdit:function(){var e=this.dom(),t=this.settings,i=t.objs.grid,s=i.dom(),a=t.configs.rowEditor.editingIndex;if(l.superclass.cancelEdit.call(this),"add"!==a){var n=t.objs.grid.getRow(a);n.dom().removeClass("editing"),n.enableRow()}else s.find("tr.grid-content-tr.add").remove();e.hide(),i.updateRowNumber()},setWidgetWidth:function(e,t,i){for(var s=this.dom(),a=this.settings.configs.columns,n={},r=0,o=a.length;r<o;r++){if(a[r].dataIndex)n[a[r].dataIndex]=a[r].width}if("combobox"===i){parseInt(s.find("a.combobox-switch").width()),parseInt(s.find("div.widget-error-tips").width());var d=n[t]-13;d<$(e).find(".widget-wrap").outerWidth()&&$(e).find(".widget-wrap").css({"width":d+"px"})}}})}(),function(){var n=$.su.Widget.register("popEditor",{extend:["editor"],settings:{},listeners:[],init:function(e){n.superclass.init.call(this,e),this.cells=[]},render:function(){var s=this,e=this.dom(),t=this.settings,i=(t.configs.columns,t.objs.grid),a=t.configs.popEditor;t.addTitle=a.addTitle||$.su.CHAR.OPERATION.ADD_TITLE,t.editTitle=a.editTitle||$.su.CHAR.OPERATION.EDIT_TITLE,t.addBtnText=a.addBtnText||$.su.CHAR.OPERATION.ADD_DEFAULT,t.editBtnText=a.editBtnText||$.su.CHAR.OPERATION.SAVE_DEFAULT;var n='<div class="editor-container" id="'+this.domId+'"><div widget="msg" type="window" close-btn="{true}" msg-title="'+(a.addTitle||"")+'" class="editor-container '+a.cls+'" id="'+this.domId+'-msg" title-bar="{true}"';a.msg&&(n+=' content-scroll="{'+(!1!==a.msg.contentScroll)+'}" dynamic-height="{'+(!1!==a.msg.dynamicHeight)+'}"'),n+="></div></div>";var r=$(n),o=i.dom().find(".grid-panel-content-container .grid-container");$("#"+this.domId+"-msg").remove(),o.append(r),e.remove();var d=$("#"+this.domId+"-msg");d.append($(a.content)),a.customBtns&&d.append($(a.customBtns));var l=$('<div widget="fieldset" class="inline-container btn-container"></div>').appendTo(d),c=$('<div id="'+i.domId+'-cancel-button" widget="button" class="btn-cancel button-button" text= "{OPERATION.CANCEL_UPPERCASE}" label-field={false}></div>'),u=$('<div id="'+i.domId+'-save-button" widget="button" class="btn-submit button-button" text= "{OPERATION.SAVE_UPPERCASE}" label-field={false}></div>');c.appendTo(l),u.appendTo(l),(this.btnContainer=new $.su.widgets.fieldset({id:l})).render(),this.containerMsg=new $.su.widgets.msg({id:d,settings:a.msg}),this.cancelObj=new $.su.widgets.button({id:c}),this.saveObj=new $.su.widgets.button({id:u}),this.containerMsg.render(),this.cancelObj.render(),this.saveObj.render(),d.off("ev_msg_close").on("ev_msg_close",function(){var e=s.getEditingId();i.dom().triggerHandler("ev_grid_cancel",[e]),s.cancelEdit()}),this.cancelObj.dom().off("ev_button_click").on("ev_button_click",function(){var e=s.getEditingId();i.dom().triggerHandler("ev_grid_cancel",[e]),s.containerMsg.close(),s.cancelEdit()}),this.saveObj.dom().off("ev_button_click").on("ev_button_click",function(){$(this);var t=s.settings.objs.grid,i=s.getEditingId(),e=$.su.getDefaultEvent(s,function(){var e=$.su.getDefaultEvent(s,function(){s.completeEdit()});t.dom().triggerHandler("ev_grid_save",[e.ev,i]),e.exe()});t.dom().triggerHandler("ev_grid_before_save",[e.ev]),e.exe(),t.dom().triggerHandler("ev_grid_after_save")})},startEdit:function(e){var t=this.dom(),i=this.settings,s=e||"add";i.objs.grid.dom(),this.getAllFields();n.superclass.startEdit.call(this,e),"add"!=s?(this.saveObj.setText(i.editBtnText),this.containerMsg.setTitle(i.editTitle)):(this.saveObj.setText(i.addBtnText),this.containerMsg.setTitle(i.addTitle)),this.containerMsg.show();var a=t.height();this.cancelObj.dom().css("top",a),this.saveObj.dom().css("top",a)},completeEdit:function(){var e=this.settings.objs.grid;n.superclass.completeEdit.call(this),this.containerMsg.close(),e.updateRowNumber()},cancelEdit:function(){var e=this.settings.objs.grid;n.superclass.cancelEdit.call(this),e.updateRowNumber()},setTitle:function(e){this.containerMsg.setTitle(e)},getMsgBox:function(){return this.containerMsg},getCancelBtn:function(){return this.cancelObj},getSaveBtn:function(){return this.saveObj},showBtns:function(){this.btnContainer.show()},hideBtns:function(){this.btnContainer.hide()},destroy:function(){var e=$("#"+this.domId+"-msg").data("viewObj");e&&e.destroy()}})}(),$.su.Widget.register("paging",{settings:{numPerPage:{attribute:"num-per-page",defaultValue:6}},listeners:[{selector:"a.paging-btn-num",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i=t.settings,s=i.objs.grid,a=$(this),n=parseInt(a.attr("data-index"),10),r=i.plugins.editor||i.plugins.rowEditor,o=s.getPlugin("editor")?i.configs.editor:i.configs.rowEditor;a.hasClass("disabled")||(o&&o.editing&&r.cancelEdit(),t.goToPage(n))}},{selector:"a.pageing-btn-prev",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault(),t.settings.objs.grid,$(this).hasClass("disabled")||t.goFirst()}},{selector:"a.pageing-btn-next",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault(),t.settings.objs.grid,$(this),$(this).hasClass("disabled")||t.goLast()}}],init:function(e){this.dom();var t=this.settings;this._pageMap={},$.extend(t,e,e.configs.paging)},render:function(){var i=this,e=this.dom(),t=e.parent().find("div.grid-panel-content");grid=this.settings.objs.grid;var s=this.settings,a='<div class="container widget-container paging-container disabled">';a+='<div class="paging-wrap">',a+='<div class="paging-options inline-block hidden">',a+='<div class="paging-info inline-block">',a+="<span></span>",a+="</div>",a+='<div class="paging-select inline-block">',a+='<div id="'+this.domId+'_select" label-field="'+$.su.CHAR.COMMON.GRID_PAGING_PER+'" widget="combobox"></div>',a+="</div>",a+="</div>",a+='<div class="paging-btns inline-block">',a+='<a href="javascript:void(0);" class="paging-btn pageing-btn-prev" data-index="prev">',a+='<span class="icon"></span>',a+='<span class="text">'+$.su.CHAR.OPERATION.PREV+"</span>",a+="</a>",a+='<div class="num-buttons-container">',a+="</div>",a+='<a href="javascript:void(0);" class="paging-btn pageing-btn-next" data-index="next">',a+='<span class="icon"></span>',a+='<span class="text">'+$.su.CHAR.OPERATION.NEXT+"</span>",a+="</a>",a+="</div>",a+="</div>",a+="</div>",a+='<input type="hidden" class="hidden paging-input">',e.append($(a)),t.append(e),this._numSelect=new $.su.widgets.combobox({id:this.domId+"_select"}),this._numSelect.render(),this._numSelect.loadItems(s.items),s.numPerPage=this._numSelect.getValue()||s.numPerPage,s.objs.grid.updateRowNumber(),this._numSelect.dom().on("ev_view_change",function(e,t){i._numSelect.setValue(t.value),s.numPerPage=t.value,i.updateRowPage(grid._keys),i.goToPage(s.currentPage),s.objs.grid.updateRowNumber()})},updateBtns:function(){var e=this.dom(),t=this.settings,i=t.objs.grid,s=e.find("div.paging-btns"),a=s.find("div.num-buttons-container"),n=t.numPerPage,r=t.currentPage,o=t.objs.grid._keys.length,d=Math.ceil(o/n);if(t.totalPage=d,i.dom().find("tr.grid-content-tr").removeClass("hidden"),0==d||1==d)s.addClass("disabled").hide();else{s.removeClass("disabled").show();for(var l="",c=0;c<d;c++)l+='<a href="javascript:void(0);" class="paging-btn paging-btn-num pageing-btn-'+c+'" data-index="'+c+'">',l+='<span class="icon"></span>',l+='<span class="text">'+(c+1)+"</span>",l+="</a>",l+='<span class="dots">...</span>'}a.empty().append($(l)),d<r&&(r=t.currentPage=d),this.goToPage(r)},goToPage:function(e){var t=this.dom(),i=this.settings,s=t.find("div.paging-container"),a=i.objs.grid.dom(),n=(i.objs.rows,isNaN(e)?0:e),r=i.numPerPage,o=i.totalPage,d=a.find("tbody.grid-content-data").eq(0),l=i.objs.grid._keys.length;o<=n&&0<o?n=o-1:n<0&&(n=0);var c=0===l?0:n*r+1,u=0===l?0:c+r-1;u=l<u?l:u;var h=$.su.CHAR.COMMON.GRID_PAGING_SHOW;h=(h=(h=h.replace("%start",c)).replace("%end",u)).replace("%total",l),t.find(".paging-info span").text(h);var p=s.find("a.paging-btn.pageing-btn-prev"),f=s.find("a.paging-btn.pageing-btn-next"),v=s.find("a.paging-btn-num"),g=s.find("span.dots");if(v.removeClass("current"),g.addClass("hidden"),v.filter("[data-index="+n+"]").addClass("current"),5<o){var m=n-2,b=n+2,w=o-1,y=n+2+(m<0?0-m:w<b?w:0),x=m<0?0:m-(w<b?b-w:0);v.addClass("hidden");for(var _=x;_<=y;_++)v.eq(_).removeClass("hidden")}i.currentPage=n;var C=this.getPageKeys();if(d.children("tr[data-page!="+n+"]").addClass("hidden"),d.children("tr[data-page="+n+"], .grid-content-tr.empty").removeClass("hidden"),a.triggerHandler("ev_store_render_items",[C]),"safari"==$.su.getBrowseVersion().browse){var k=a.find("table");k.css("display","inline-table"),setTimeout(function(){k.css("display","")},0)}setTimeout(function(){o<=5?(p.hide(),f.hide()):(p.show(),f.show()),0===n?(p.addClass("disabled"),f.removeClass("disabled")):o-1<=n?(p.removeClass("disabled"),f.addClass("disabled")):(p.removeClass("disabled"),f.removeClass("disabled"))},180),a.triggerHandler("ev_grid_paging_changed",e)},goPrev:function(){var e=this.settings.currentPage;--e<0||this.goToPage(e)},goNext:function(){var e=this.settings,t=e.currentPage;e.totalPage<=++t||this.goToPage(t)},goFirst:function(){var e=this.settings;e.totalPage,e.currentPage=0,this.goToPage(0)},goLast:function(){var e=this.settings,t=e.totalPage;e.currentPage=1<t?t-1:t,this.goToPage(e.currentPage)},getPageKeys:function(){for(var e=this.settings,t=e.objs.grid,i=t._renderMap,s=t._keys,a=e.numPerPage,n=a*e.currentPage,r=n+a-1,o=[],d=n;d<=r;d++)i[s[d]]||s[d]==undefined||o.push(s[d]);return o},updateRowPage:function(e){for(var t=this,i=this.settings,s=i.objs.grid,a=i.numPerPage,n=s.dom().find("tbody.grid-content-data").eq(0).children("tr"),r=0,o=e.length;r<o;r++){var d=Math.floor(r/a);this._pageMap[e[r]]=d}return n.each(function(){var e=$(this).attr("data-key");$(this).attr("data-page",t._pageMap[e])}),this._pageMap}}),$.su.Widget.register("sorts",{settings:{},listeners:[{selector:function(){return{parent:this.settings.objs.grid.dom(),target:"th.grid-header-other"}},event:"click",callback:function(e,t){var i=$(this).attr("name");t.sortByColumn(i)}}],init:function(e){this.settings=$.extend({},this.settings,{objs:e.objs}),this._sortColumnName=null,this._sortKeys=[]},render:function(){},clearSortStatus:function(){var e=this._sortColumnName,t=this.settings.objs.grid;null!==e&&t.dom().find("div.grid-header-container th.grid-header."+e).removeClass("sort-asc sort-desc")},sortByColumn:function(e){var t=this.settings.objs.grid,i=t.dom().find("div.grid-header-container th.grid-header."+e),s=t.dom().find("tbody.grid-content-data");e===this._sortColumnName?i.hasClass("sort-asc")?(i.removeClass("sort-asc").addClass("sort-desc"),this.sortValue(e,!0)):(i.removeClass("sort-desc").addClass("sort-asc"),this.sortValue(e)):(this.clearSortStatus(),i.addClass("sort-asc"),this.sortValue(e)),this._sortColumnName=e;for(var a=0,n=this._sortKeys.length;a<n;a++)s.append(s.find("tr.grid-content-tr[data-key="+this._sortKeys[a]+"]"))},sortValue:function(e,t){var i=this.settings.objs.grid,s=this.settings.objs.modelMap,a={},n=0===this._sortKeys.length?i.getKeys():this._sortKeys;for(var r in s)if(s.hasOwnProperty(r)){var o=s[r].getData()[e];"string"===$.type(o)&&/^\d+$/.test(o)?a[r]=parseInt(o,10):a[r]=o}t?n.sort(function(e,t){return a[e]>a[t]?-1:a[e]<a[t]?1:0}):n.sort(function(e,t){return a[e]<a[t]?-1:a[e]>a[t]?1:0}),this._sortKeys=n}}),$.su.Widget.register("statusBar",{settings:{},listeners:[{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},condition:function(e){return!!e.settings.objs.grid.getPlugin("statusBar")},event:"ev_grid_row_clicked ev_grid_row_selected_all ev_grid_row_unselected_all ev_grid_delete",callback:function(e,t,i){i.refreshStatus()}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},condition:function(e){return!!e.settings.objs.grid.getPlugin("statusBar")},event:"ev_store_bound",callback:function(e,t){t.refreshStatus()}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},event:"ev_grid_save",callback:function(e,t,i,s){setTimeout(function(){s.refreshStatus()},100)}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},event:"ev_grid_row_created",callback:function(e,t,i){var s=i.dom();clearTimeout(i._updateTotal),i._updateTotal=setTimeout(function(){s.find("td.grid-status-td span.status-total-num").text(t.length)},100)}},{selector:function(){return{parent:this.settings.objs.grid.dom(),target:""}},event:"ev_grid_check_status",callback:function(e,t){t.refreshStatus()}}],init:function(e){this.settings=$.extend({},this.settings,{objs:e.objs},e.configs.statusBar),this.settings.objs.grid},render:function(){var e=this.dom(),t=this.settings.objs.grid,i=!1!==this.settings.total,s=t.settings.configs.columns,a=this.settings.statusBarText||$.su.CHAR.GRID.TOTAL,n=e.parent().find("div.grid-status-container"),r='<table border="0" cellspacing="0" cellpadding="0">';r+='<tr class="status-row">',r+='<td class="grid-status-td" colspan="'+(s.length-t.columnOffset)+'">',i&&(r+='<span class="status-total">'+a+': <span class="status-total-num"></span></span>'),r+='<span class="status-selected status-selected-text hidden"><span class="status-selected-num"></span></span>',r+="</td>",r+="</tr>",r+="</table>",e.append(r).addClass("grid-status-bar-container"),n.removeClass("hidden").append(e),e.find("td.grid-status-td span.status-total-num").text(this.settings.objs.rows.length)},refreshStatus:function(){var e=this.dom(),t=this.settings.objs.grid,i=t.getSelected(),s=t._keys.length;if(t.getPlugin("paging"),0<i.length?(1==i.length?e.find("td.grid-status-td span.status-selected-num").text($.su.CHAR.GRID.SELECTED_ONE):e.find("td.grid-status-td span.status-selected-num").text($.su.CHAR.GRID.SELECTED.replace("%n%",i.length)),e.find("td.grid-status-td span.status-selected").show()):e.find("td.grid-status-td span.status-selected").hide(),this.toolEnable)if(0<i.length)e.find("td.grid-status-td span.status-btns").show();else{var a=$.su.getDefaultEvent(this,function(){e.find("td.grid-status-td span.status-btns").hide()});t.dom().triggerHandler("ev_grid_tool_status_hide",[a.ev]),a.exe()}e.find("td.grid-status-td span.status-total-num").text(s)}}),$.su.Widget.register("maxLimit",{settings:{},listeners:[],init:function(e){this.limit=0,this.settings=$.extend({},this.settings,{objs:e.objs},e.configs.maxLimit)},render:function(){var e=this.dom(),t=(this.settings.objs.grid,e.parent().find("div.grid-limit-container")),i="<span>"+$.su.CHAR.GRID.MAX_LIMIT+': <span class="limit-num"></span></span>';e.append(i).addClass("grid-limit-bar-container"),t.removeClass("hidden").append(e)},setLimit:function(e){return"number"===$.type(e)&&(this.limit=e,this.dom().find(".limit-num").text(e),!0)},getLimit:function(){return this.limit}}),$.su.Widget.register("msg",{settings:{type:{attribute:"type",defaultValue:"prompt"},_title:{attribute:"msg-title",defaultValue:""},autoshow:{attribute:"autoshow",defaultValue:!1},autoAdapt:{attribute:"auto-adapt",defaultValue:!0},zIndex:{attribute:"z-index",defaultValue:"auto"},contentScrollX:{attribute:"content-scroll-x",defaultValue:!0},contentScroll:{attribute:"content-scroll",defaultValue:!0},dynamicHeight:{attribute:"dynamic-height",defaultValue:!0},mask:{attribute:"mask",defaultValue:!0},msg:{attribute:"msg",defaultValue:""},htmlLoader:{attribute:"html-loader",defaultValue:!1},callback:{attribute:"callback",defaultValue:null},titleBar:{attribute:"title-bar",defaultValue:!0},closeBtn:{attribute:"close-btn",defaultValue:!0},okText:{attribute:"ok-text",defaultValue:$.su.CHAR.OPERATION.OK},yesText:{attribute:"yes-text",defaultValue:$.su.CHAR.OPERATION.YES_UPPERCASE},noText:{attribute:"no-text",defaultValue:$.su.CHAR.OPERATION.NO_UPPERCASE},cancelText:{attribute:"cancel-text",defaultValue:$.su.CHAR.OPERATION.CANCEL_UPPERCASE}},listeners:[{selector:"a.msg-close",event:"click",callback:function(e,t){e.preventDefault(),t.close(),t.dom().triggerHandler("ev_msg_close")}},{selector:"div.btn-msg-ok",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var i=$.su.getDefaultEvent(t,t.close);t.dom().triggerHandler("ev_msg_ok",[i.ev]),i.exe()}},{selector:"div.btn-msg-no",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var i=$.su.getDefaultEvent(t,t.close);t.dom().triggerHandler("ev_msg_no",[i.ev]),i.exe()}},{selector:"div.btn-msg-cancel",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation();var i=$.su.getDefaultEvent(t,t.close);t.dom().triggerHandler("ev_msg_cancel",[i.ev]),i.exe()}},{selector:".msg-title",event:"mousedown",callback:function(e,a){var t=e||event;a.distanceX=t.clientX-$(this).offset().left,a.distanceY=t.clientY-$(this).offset().top,a.drag=!0;var n=$(window).innerWidth(),r=$(window).innerHeight(),o=a.dom().outerWidth(),d=a.dom().outerHeight();function i(e){if(!1!==a.drag){$.su.isIe&&(e.clientX>=n-10||e.clientX<10||e.clientY>=r-10||e.clientY<10)&&l();var t=e||event,i=t.clientX-a.distanceX,s=t.clientY-a.distanceY;return i<=0?i=0:n-o<=i&&(i=n-o),s<=0?s=0:r-d<=s&&(s=r-d),a.dom().css({top:s+"px",left:i+"px"}),!1}}function l(e){return $(document).off("mouseup",l).off("mousemove",i),!1}return $(document).on("mousemove",i).on("mouseup",l),!1}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+" msg-container "+t.type),"ios"===$.su.platform&&e.addClass("ios");var i="";i+='<div class="msg-wrap">',t.closeBtn&&(i+='<a class="widget-close msg-close" href="javascript:void(0);"></a>'),i+='<div class="msg-content-wrap">';var s=t._title||"";t.titleBar&&(i+='<h3 class="widget-title msg-title">',i+='<span class="msg-title-container">'+s+"</span>",i+="</h3>"),i+='<div class="widget-content msg-content-container">'+(t.msg||"")+"</div>",i+="</div>";var a=t.type,n='<div widget="button" id="'+this.domId+'-btn-ok" class="btn-msg-ok" label-field="{false}" text="'+t.okText+'"></div>',r='<div widget="button" id="'+this.domId+'-btn-no" class="btn-msg-no" label-field="{false}" text="'+t.noText+'"></div>',o='<div widget="button" id="'+this.domId+'-btn-ok" class="btn-msg-ok" label-field="{false}" text="'+t.yesText+'"></div>',d='<div widget="button" id="'+this.domId+'-btn-cancel" class="btn-msg-cancel" label-field="{false}" text="'+t.cancelText+'"></div>';switch(a){case"alert":i+='<div class="msg-btn-container">',i+='<div class="msg-btn-wrap">',i+='<div class="button-container inline-block">',i+=n,i+="</div>",i+="</div>",i+="</div>";break;case"confirm":i+='<div class="msg-btn-container">',i+='<div class="msg-btn-wrap">',i+='<div class="button-container inline-block">',i+=r,i+="</div>",i+='<div class="button-container inline-block">',i+=o,i+="</div>",i+="</div>",i+="</div>";break;case"prompt":i+='<div class="button-container msg-btn-container">',i+='<div class="msg-btn-wrap">',i+='<div class="button-container inline-block">',i+=d,i+="</div>",i+='<div class="button-container inline-block">',i+=n,i+="</div>",i+="</div>",i+="</div>";break;case"show":i+='<div class="button-container msg-btn-container">',i+='<div class="msg-btn-wrap">',i+='<div class="button-container inline-block">',i+=d,i+="</div>",i+='<div class="button-container inline-block">',i+=r,i+="</div>",i+='<div class="button-container inline-block">',i+=o,i+="</div>",i+="</div>",i+="</div>";break;case"window":break;default:t.buttons}i='<div class="position-top-left"></div>'+(i='<div class="position-top-center"></div>'+(i='<div class="position-top-right"></div>'+(i='<div class="position-center-left">'+(i='<div class="position-center-right">'+(i+="</div>")+"</div>")+"</div>"))),i+='<div class="position-bottom-left"></div>',i+='<div class="position-bottom-center"></div>',i+='<div class="position-bottom-right"></div>';var l=$("div#msg-boxs-container");0==l.length&&(l=$('<div id="msg-boxs-container" class="msg-boxs-container"></div>'),$("body").append(l)),l.append(e),e.append($(i)).css({"z-index":"auto"==t.zIndex?undefined:t.zIndex,"display":"none"}),t.autoshow&&this.show();for(var c=e.find(".msg-btn-container").find("div[widget=button]"),u=0,h=c.length;u<h;u++)new $.su.widgets.button({id:$(c[u])}).render();0<e.children("div[widget]").length&&e.children("div[widget]").appendTo(e.find("div.msg-content-container"))},show:function(e){var t=this.dom(),i=this.settings,s=this.getContainer(),a=$(t.find("div.msg-content-wrap .msg-content-container").children().get(0)),n=$(window).height();$(window).width(),"s"!==$.su.widgetSize&&!0===i.dynamicHeight&&0!==a.length&&a.css({"max-height":n-300}),i.contentScroll&&0!==a.length&&(a.addClass("scroll"),$.su.scrollbar({ele:a[0]},function(e){e.update()})),i.mask&&!i.shown&&this.getMask().show(this.domId),s.css({"top":-9999,"left":-9999,"opacity":0,"filter":"alpha(opacity=0)"}),s.show(),this.setPosition("center","center"),i.shown=!0,s.hide(),s.css({"opacity":1,"filter":"alpha(opacity=100)"}),s.fadeIn(200),$.isFunction(e)&&e()},close:function(e,t){var i=this.dom(),s=this.settings,a=this.getContainer(),n="function"===$.type(e)?e:null,r="boolean"===$.type(e)?e:"boolean"===$.type(t)&&t;if(s.shown)return s.mask&&this.getMask().hide(this.domId),r?a.finish().fadeOut(200,function(){s.shown=!1,i.remove()}):a.finish().fadeOut(200,function(){s.shown=!1,a.css({"display":"none","opacity":0,"filter":"alpha(opacity=0)"})}),this.setNormal(),n?n.call(this,this):void 0},hide:function(){var e=this.settings,t=this.getContainer();e.shown=!1,t.finish().css({"display":"none","opacity":0,"filter":"alpha(opacity=0)"}),e.mask&&this.getMask().hide(this.domId),this.setNormal()},setTitle:function(e){var t=this.dom(),i=this.settings;e!==undefined&&(i._title=e,t.find("span.msg-title-container").text(e))},setContent:function(e){var t=this.dom();e&&t.find("div.msg-content-container").html(e)},setButtonText:function(e,t){var i=this.dom();switch(e){case"yes":case"ok":i.find(".btn-msg-ok").data("viewObj").setText(t);break;case"no":i.find(".btn-msg-no").data("viewObj").setText(t);break;case"cancel":i.find(".btn-msg-cancel").data("viewObj").setText(t)}},showButtons:function(){this.dom().find("div.msg-btn-container").fadeIn(150)},hideButtons:function(){this.dom().find("div.msg-btn-container").css("display","none")},disableButton:function(e){var t=this.dom();switch(e){case"yes":case"ok":t.find(".btn-msg-ok").data("viewObj").disable();break;case"no":t.find(".btn-msg-no").data("viewObj").disable();break;case"cancel":t.find(".btn-msg-cancel").data("viewObj").disable()}},enableButton:function(e){var t=this.dom();switch(e){case"yes":case"ok":t.find(".btn-msg-ok").data("viewObj").enable();break;case"no":t.find(".btn-msg-no").data("viewObj").enable();break;case"cancel":t.find(".btn-msg-cancel").data("viewObj").enable()}},destroy:function(){var e=this.dom(),t=this.settings;t.mask&&t.shown&&this.getMask().hide(this.domId),e.remove()},setNormal:function(){this.dom().find("div[widget]").each(function(e,t){var i=$(t).data("viewObj");i&&i.setNormal&&i.setNormal()})}}),$.su.Widget.register("noticeBar",{settings:{buttonType:{attribute:"button-type",defaultValue:"save"},noticeText:{attribute:"notice-text",defaultValue:""}},listeners:[{selector:".button-button",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation(),$(this).attr("data-type");var i=$.su.getDefaultEvent(t,t.hide);t.dom().triggerHandler("ev_notice_action",[i.ev]),i.exe()}}],init:function(){this.callback={}},render:function(){var e=this.dom(),t=this.settings;t.btnMap={"save":{id:"noticeSave",text:$.su.CHAR.OPERATION.SAVE},"cancel":{id:"noticeCancel",text:$.su.CHAR.OPERATION.CANCEL},"close":{id:"noticeClose",text:$.su.CHAR.OPERATION.CLOSED}},e.addClass(t.cls+"notice-bar-container"),e.css({"display":"none"});var i="";i+='<div class="notice-text-wrap">',i+='<span class="notice-text">'+t.noticeText+"</span>",i+="</div>",i+='<div class="notice-buttons-wrap">',i+="</div>",e.append(i),this.btnType=t.buttonType.split(" "),this.initButton()},initButton:function(){var e=this.dom(),t=this.settings.btnMap,i=this.btnType,s=i.length,a=e.find(".notice-buttons-wrap").eq(0);a.empty();for(var n=0;n<s;n++){var r=i[n];if(t[r]){var o=$('<div widget="button" text="'+t[r].text+'" id="'+t[r].id+'" data-type="'+r+'" class="button-button"></div>');a.append(o),new $.su.widgets.button({id:o}).render()}}},show:function(){this.dom().stop(!0).slideDown(300)},hide:function(){this.dom().stop(!0).slideUp(300)},setText:function(e,t){var i=this.dom(),s=this.btnType.length;if("string"==typeof e&&i.find("span.notice-text").text(e),"object"===$.type(t)){for(var a in this.btnType.splice(0,s),t)t.hasOwnProperty(a)&&(this.btnType.push(a),this.callback[a]=t[a]);this.initButton()}}}),$.su.Widget.register("navigator",{settings:{items:{attribute:"items",defaultValue:null},itemWidget:{attribute:"item-widget",defaultValue:null},bubbleEvent:{attribute:"bubble",defaultValue:!1},level:{attribute:"level",defaultValue:null}},listeners:[{selector:"li.navigator-li-effective",event:"click",callback:function(e,t){var i=this.getAttribute("navi-value");t.dom().triggerHandler("ev_navigator_clicked",[i]),e.stopPropagation()}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"navigator-container"),e.empty().append('<div class="widget-wrap-outer navigator-wrap-outer su-scroll"><div class="widget-wrap navigator-wrap"></div></div>'),this.loadItems(t.items)},createNavi:function(e,t){var i="navigator-ul";i+=" navigator-ul-level"+t,1<t&&(i+=" navigator-ul-sub");for(var s='<ul class="'+i+'">',a=0;a<e.length;a++){var n=e[a];s+=this.createNaviItem(n,t)}return s+="</ul>"},createNaviItem:function(e,t){var i='<li navi-value="'+e.name+'" class="navigator-li navigator-li-level'+t+" "+(e.children?" has-sub-navi":" navigator-li-effective")+(e.cls?" "+e.cls:"")+'">';return i+='<a href="javascript:void(0)">',i+='<span class="sub-navigator-icon"></span>',i+='<span class="sub-navigator-text">'+e.text+"</span>",i+='<span class="sub-navigator-icon-after"></span>',i+="</a>",e.children&&(!this.settings.level||t<this.settings.level)&&(i+=this.createNavi(e.children,t+1)),i+="</li>"},loadItems:function(e){var t=this.dom(),i=this.settings;i.items=e;var s="";i.items&&0<i.items.length&&(s+=this.createNavi(i.items,1)),t.find(".navigator-wrap").empty().append(s)},showToggle:function(){this.dom().toggleClass("show")},find:function(e){return this.dom().find("li.navigator-li[navi-value="+e+"]")},hasChildren:function(e){return 0<this.find(e).find("li.navigator-li").length},select:function(e){this.find(e).addClass("selected")},isSelected:function(e){return this.find(e).hasClass("selected")},unSelect:function(e){this.find(e).removeClass("selected")},unSelectAll:function(){this.dom().find("li.navigator-li.selected").removeClass("selected")},open:function(e){this.find(e).addClass("opened")},close:function(e){this.find(e).removeClass("opened")},toggleOpen:function(e){this.find(e).toggleClass("opened")},closeAll:function(){this.dom().find("li.navigator-li.opened").removeClass("opened")}}),$.su.Widget.register("panel",{settings:{_title:{attribute:"title-label",defaultValue:""},instruction:{attribute:"instruction",defaultValue:""},icon:{attribute:"icon",defaultValue:""},iconCls:{attribute:"icon-cls",defaultValue:""},panelType:{attribute:"panel-type",defaultValue:"form"},collapsible:{attribute:"collapsible",defaultValue:!1},collapsed:{attribute:"collapsed",defaultValue:!1}},listeners:[{selector:function(e){return{parent:this.getContainer().find(".panel-title:first")}},event:"click",callback:function(e,t){var i=$(this).find("span.panel-header-btn-collapse"),s=t.settings;if(s.collapsible){var a=t.getContainer(),n=a.find("div.panel-content");s.collapsed?(n.slideDown(200,function(){n.css("display","block")}),a.removeClass("collapsed"),s.collapsed=!1,i.closest("div[widget=panel]").triggerHandler("ev_panel_open")):(n.slideUp(200,function(){$(this).css("display","none")}),a.addClass("collapsed"),s.collapsed=!0,i.closest("div[widget=panel]").triggerHandler("ev_panel_close"))}}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=t.collapsible?!1===t.collapsed?"block":"none":"block",s=t.collapsed?" collapsed":"";e.addClass(t.cls+"panel-container "+t.panelType+s);var a="";a+='<div class="panel-wrap-before"></div>',a+='<div class="panel-wrap">',!1!==t._title&&(a+='<div class="panel-header">',a+='<h3 class="panel-title">',a+='<span class="panel-title-icon"></span>',a+='<span class="panel-title-text">'+t._title+"</span>","string"===$.type(t.instruction)&&""!==t.instruction&&(a+='<div class="panel-title-instruction">'+t.instruction+"</div>"),a+='<div class="panel-header-btn-container">',t.collapsible&&(a+='<span class="panel-header-btn-collapse" type="button"></span>'),a+="</div>",a+="</h3>",a+="</div>"),a+='<div class="panel-content" style="display: '+i+'">',a+='<div class="panel-tbar-container"></div>',a+='<div class="panel-content-container"></div>',a+='<div class="panel-fbar-container"></div>',a+="</div>",a+="</div>",a+='<div class="panel-wrap-after"></div>';var n=$(a);0<e.find("div.panel-content-container").length?(n.find("div.panel-content-container").append(e.find("div.panel-content-container").children().detach()),e.find(".panel-wrap").remove()):n.find("div.panel-content-container").append(e.children().detach()),e.append(n)},setTitle:function(e){var t=this.getContainer();e&&t.children(".panel-wrap").children(".panel-header").find("h3.panel-title span.panel-title-text").html(e)},setInstruction:function(e){var t=this.getContainer();e?(t.find("h3.panel-title div.panel-title-instruction").show(),t.find("h3.panel-title div.panel-title-instruction").html(e)):t.find("h3.panel-title div.panel-title-instruction").hide()},open:function(){var e=this.settings,t=this.getContainer(),i=t.find("div.panel-content");t.find("span.panel-header-btn-collapse"),i.slideDown(200,function(){i.css("display","block"),t.removeClass("collapsed")}),e.collapsed=!1,this.dom().triggerHandler("ev_panel_open")},isOpen:function(){return!this.getContainer().hasClass("collapsed")},hideTitle:function(){var e=this.getContainer(),t=e.find("div.panel-header"),i=e.find("div.panel-content");t.hide(),i.css("padding-top",0)}}),$.su.Widget.register("htmlLoader",{settings:{},init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"html-loader-container")},load:function(e,t){var i=this.getContainer();i&&("object"===$.type(e)?i.append(e):"string"===$.type(e)&&i.html(e),t&&t())},unload:function(){}}),$.su.Widget.register("mask",{settings:{},init:function(){},render:function(){this.dom().addClass("mask"),this.useMap={},this.hide()},show:function(e){var t=this.dom();e&&!this.useMap.hasOwnProperty(e)&&(this.useMap[e]=!0,t.show().addClass(e),this.resetZIndex())},hide:function(e){var t=this.dom();!1===e?t.hide().removeClass().addClass("mask"):(this.useMap.hasOwnProperty(e)&&(delete this.useMap[e],t.removeClass(e)),this.resetZIndex(),this.checkUse()||t.hide())},resetZIndex:function(){var e=0,t=!1;for(var i in this.useMap)if(this.useMap.hasOwnProperty(i)){t=!0;var s=parseInt($("#"+i).css("zIndex"));e<s&&(e=s)}t&&0!=e||(e=998),_this=this.dom().css({zIndex:e})},checkUse:function(){for(var e in this.useMap)if(this.useMap.hasOwnProperty(e))return!0;return!1}}),$.su.Widget.register("loading",{settings:{firstLoading:{attribute:"first-loading",defaultValue:!1}},init:function(){},render:function(){var e,t=this.dom(),i=this.settings;!1===i.firstLoading?(e='<div class="loading-container-wrap">',e+='<div class="loading-container-inner">',e+='<div class="loading-waiting-icon">',e+="</div>",e+="</div>",e+="</div>"):!0===i.firstLoading&&(e='<div class="first-loading">',e+='<div class="loading-spinner-icon"></div>',e+='<div class="loading-text">'+$.su.SMB_CHAR.TIP.LOADING+"</div>",e+="<br />",e+='<div class="loading-text">'+$.su.SMB_CHAR.TIP.WEB_BROWSER+"</div>",e+="</div>"),t.addClass("loading-container").append(e),this.useMap={},this.hide()},show:function(){var e=this.dom();this.getMask().show(this.domId),e.show()},hide:function(){var e=this.dom();this.getMask().hide(this.domId),e.hide()}}),$.su.Widget.register("echart",{settings:{type:{attribute:"type",defaultValue:"line"},width:{attribute:"width",defaultValue:480},height:{attribute:"height",defaultValue:280},autoResize:{attribute:"auto-resize",defaultValue:!1},chartConfigs:{attribute:"echartConfigs",defaultValue:{title:{text:"",subtext:"",x:30,y:20,textStyle:{fontSize:14}},legend:{data:[]},tooltip:{trigger:"axis"},toolbox:{show:!1},calculable:!1,xAxis:[{axisLine:{lineStyle:{color:"#222",width:1,type:"solid"},onZero:!1},axisTick:{show:!1},splitLine:{show:!0},type:"category",boundaryGap:!1,data:[]}],yAxis:[{axisLine:{lineStyle:{color:"#555",width:1,type:"solid"}},axisTick:{show:!1},type:"value",axisLabel:{formatter:"{value}"}}],series:[],animation:!1}}},listeners:[{selector:function(){return{parent:window}},event:"resize",condition:function(e){return!0===e.settings.autoResize},callback:function(e,t){t.resize()}}],init:function(){},destroy:function(){this.echart&&this.echart.clear(),this._isDestroyed=!0},render:function(e){var t=this,i=this.dom(),s=this.settings;i.addClass(s.cls+"chart-container"),i.append('<div class="chart-before"></div><div class="chart-area"><div class="chart-scale"></div><div class="chart-canvas"></div></div><div class="chart-after"></div>');var a=$.Deferred();return window.echarts===undefined?$.su.router.loadFile("js/libs/echarts.min.js?t=9599d0db",function(){if(t._isDestroyed)return a.resolve();n(),a.resolve()}):window.echarts&&(n(),a.resolve()),a.promise();function n(){"line"===s.type?t.initLine():"pie"===s.type?t.initPie():"gauge"===s.type&&t.initGauge(),t.resize("100%"==s.width?i.parent().width():s.width,"100%"==s.height?i.parent().height():s.height)}},reCreateCanvas:function(){var e=this.dom(),t=this.settings;e.find("div.chart-canvas").empty(),t.canvas=document.createElement("canvas"),t.canvas.width=t.width,t.canvas.height=t.height,e.find("div.chart-canvas").append(t.canvas),window.G_vmlCanvasManager&&(t.canvas=window.G_vmlCanvasManager.initElement(t.canvas)),this.ctx=t.canvas.getContext("2d")},resize:function(e,t){var i=this.dom();e=e||i.parent().width(),t=t||i.parent().height(),i.find(".chart-canvas").css({width:e,height:t}),this.echart.resize()},initLine:function(){for(var e=this.dom(),t=this.settings.chartConfigs,i=t.xAxis[0].data.length,s=0,a=t.series.length;s<a;s++){var n=t.series[s];n.data=this.adjustDataLength(i,n.data)}this.echart=echarts.init(e.find(".chart-canvas").get(0))},initPie:function(){var e=this.dom();this.settings,this.echart=echarts.init(e.find(".chart-canvas").get(0))},initGauge:function(){var e=this.dom();this.settings,this.echart=echarts.init(e.find(".chart-canvas").get(0))},adjustDataLength:function(e,t){if(t.length>e)t.length=e;else if(t.length<e)for(;t.length<e;)t.push("-");return t},addData:function(e){for(var t=this.echart.getOption().series,i=e.length,s=0;s<i;s++){var a=e[s],n=t[a.seriesIndex].data,r=a.dataIndex;r>n.length-1?(n.shift(),n.push(a.data)):n[r]=a.data}this.echart.setOption({series:t})},setSeries:function(e){for(var t=this.echart.getOption().xAxis[0].data.length,i=0,s=e.length;i<s;i++)e[i].data=this.adjustDataLength(t,e[i].data);this.echart.setOption({series:e},!1)},setOption:function(e,t){var i=this.settings;if((t=t!==undefined&&t)&&(e=$.extend(!0,{},i.chartConfigs,e)),e.xAxis){var s=e.xAxis[0].data.length;e.series=e.series||[];for(var a=0,n=i.chartConfigs.series.length;a<n;a++){var r=e.series[a]=e.series[a]||{};r.data=this.adjustDataLength(s,r.data||[])}}this.echart.setOption(e,t)},setPieOption:function(e,t){this.settings,this.echart.setOption(e,t)},setGaugeOption:function(e,t){this.echart.setOption(e,t)}}),$.su.Widget.register("accordion",{settings:{},listeners:[{selector:".accordion-header",event:"click",callback:function(e,t){var i,s=$(e.target).parent(".accordion-header").parent(".accordion-item"),a=t.dom();if(!0===a.data("conflict"))for(var n=a.find(".accordion-item.accordion-item-wrap"),r=0,o=n.length;r<o;r++)if(!$(n[r]).hasClass("collapsed")){i=$(n[r]);break}s.hasClass("collapsed")?(t.expandItem(s),i&&t.collapseItem(i)):t.collapseItem(s),0<t.dom().parents(".msg-container").length&&setTimeout(function(){$(window).trigger("resize")},201)}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"accordion-container");var i=e.find(".accordion-item"),s="";s+='<div class="accordion-wrap">';for(var a=0,n=i.length;a<n;a++){var r=$.su.getAttrObject($.su.CHAR,$(i[a]).data("title")),o=!1!==$(i[a]).data("collapsed"),d=$(i[a]).data("name")||"accordion-name";s+=o?'<div class="accordion-item accordion-item-wrap collapsed" data-name="'+d+'">':'<div class="accordion-item accordion-item-wrap" data-name="'+d+'">',s+='<div class="accordion-header">',s+='<span class="accordion-icon"></span>',s+='<span class="accordion-title">'+r+"</span>",s+="</div>",s+='<div class="accordion-body"></div>',s+="</div>"}s+="</div>";var l=$(s);for(a=0;a<n;a++)$(l.find(".accordion-body")[a]).append(i[a]);e.append(l)},collapseItem:function(e,t){if(e){t=t===undefined?200:t;var i=e.find(".accordion-body");e.hasClass("collapsed")||i.slideUp(t,function(){e.addClass("collapsed")})}},expandItem:function(e,t){if(e){t=t===undefined?200:t;var i=e.find(".accordion-body");e.hasClass("collapsed")&&i.slideDown(t,function(){e.removeClass("collapsed")})}},reSet:function(){for(var e=this.dom().find(".accordion-item.accordion-item-wrap"),t=0,i=e.length;t<i;t++){var s=$(e[t]);0===t?this.expandItem(s,0):this.collapseItem(s,0)}},"goto":function(e){if(e)for(var t=this.dom().find(".accordion-item.accordion-item-wrap"),i=0,s=t.length;i<s;i++){var a=$(t[i]);e===a.data("name")?this.expandItem(a,0):this.collapseItem(a,0)}}});var Notes=$.su.Widget.register("notes",{settings:{title:{attribute:"title",defaultValue:""},autoIndex:{attribute:"autoIndex",defaultValue:!0},items:{attribute:"items",defaultValue:null}},listeners:[],init:function(){},render:function(){this.element=this.dom(),this.element.addClass("notes-ctn").empty(),this.settings.title=this.settings.title||$.su.CHAR.COMMON.NOTE+":",this.element.append('<div class="notes-title">'+this.settings.title+"</div>"),this.element.append(this.createListItem(this.settings.items))},createListItem:function(e){if(e&&$.isArray(e)){for(var t,i='<ul class="notes-ul">',s=1,a=0,n=e.length;a<n;a++)(t="")!=(t=$.isFunction(e[a].renderer)?e[a].renderer(e[a].text):e[a].text)&&(!0===this.settings.autoIndex&&(t='<span class="notes-index">'+s+'.</span> <span class="notes-content">'+t+"</span>",s++),i+='<li class="notes-li">',i+=t,i+="</li>");return i+="</ul>"}}});jQuery,$.su.Widget.register("toast",{settings:{noticeText:{attribute:"notice-text",defaultValue:""},showTime:{attribute:"show-time",defaultValue:3e3},fadeTime:{attribute:"fade-time",defaultValue:300}},listeners:[{selector:"div.close",event:"click",callback:function(e,t){e.preventDefault(),e.stopPropagation(),t.hide()}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+" notice-bar-container"),e.css({"display":"none"});var i="";i+='<div class="img-wrap">',i+='<span class="icon"></span>',i+="</div>",i+='<div class="text-wrap">',i+='<span class="text">'+t.noticeText+"</span>",i+="</div>",i+='<div class="close">',i+="</div>",e.append(i)},show:function(e,t,i){var s=this.dom(),a=this,n=this.settings;s.removeClass("success fail other"),t?1==t?s.addClass("fail"):2==t&&s.addClass("other"):s.addClass("success"),e&&this.setText(e),n.timerFlag&&clearTimeout(n.timer),this.dom().fadeIn(n.fadeTime);var r="number"==typeof i?i:n.showTime;this.settings.timer=setTimeout(function(){a.hide()},r),n.timerFlag=!0,this.setPosition("center","auto",null,68)},hide:function(e){this.dom(),this.dom().stop(!0).fadeOut(e?0:this.settings.fadeTime),this.settings.timerFlag=!1},setText:function(e){"string"==typeof e&&this.dom().find("span.text").text(e)}}),$.su.Widget.register("img",{settings:{imgSrc:{attribute:"img-src",defaultValue:""},alt:{attribute:"alt",defaultValue:""}},listeners:[],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=$.su.getAttrObject($.su.imgSrc,t["img-src"]);e.addClass("img-container");var s="";s+='<img src="'+i+'" alt="'+t.alt+'"/>',e.append(s)}}),function(s){s.su.Widget.register("repeatItem",{extend:"form",remove:function(){var e=this.dom();e.find("[widget]").each(function(e,t){var i=s(t).data("viewObj");i&&i._destroy()}),e.remove(),this.settings=null,this._view&&this._view.removeChildWidget(this)}})}(jQuery),function(m){m.su.Widget.register("repeat",{settings:{items:{attribute:"items",defaultValue:[]},itemWidget:{attribute:"item-widget",defaultValue:null},itemDom:{attribute:"item-dom",defaultValue:null},itemDataLoader:{attribute:"item-data-loader",defaultValue:"loadData"},autoRenderAllItems:{defaultValue:!0},itemCls:{attribute:"item-cls",defaultValue:""}},init:function(){this.repeatId=m.su.randomId("repeat-"),this._keys=[],this._renderedItems=[]},render:function(){var e=this.dom(),t=this.settings;if(e.addClass("repeat-container"),!t.itemWidget&&!t.itemRender){e.wrapInner(function(){return'<div class="repeat-item '+t.itemCls+'"></div>'}),this.initItem=e.find(".repeat-item"),this.itemModel=this.initItem.clone();var i=[];this.initItem.find("[widget]").each(function(e,t){i.push(m(t).data("viewObj"))}),m.each(i,function(e,t){t._destroy()}),this.initItem.detach()}},clearItems:function(){},syncData:function(e,t){this._keys=e,m.each(this._renderedItems,function(e,t){t.obj.dom().remove()}),this.dom().empty(),this._renderedItems=[],this.settings.autoRenderAllItems&&this.dom().triggerHandler("ev_store_render_items",[e])},setItemRender:function(e){this.settings.itemRender=e},renderModels:function(e,t,i){var a=this,s=this.dom(),n=this.settings,r=n.itemWidget;s.attr("tagName");if(r){var o=s.clone(!1),d=n.itemDataLoader;o.removeAttr("id"),o.removeAttr("item-Widget"),o.removeAttr("item-dom"),o.removeAttr("item-data-loader"),o.removeAttr("data-bind"),o.removeClass("repeat-container"),o.attr("widget",r),o.attr("repeat-id",this.repeatId);for(var l=0;l<t.length;l++){var c=t[l].getData();(v=o.clone(!1)).attr("id",m.su.randomId("widget-")),s.append(v),(g=new m.su.widgets[r]({id:v,view:a._view})).render(),d&&g[d](c),this._renderedItems.push({key:t[l][e].getValue(),obj:g})}i&&i(this._renderedItems)}else if(n.itemRender){for(l=0;l<t.length;l++){c=t[l].getData();var u=t[l][e].getValue(),h=n.itemRender.call(this,u,c),p=m(h);p.on("click",function(e,t){return function(){s.trigger("ev_item_click",[e,t])}}(u,c)),s.append(p);var f=new m.su.widgets.repeatItem({id:p});f.render(),this._renderedItems.push({key:u,obj:f})}i&&i(this._renderedItems)}else{for(l=0;l<t.length;l++){var v;(v=this.itemModel.clone(!1)).attr("id",m.su.randomId("widget-")),v.find("[id]").each(function(e,t){m(t).attr("id",m.su.randomId("widget-"))}),s.append(v);var g=new m.su.widgets.repeatItem({id:v});v.find("[widget]").each(function(e,t){var i=m(t),s=i.attr("widget");new m.su.widgets[s]({id:i,view:a._view}).render()}),g.render(),this._renderedItems.push({key:t[l][e].getValue(),obj:g})}i&&i(this._renderedItems)}},remove:function(e){var t,i,s=this._renderedItems;if(e)for(t=s.length-1;0<=t;t--)s[t].key===e&&(s[t].obj._destroy(),s.splice(t,1));else{for(t=0,i=s.length;t<i;t++)s[t].obj._destroy();s.length=0}},each:function(e){for(var t=0;t<this._renderedItems.length;t++){if(!1===e(this._renderedItems[t]))return}},find:function(e){var t=[];if("function"!=typeof e)return!1;for(var i=0;i<this._renderedItems.length;i++){var s=this._renderedItems[i].obj;e(s)&&t.push(s)}return t}})}(jQuery),function(p){p.su.Widget.register("devicesList",{settings:{multiselect:{attribute:"multiselect",defaultValue:!1},maxLine:{attribute:"max-line",defaultValue:4},scroll:{attribute:"scroll",defaultValue:!1},pagination:{attribute:"pagination",defaultValue:!0},numPerPage:{attribute:"num-per-page",defaultValue:8}},listeners:[{selector:".devicesList-item-container",event:"click",callback:function(e,t){e.stopPropagation();var i=p(this).data("viewObj");if(!i._status.disabled){var s=i._relatedData,a=t.dom();if(t.settings.multiselect){var n=p(this).find(".devicesList-item-checkbox[widget=checkbox]").data("viewObj"),r=e.target?e.target:e.srcElement,o=p(r).closest(".devicesList-item-checkbox[widget=checkbox]"),d=!n._status.checked;0<o.size()&&(d=!d);var l=t._selectedData;if(d)n.setValue(!0),l.push(s),p(this).addClass("item-selected"),a.triggerHandler("ev_item_select",s.key);else{n.setValue(!1);for(var c=0,u=l.length;c<u;c++)if(s.key==l[c].key){l.splice(c,1);break}p(this).removeClass("item-selected"),a.triggerHandler("ev_item_deselect",s.key)}}else{t._selectedData[0]=s;var h=t.getSelected();a.triggerHandler("ev_item_click",h),p(this).closest("[widget=devicesList]").find(".item-selected").removeClass("item-selected"),p(this).addClass("item-selected")}}}},{selector:".devicesList-paging-container .paging-btn",event:"click",callback:function(e,t){var i=t.dom().find(".devicesList-item-container"),s=parseInt(p(this).text()),a=t.settings.numPerPage,n=t.dom().find(".paging-btn-num");i.hide(),isNaN(s)&&(s=p(this).hasClass("pageing-btn-prev")?1:n.length),i.filter(function(e){return(s-1)*a<=e&&e<s*a}).show(),t.dom().find(".current").removeClass("current"),n.hide(),s<=2?n.filter(function(e){return e<=4}).show():s>=n.length-1?n.filter(function(e){return e>=n.length-5}).show():n.filter(function(e){return s-3<=e&&e<=s+1}).show(),n.eq(s-1).addClass("current")}}],init:function(e){this._keys=[],this._renderedItems=[],this._selectedData=[];var t=this.settings.host;t&&t.setted&&(t.trueValue=t.trueValue!==undefined?t.trueValue:"HOST",t.name=t.name!==undefined?t.name:"host"),this._deviceList={"pc":"pc","android":"phone","iPhone":"phone","phone":"phone","mac":"pc","pad":"pad","iPad":"pad","camera":"camera","printer":"printer","usb":"usb","router":"router","rangeextender":"re","deco":"deco"}},render:function(){for(var e=this.settings,t=this.dom(),i=[],s=0;s<e.configs.length;s++)i.push(e.configs[s].type.toLowerCase());i.sort(),i.push("list"),i=i.join("-"),t.addClass("devicesList-container widget-container "+i);t.append('<ul class="devicesList-content-container"></ul>')},syncData:function(e,t){this.dom().find(".devicesList-content-container").empty(),this._keys=e,this._renderedItems=[],this._selectedData=[],this.dom().triggerHandler("ev_store_render_items",[e])},renderModels:function(e,t,i){for(var s=this.dom().find(".devicesList-content-container"),a=this.settings,n=0;n<t.length;n++){var r=t[n].getData(),o=t[n][e].getValue(),d=p('<li id="'+this.domId+"-item-"+n+'" class="devicesList-item-container" data-key="'+o+'"></li>'),l=p(this.renderContent(r));d.append(l).appendTo(s);var c=new p.su.widgets.form({id:d});if(c.render(),c._relatedData={key:o,data:r},a.multiselect){var u=p('<div widget="checkbox" class="devicesList-item-checkbox" name="devicesList-item-checkbox"></div>').appendTo(d);new p.su.widgets.checkbox({id:u}).render(),d.addClass("multi-select")}else d.addClass("single-select");this._renderedItems.push({key:o,obj:c})}i&&i(this._renderedItems),this.renderdevicesList()},renderdevicesList:function(){var s=this.dom(),e=this.settings,t=e.maxLine,i=e.numPerPage,a=s.find(".devicesList-item-container"),n=a.eq(0).outerHeight(!0)*t;if(a.length>i&&!e.scroll&&e.pagination){var r=Math.ceil(a.length/i);a.filter(function(e){return i<=e}).hide(),function o(){var e='<div class="devicesList-paging-container paging-container disabled">';e+='<div class="paging-wrap">',e+='<div class="paging-btns inline-block">',5<r&&(e+='<a href="javascript:void(0);" class="paging-btn pageing-btn-prev" data-index="prev">',e+='<span class="icon"></span><span class="text"><</span></a>');e+='<div class="num-buttons-container">';for(var t=0;t<r;t++)e+='<a href="javascript:void(0);" class="paging-btn paging-btn-num pageing-btn-'+t+'">',e+='<span class="icon"></span>',e+='<span class="text">'+(t+1)+"</span>",e+="</a>";e+="</div>",5<r&&(e+='<a href="javascript:void(0);" class="paging-btn pageing-btn-next" data-index="next">',e+='<span class="icon"></span><span class="text">></span></a>');e+="</div></div></div>",s.find(".devicesList-paging-container").remove(),p(e).appendTo(s);var i=s.find(".paging-btn-num");i.eq(0).addClass("current"),5<r&&i.filter(function(e){return 5<=e}).hide()}()}else e.scroll&&(s.outerHeight(n),s.css({"overflow-y":"scroll"}))},renderContent:function(e){if(e!=undefined){e=p.su.escapeHtmlForObject(e);var t=this.settings,i=t.configs,s=this._deviceList,a=t.host,n="";a&&a.setted&&(n=a.trueValue===e[a.name]?" host":"");for(var r='<div class="devicesList-item-content">',o=0,d=i.length;o<d;o++){var l=i[o].type.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),c=i[o].dataIndex;if("logo"==l)r+='<div class="logo-container"><span class="'+(n="icon icon-"+(e[c]?s[e[c]]:s["pc"])+n)+'"></span></div>';else r+='<div class="devicesList-item devicesList-item-'+l+'">',r+='<span class="content-label">'+(i[o].label?i[o].label+": ":"")+"</span>",i[o].renderer?r+='<span class="content">'+i[o].renderer.call(i[o],e[c],e)+"</span></div>":r+='<span class="content">'+e[c]+"</span></div>"}return r+="</div>"}},getSelected:function(){for(var e=this._selectedData,t=[],i=0,s=e.length;i<s;i++)t.push(e[i].data);return t},disable:function(e){e==undefined&&(e=this._keys);for(var t=0,i=(e=p.isArray(e)?e:[e]).length;t<i;t++){var s=p(".devicesList-item-container[data-key="+e[t]+"]");s.attr("disabled",!0).addClass("disabled"),s.data("viewObj")._status.disabled=!0}},enable:function(e){e==undefined&&(e=this._keys);for(var t=0,i=(e=p.isArray(e)?e:[e]).length;t<i;t++){var s=p(".devicesList-item-container[data-key="+e[t]+"]"),a=s.data("viewObj");a._status.disabled&&(s.removeAttr("disabled").removeClass("disabled"),a._status.disabled=!1)}},selectItems:function(e){e==undefined&&(e=this._keys);for(var t=0,i=(e=p.isArray(e)?e:[e]).length;t<i;t++){var s=p(".devicesList-item-container[data-key="+e[t]+"]");s.hasClass("item-selected")||this._viewSelect(s)}},unselectItems:function(e){e==undefined&&(e=this._keys);for(var t=0,i=(e=p.isArray(e)?e:[e]).length;t<i;t++){var s=p(".devicesList-item-container[data-key="+e[t]+"]");s.hasClass("item-selected")&&this._viewSelect(s)}},_viewSelect:function(e){var t=e.data("viewObj");if(!t._status.disabled){var i=t._relatedData;if(this.settings.multiselect){var s=e.find(".devicesList-item-checkbox[widget=checkbox]").data("viewObj"),a=!s._status.checked,n=this._selectedData;if(a)s.setValue(!0),n.push(i),e.addClass("item-selected");else{s.setValue(!1);for(var r=0,o=n.length;r<o;r++)if(i.key==n[r].key){n.splice(r,1);break}e.removeClass("item-selected")}}else this._selectedData[0]=i,e.closest("[widget=devicesList]").find(".item-selected").removeClass("item-selected"),e.addClass("item-selected")}}})}(jQuery),function(h){h.su.Widget.register("searchList",{settings:{multiselect:{attribute:"multiselect",defaultValue:!1},maxLine:{attribute:"max-line",defaultValue:4},scroll:{attribute:"scroll",defaultValue:!1},numPerPage:{attribute:"num-per-page",defaultValue:10},pathSeparator:{attribute:"path-separator",defaultValue:">"}},listeners:[{selector:".devicesList-item-container",event:"click",callback:function(e,t){e.stopPropagation();var i=h(this).data("viewObj");if(!i._status.disabled){var s=i._relatedData;if(t.settings.multiselect){var a=h(this).find(".devicesList-item-checkbox[widget=checkbox]").data("viewObj"),n=e.target?e.target:e.srcElement,r=h(n).closest(".devicesList-item-checkbox[widget=checkbox]"),o=!a._status.checked;0<r.size()&&(o=!o);var d=t._selectedData;if(o)a.setValue(!0),d.push(s),h(this).addClass("item-selected");else{a.setValue(!1);for(var l=0,c=d.length;l<c;l++)if(s.key==d[l].key){d.splice(l,1);break}h(this).removeClass("item-selected")}}else{t._selectedData.push(s);var u=t.getSelected();t.dom().triggerHandler("ev_item_click",u),h(this).closest("[widget=devicesList]").find(".item-selected").removeClass("item-selected"),h(this).addClass("item-selected")}}}},{selector:".searchList-paging-container .paging-btn",event:"click",callback:function(e,t){var i=t.dom().find(".searchList-item-container"),s=parseInt(h(this).text()),a=t.settings.numPerPage,n=t.dom().find(".paging-btn-num");i.hide(),isNaN(s)&&(s=h(this).hasClass("pageing-btn-prev")?1:n.length),i.filter(function(e){return(s-1)*a<=e&&e<s*a}).show(),t.dom().find(".current").removeClass("current"),n.hide(),s<=2?n.filter(function(e){return e<=4}).show():s>=n.length-1?n.filter(function(e){return e>=n.length-5}).show():n.filter(function(e){return s-3<=e&&e<=s+1}).show(),n.eq(s-1).addClass("current")}}],init:function(e){},render:function(){this.settings;var e=this.dom();e.addClass("searchList-container widget-container ");var t="";t+='<div class="searchList-header">',t+='<div class="searchList-results-title">',t+='<span class="searchList-results-label">'+h.su.CHAR.SEARCH.SEARCH_RESULTS+"</span>",t+='<span class="searchList-results-separator"> - </span>',t+='<span class="searchList-results-count">'+h.su.CHAR.SEARCH.RESULTS+"</span>",t+="</div>",t+="</div>",t+='<div class="no-results-prompt">',t+="<p>"+h.su.CHAR.SEARCH.NO_RESULTS_PROMPT+"</p>",t+="</div>",t+='<div class="searchList-content-container">',t+='<ul class="searchList-content-ul"></ul>',t+="</div>",e.append(t),h.su.scrollbar({ele:".searchList-content-ul"})},loadItems:function(e){var t=this.dom().find(".searchList-content-ul"),i=(this.settings,this.dom());t.empty();var s=e.length;if(0===s)i.find(".no-results-prompt").show(),i.find(".searchList-content-container").hide();else{i.find(".no-results-prompt").hide(),i.find(".searchList-content-container").show();for(var a=0;a<s;a++){var n=e[a],r=h('<li id="'+this.domId+"-item-"+a+'" class="searchList-item-container"></li>'),o=h(this.renderContent(n));r.append(o).appendTo(t)}}i.find(".searchList-results-count").text(s+" "+h.su.CHAR.SEARCH.RESULTS),this.renderSearchList()},renderSearchList:function(){var s=this.dom(),e=this.settings,t=e.maxLine,i=e.numPerPage,a=s.find(".searchList-item-container"),n=a.eq(0).outerHeight(!0)*t;if(a.length>i&&!e.scroll){var r=Math.ceil(a.length/i);a.filter(function(e){return i<=e}).hide()}else e.scroll&&(s.outerHeight(n),s.css({"overflow-y":"scroll"}));!function o(){var e='<div class="searchList-paging-container paging-container disabled">';e+='<div class="paging-wrap">',e+='<div class="paging-btns inline-block">',5<r&&(e+='<a href="javascript:void(0);" class="paging-btn pageing-btn-prev" data-index="prev">',e+='<span class="icon"></span><span class="text"><</span></a>');e+='<div class="num-buttons-container">';for(var t=0;t<r;t++)e+='<a href="javascript:void(0);" class="paging-btn paging-btn-num pageing-btn-'+t+'">',e+='<span class="icon"></span>',e+='<span class="text">'+(t+1)+"</span>",e+="</a>";e+="</div>",5<r&&(e+='<a href="javascript:void(0);" class="paging-btn pageing-btn-next" data-index="next">',e+='<span class="icon"></span><span class="text">></span></a>');e+="</div></div></div>",s.find(".searchList-paging-container").remove(),h(e).appendTo(s);var i=s.find(".paging-btn-num");i.eq(0).addClass("current"),5<r&&i.filter(function(e){return 5<=e}).hide()}()},renderContent:function(e){var t=this.settings,i=e.name,s=e.path,a=e.introduction,n=t.pathSeparator;h.isArray(s)||(s=[s]);var r='<div class="searchList-item-content">',o=s.length;r+='<a href="#'+i+'">';for(var d=0;d<o;d++)r+='<span class="path-node">'+this.handleSearchItemContent(s[d])+"</span>",d!=o-1&&(r+='<span class="path-separator"> '+n+" </span>");return r+="</a>",""!=a&&(r+='<div class="searchList-item-introduction">'+a+"</div>",r+="</div>"),r},setSearchWorld:function(i){this.dom().find(".searchList-item-content").each(function(){var e=h(this).find(".path-node").last();wordTransed=i.replace(/[\*\.\?\+\$\^\[\]\(\)\{\}\|\\\/]/g,function(e){return"\\"+e});var t=new RegExp(wordTransed,"i");e.html(e.text().replace(t,function(e){return'<span class="searchList-matched-text">'+e+"</span>"}))})},handleSearchItemContent:function(e){return e}})}(jQuery),function(){var i=$.su.Widget.register("AXNavigator",{extend:"navigator",listeners:function(){return[{selector:"li.navigator-li a",event:"click",callback:function(e,t){var i=$(this).parent().attr("navi-value");t.hasChildren(i)&&t.toggleOpen(i),i&&t.dom().triggerHandler("ev_navigator_clicked",[i]),e.stopPropagation()}},{selector:"",event:"click",callback:function(e,t){e.stopPropagation()}},{selector:".navigator-li>a",event:"mouseenter",callback:function(e,t){$(this).addClass("hover")}},{selector:".navigator-li>a",event:"mouseleave",callback:function(e,t){$(this).removeClass("hover")}}]},render:function(){i.superclass.render.call(this),this.initCloseAll()},loadItems:function(e,t){i.superclass.loadItems.call(this,e),this.initCloseAll(),this.dom().triggerHandler("ev_navigator_loaded",[e,t])},hide:function(e){var t=this.dom();t.removeClass("show"),t.slideUp(e==undefined?200:0).addClass("hidden")},show:function(e){var t=this.dom();t.removeClass("hidden"),t.slideDown(e==undefined?200:0).addClass("show")},toggleShow:function(){var e=this.dom();e.hasClass("show")?e.slideUp(200).addClass("hidden"):e.slideDown(200).removeClass("hidden"),e.toggleClass("show")},select:function(e){this.dom();this.unSelectAll(),this.closeSiblings(e);var t=this.find(e);t.addClass("selected"),t.parentsUntil($(".navigator-ul-level1"),".navigator-li").addClass("has-child-selected")},unSelectAll:function(){var e=this.dom().find("li.navigator-li.selected");e.removeClass("selected"),e.parentsUntil($(".navigator-ul-level1"),".navigator-li").removeClass("has-child-selected")},openItem:function(e){e.addClass("opened").children("ul.navigator-ul").slideDown(200)},closeItem:function(e){e.removeClass("opened").children("ul.navigator-ul").slideUp(200)},closeAll:function(){var e=this.dom();e.find("li.navigator-li").removeClass("opened"),e.find("ul.navigator-ul-sub").slideUp(0)},initCloseAll:function(){this.dom().find("ul.navigator-ul-sub").slideUp(0)},open:function(e){var t=this.find(e);this.closeSiblings(e),this.openItem(t),this.dom().triggerHandler("ev_navigator_opened",[e])},close:function(e){var t=this.find(e);this.closeSiblings(e),this.closeItem(t),this.closeItem(t.find("li.navigator-li"))},closeSiblings:function(e){var t=this.find(e).siblings("li.navigator-li.opened"),i=t.find("li.navigator-li.opened");this.closeItem(t),this.closeItem(i)},isOpened:function(e){return this.find(e).hasClass("opened")},toggleOpen:function(e){this.isOpened(e)?this.close(e):this.open(e)},addClass:function(e){return this.dom().addClass(e)},removeClass:function(e){return this.dom().removeClass(e)}})}(),$.su.Widget.register("search",{settings:{itemName:{attribute:"item-name",defaultValue:""}},listeners:[{selector:function(){return{parent:"#"+this.textbox.domId}},event:"ev_view_change",callback:function(e,t,i){if("value"==t.type){var s=t.value;i.dom().triggerHandler("ev_view_change",[{"type":"value","value":s}])}}},{selector:"input",event:"focus",callback:function(e,t){t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.textbox.getValue()}]),t.dom().find(".search-content-container").show()}},{selector:"",event:"blur",callback:function(e,t){t.dom().find(".search-content-container").hide()}},{selector:"",event:"keydown",callback:function(e,t){var i=t.dom().find("li.search-content-li"),s=i.length,a=t.dom().find("li.search-content-li.focused"),n=a.index(),r=e.keyCode;40==r?n<0&&0<s?i.eq(0).addClass("focused"):0<=n&&n<s-1&&(i.eq(n).removeClass("focused"),i.eq(n+1).addClass("focused")):38==r?(0<n?(i.eq(n).removeClass("focused"),i.eq(n-1).addClass("focused")):0==n&&i.eq(n).removeClass("focused"),e.preventDefault()):13==r&&0<=n&&a.trigger("click")}},{selector:"li.search-content-li",event:"click",callback:function(e,t){var i=$(this).attr("event-key");i&&t.dom().triggerHandler("ev_item_selected",[i]),t.dom().find(".search-content-container").hide()}}],init:function(){},render:function(){var e=this.dom();this.settings,e.empty();var t=$('<div widget="textbox"></div>');t.attr("id",this.domId+"-sub-textbox"),e.append(t),this.textbox=new $.su.widgets.textbox({id:t}),this.textbox.render(),e.append('<div class="search-content-container"><div class="search-content-ul-before"></div><ul class="search-content-ul"></ul><div class="search-content-ul-after"></div></div>')},setValue:function(e){this.textbox.setValue(e)},loadItems:function(e){if(e){var t=this.dom().find(".search-content-ul");t.empty();for(var i=e.length,s="",a=0;a<i;a++){var n=e[a];s+='<li class="search-content-li" event-key="'+n.name+'">',s+='<div class="search-content-li-body">',s+='<div class="search-content-li-text-before"></div>',s+='<div class="search-content-li-text">'+n.text+"</div>",s+='<div class="search-content-li-text-after"></div>',s+="</div>",s+="</li>"}t.append(s)}}}),$.su.Widget.register("timer",{settings:{},listeners:[],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"timer-container");var i="";null!==t.labelField&&(i+='<div class="widget-fieldlabel-wrap '+t.labelCls+'">',i+='<div class="widget-fieldlabel-inner">',i+='<label class="widget-fieldlabel timer-fieldlabel">'+t.labelField+"</label>",t.labelField&&(i+='<span class="widget-separator">'+t.separator+"</span>"),i+="</div>",i+="</div>"),i+='<div class="widget-wrap-outer text-wrap-outer">',i+='<span class="icon"></span>',i+='<span class="text"></span>',i+="</div>",e.empty().append(i)},setValue:function(e){var a=this.getContainer(),t=this.dom(),i=e,n=null,r="",s=function(e){if(e<=0)return 0==e&&a.triggerHandler("ev_time_end"),void clearInterval(n);var t=parseInt(e/3600),i=parseInt(e/60%60),s=parseInt(e%60);return r=t<10?"0"+t+":":t+":",i<10&&(r+="0"),r+=i+":",s<10&&(r+="0"),r+=s};r=s(i),t.find("span.text").text(r),i--,n=setInterval(function(){r=s(i),t.find("span.text").text(r),i--},1e3)},show:function(){this.dom().css("opacity","1")},hide:function(){this.dom().css("opacity","0")}}),function(n){n.su.Widget.register("wpsButton",{settings:{time:{attribute:"time",defaultValue:120},width:{attribute:"width",defaultValue:80},height:{attribute:"height",defaultValue:80}},listeners:[{selector:"div.wps-button-wrapper",event:"click",callback:function(e,s){if(!s.dom().hasClass("disabled")){var a=n(this);if(a.find("span.text").text()==n.su.CHAR.WPS.START){a.find("span.text").text(n.su.CHAR.WPS.CANCEL),a.find("span.text").addClass("cancel"),a.find("div.wps-mask").addClass("connecting");var t=n.Deferred();return window.echarts===undefined?n.su.router.loadFile("js/libs/echarts.min.js",function(){s.initCircle(),t.resolve()}):window.echarts&&(s.initCircle(),t.resolve()),t.then(function(){var t=s.settings.time,e=s.format(t);a.find("span.time").text(e);var i=function(){s.countDown(t);var e=s.format(t);a.find("span.time").text(e),0==--t&&(clearInterval(s.settings._countDownId),a.find("div.wps-button").html(""),a.find("span.time").text(""),a.find("span.text").text(n.su.CHAR.WPS.START),a.find("span.text").removeClass("cancel"),a.find("div.wps-mask").removeClass("connecting"))};i(),s.settings._countDownId=setInterval(i,1e3),s.dom().triggerHandler("ev_wps_button_click",[{"clickType":"start"}])}),t.promise()}clearInterval(s.settings._countDownId);var i=s.settings.time;s.countDown(i),a.find("span.time").text(""),a.find("span.text").text(n.su.CHAR.WPS.START),a.find("span.text").removeClass("cancel"),a.find("div.wps-mask").removeClass("connecting"),s.dom().triggerHandler("ev_wps_button_click",[{"clickType":"cancel"}])}}}],init:function(){},render:function(){var e=this.dom(),t=this.settings;e.addClass(t.cls+"wps-button-container");e.empty().append('<div class="wps-button-wrapper"><div class="wps-mask"></div><div class="wps-button-content"><div class="wps-button"></div><span class="text"></span><span class="time"></span></div></div>'),e.find(".wps-button-wrapper").css({width:t.width,height:t.height}),e.find(".wps-button-content").css({width:t.width,height:t.height}),e.find(".text").text(n.su.CHAR.WPS.START)},initCircle:function(){var e=this.dom(),t=this.settings,i=e.find(".wps-button").css({width:t.width,height:t.height}).get(0);this.echart=echarts.init(i)},countDown:function(e){this.dom(),this.settings;var t=this.setConfig(e);this.echart.setOption(t)},format:function(e){var t="";return t+=1<e/60?10<=e/60?parseInt(e/60)+":":"0"+parseInt(e/60)+":":"00:",t+=10<=e%60?parseInt(e%60):"0"+parseInt(e%60)},setConfig:function(e){var t=parseInt((120-e)/120*100);return{series:[{type:"pie",animation:!1,center:["50%","50%"],radius:[36,39],itemStyle:{normal:{label:{show:!1}}},data:[{name:"",value:t,itemStyle:{normal:{color:"gaming"==GLOBAL_STYLE?"#DC0800":"#4acbd6",label:{show:!0,position:"center"},labelLine:{show:!1}}}},{name:"invisible",value:100-t,itemStyle:{normal:{color:"rgba(0,0,0,0)",label:{show:!1},labelLine:{show:!1}},emphasis:{color:"rgba(0,0,0,0)"}}}]}]}},reset:function(){var e=this.dom().find("div.wps-button-wrapper");this.settings._countDownId&&clearInterval(this.settings._countDownId);var t=this.settings.time;this.countDown(t),e.find("span.time").text(""),e.find("span.text").text(n.su.CHAR.WPS.START),e.find("span.text").removeClass("cancel"),e.find("div.wps-mask").removeClass("connecting")},disable:function(){var e=this.dom();this.getContainer().addClass("disabled"),e.triggerHandler("ev_view_disable")},enable:function(){var e=this.dom();this.getContainer().removeClass("disabled"),e.triggerHandler("ev_view_enable")},setTimeLeft:function(e){this.dom();e&&(this.settings.time=e)}})}(jQuery),function(n){n.su.Widget.register("qosBtn",{settings:{},listeners:[{selector:"div.qos-btn-wrapper",event:"click",callback:function(e,t){if(!n(this).hasClass("disabled")&&!n(this).hasClass("disabled-case")){var i=n(this).attr("type");t.dom().triggerHandler("ev_qos_btn_click",[{"type":i}])}}}],init:function(){},render:function(){var e=this.dom();e.addClass("qos-btn-container");var t=n.su.serviceManager.get("device").getConfig().supportGFN,i='<div class="qos-btn-notice hidden"><span></span></div>';i+='<div class="qos-btn-set">',i+='<div class="qos-btn-wrapper fair" type="fair"'+(t?' style="display: none"':"")+" >",i+='<span class="icon"></span>',i+='<span class="text">'+n.su.CHAR.QOS.STANDARD+"</span>",i+='<div class="process"></div>',i+="</div> ",t&&(i+='<div class="qos-btn-wrapper geforce" type="geforce">',i+='<span class="icon"></span>',i+='<span class="text">'+n.su.CHAR.QOS.GEFORCE+"</span>",i+='<div class="process"></div>',i+="</div> "),i+='<div class="qos-btn-wrapper gaming" type="gaming">',i+='<span class="icon"></span>',i+='<span class="text">'+n.su.CHAR.QOS.GAMING+"</span>",i+='<div class="process"></div>',i+="</div> ",i+='<div class="qos-btn-wrapper streaming" type="streaming">',i+='<span class="icon"></span>',i+='<span class="text">'+n.su.CHAR.QOS.STREAMING+"</span>",i+='<div class="process"></div>',i+="</div> ",i+='<div class="qos-layout-breakpoint"></div>',i+='<div class="qos-btn-wrapper surfing" type="surfing">',i+='<span class="icon"></span>',i+='<span class="text">'+n.su.CHAR.QOS.SURFING+"</span>",i+='<div class="process"></div>',i+="</div> ",i+='<div class="qos-btn-wrapper chatting" type="chatting">',i+='<span class="icon"></span>',i+='<span class="text">'+n.su.CHAR.QOS.CHATTING+"</span>",i+='<div class="process"></div>',i+="</div> ",i+='<div class="qos-btn-wrapper custom" type="custom">',i+='<span class="icon"></span>',i+='<span class="text">'+n.su.CHAR.QOS.CUSTOM+"</span>",i+='<div class="process"></div>',i+="</div>",i+="</div>",e.empty().append(i)},setValue:function(e){var t=this.dom();(this.value=e)&&n.su.CHAR.QOS[e.toUpperCase()+"_NOTICE"]?t.find(".qos-btn-notice").text(n.su.CHAR.QOS[e.toUpperCase()+"_NOTICE"]).removeClass("hidden"):t.find(".qos-btn-notice").addClass("hidden")},getValue:function(){return this.value},initProcess:function(e){var t=this,i=this.dom(),s=e,a=i.find(".qos-btn-wrapper."+s);i.find(".qos-btn-wrapper."+s+" .process").removeClass("hidden");var n,r=i.find(".qos-btn-wrapper."+s+" .process").get(0);r.echart||(r.echart=echarts.init(r));var o=0,d=setInterval(function(){o<=100?(o++,n=t.setConfig(.75*o),r.echart.setOption(n)):(clearInterval(d),a.addClass("rotate"))},10)},process:function(e){if(e){var t=this;window.echarts===undefined?n.su.router.loadFile("js/libs/echarts.min.js",function(){t.initProcess(e)}):window.echarts&&t.initProcess(e);for(var i=this.dom().find(".qos-btn-wrapper"),s=0;s<i.length;s++)btnType=n(i[s]).attr("type"),btnType!=e?n(i[s]).addClass("disabled"):n(i[s]).addClass("disabled-case")}},setConfig:function(e){return{series:[{type:"pie",animation:!1,center:["50%","50%"],radius:[33,35],itemStyle:{normal:{label:{show:!1}}},data:[{name:"",value:e,itemStyle:{normal:{color:n.su.serviceManager.get("device").getConfig().supportGamingUIGX90?"#af0000":"#4acbd6",label:{show:!0,position:"center"},labelLine:{show:!1}}}},{name:"invisible",value:100-e,itemStyle:{normal:{color:"rgba(0,0,0,0)",label:{show:!1},labelLine:{show:!1}},emphasis:{color:"rgba(0,0,0,0)"}}}]}]}},successed:function(e){if(e){var t=this.dom();t.find(".qos-btn-wrapper").removeClass("rotate"),t.find(".qos-btn-wrapper .process").addClass("hidden"),t.find(".qos-btn-wrapper."+e).addClass("successed"),setTimeout(function(){t.find(".qos-btn-wrapper").removeClass("successed")},1e3);var i=e,s=t.find(".qos-btn-wrapper."+i+" .process").get(0),a=this.setConfig(0);s.echart&&s.echart.setOption(a),this.dom().find(".qos-btn-wrapper").removeClass("disabled"),this.dom().find(".qos-btn-wrapper").removeClass("disabled-case"),e&&n.su.CHAR.QOS[e.toUpperCase()+"_NOTICE"]?t.find(".qos-btn-notice").text(n.su.CHAR.QOS[e.toUpperCase()+"_NOTICE"]).removeClass("hidden"):t.find(".qos-btn-notice").addClass("hidden")}},failed:function(e){if(e){var t=this.dom();t.find(".qos-btn-wrapper").removeClass("rotate"),t.find(".qos-btn-wrapper .process").addClass("hidden"),t.find(".qos-btn-wrapper."+e).addClass("failed"),setTimeout(function(){t.find(".qos-btn-wrapper").removeClass("failed")},1e3);var i=e,s=t.find(".qos-btn-wrapper."+i+" .process").get(0),a=this.setConfig(0);s.echart&&s.echart.setOption(a),this.dom().find(".qos-btn-wrapper").removeClass("disabled"),this.dom().find(".qos-btn-wrapper").removeClass("disabled-case")}},setSelected:function(e){var t=this.dom().find(".qos-btn-wrapper");t.removeClass("selected");for(var i=0;i<t.length;i++)n(t[i]).attr("type")==e&&n(t[i]).addClass("selected")},setDisabled:function(){this.dom().find(".qos-btn-wrapper").addClass("disabled")},setAbled:function(){this.dom().find(".qos-btn-wrapper").removeClass("disabled")}})}(jQuery),function(a){a.su.Widget.register("customSlider",{settings:{},listeners:[{selector:"div.slider-content span.slider",event:"mousedown touchstart",callback:function(e,t){var i=a(this);t.startY=e.clientY||e.originalEvent.changedTouches[0].clientY,a("html").on("mousemove touchmove",{slider:i,viewObj:t},t.onMouseMove),a("html").on("mouseup touchend",{slider:i,viewObj:t},t.onMouseUp)}},{selector:"div",event:"click",callback:function(e,t){t.dom().triggerHandler("ev_click",[{type:t.settings.type}])}}],init:function(){},render:function(){var e=this.dom();this.settings;e.addClass("custom-slider-container");var t='<div class="custom-slider-wrapper">';t+='<div class="level-wrapper">',t+="<span>"+a.su.CHAR.QOS.HIGH+"</span>",t+="<span>"+a.su.CHAR.QOS.NORMAL+"</span>",t+="<span>"+a.su.CHAR.QOS.LOW+"</span>",t+="</div>",t+='<div class="slider-content-container">',t+='<div class="slider-content game">',t+='<span class="path"></span>',t+='<span class="slider"></span>',t+='<span class="text">'+a.su.CHAR.QOS.GAMING+"</span>",t+="</div>",t+='<span class="link"></span>',t+='<div class="slider-content media">',t+='<span class="path"></span>',t+='<span class="slider"></span>',t+='<span class="text">'+a.su.CHAR.QOS.STREAMING+"</span>",t+="</div>",t+='<span class="link"></span>',t+='<div class="slider-content surf">',t+='<span class="path"></span>',t+='<span class="slider"></span>',t+='<span class="text">'+a.su.CHAR.QOS.SURFING+"</span>",t+="</div>",t+='<span class="link"></span>',t+='<div class="slider-content chat">',t+='<span class="path"></span>',t+='<span class="slider"></span>',t+='<span class="text">'+a.su.CHAR.QOS.CHATTING+"</span>",t+="</div>",t+='<span class="link"></span>',t+='<div class="slider-content download">',t+='<span class="path"></span>',t+='<span class="slider"></span>',t+='<span class="text">'+a.su.CHAR.QOS.DOWNLOADING+"</span>",t+="</div>",t+="</div>",t+="</div>",e.empty().append(t)},onMouseMove:function(e){var t=e.data.viewObj,i=e.data.slider,s=(e.clientY||e.originalEvent.changedTouches[0].clientY)-t.startY,a=i.position().top+s;t.startY=e.clientY||e.originalEvent.changedTouches[0].clientY,a<0?t.sliderAdjust(i,0):175<a?t.sliderAdjust(i,175):t.sliderAdjust(i,a)},sliderAdjust:function(e,t){e.css("top",t),t<44?(this.classAdjust(e.parent(),"prior"),this.linkAdjust(e)):44<=t&&t<132?(this.classAdjust(e.parent(),"normal"),this.linkAdjust(e)):132<=t&&(this.classAdjust(e.parent(),"restrictive"),this.linkAdjust(e))},classAdjust:function(e,t){e.removeClass("prior"),e.removeClass("normal"),e.removeClass("restrictive"),e.addClass(t)},linkAdjust:function(e){var t=e.parent().prev(),i=e.parent().next(),s=e.position().top+12.5;if(e.parent().next().css("top",s),0!=t.length){var a=s-(e.parent().prev().prev().find("span.slider").position().top+12.5),n=Math.sqrt(Math.pow(a,2)+Math.pow(96,2)),r="rotate("+180*Math.atan(a/96)/Math.PI+"deg)";t.css({"width":n,"transform":r})}if(0!=i.length){a=e.parent().next().next().find("span.slider").position().top+12.5-s,n=Math.sqrt(Math.pow(a,2)+Math.pow(96,2)),r="rotate("+180*Math.atan(a/96)/Math.PI+"deg)";i.css({"width":n,"transform":r})}},updateSlider:function(){a("div")[0].style.borderRadius===undefined?a("div.custom-slider-wrapper span.link").css("display","none"):a("div.custom-slider-wrapper span.link").css("display","block");for(var e=a("div.custom-slider-wrapper span.slider"),t=0;t<e.length;t++){if(t<5){var i=96*t+48;a(e[t]).parent().next().css("left",i)}var s=a(e[t]).parent()[0].className.replace("slider-content ","");"prior"==this.params[s]?this.sliderAdjust(a(e[t]),0):"normal"==this.params[s]?this.sliderAdjust(a(e[t]),88):"restrictive"==this.params[s]&&this.sliderAdjust(a(e[t]),175)}},onMouseUp:function(e){var t=e.data.viewObj,i=e.data.slider;a("html").off("mousemove touchmove",t.onMouseMove),a("html").off("mouseup touchend",t.onMouseUp);var s=i.position().top;0<=s&&s<44?t.sliderAdjust(i,0):44<=s&&s<132?t.sliderAdjust(i,88):t.sliderAdjust(i,175),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":t.getValue()}])},setValue:function(e){null!=e&&(this.params=e,this.updateSlider())},getValue:function(){for(var e={},t=a("div.custom-slider-wrapper span.slider"),i=0;i<t.length;i++){var s=a(t[i]).parent()[0].className.replace("slider-content ","").split(" ");e[s[0]]=s[1]}return e}})}(jQuery),function(o){o.su.Widget.register("switchField",{settings:{fields:{attribute:"fields",defaultValue:null},supportViewSwitch:{attribute:"view-switch",defaultValue:!0}},listeners:[{selector:"div.fields-item-name",event:"click",callback:function(e,t){if(t.settings.supportViewSwitch){var i=o(this).attr("item");t.switchField(i)}}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=0,s=t.supportViewSwitch?"":" view-disabled";e.addClass(t.cls+"switch-field-container"+s);var a='<div class="switch-field-name-wrapper">';for(a+='<div class="switch-field-name">',i=0;i<t.fields.length;i++)a+='<div class="fields-item-name '+t.fields[i].name+(0==i?" first":"")+(i==t.fields.length-1?" lst":"")+'" item="'+t.fields[i].name+'"">',a+="<span>"+t.fields[i].text+"</span>",a+="</div>";a+="</div>",a+="</div>",a+='<div class="switch-field-content">',a+="</div>",e.append(a)},setSupportViewSwitch:function(e){var t=this.dom();(this.settings.supportViewSwitch=e)?t.removeClass("view-disabled"):t.addClass("view-disabled")},itemClick:function(e){this.dom().find("div.fields-item-name."+e).trigger("click")},getCurField:function(){var e=this.dom().find("div.fields-item-name.select"),t=null;return e.length&&(t=e.attr("item")),t},switchField:function(e){var t=this.dom();t.find("div.fields-item-name").removeClass("select select-prev");for(var i,s=this.settings.fields,a=null,n=0,r=s.length;n<r;n++)(i=s[n]).name===e?(o("div.fieldset-container."+(a=i).container).show(),t.find(".fields-item-name."+e).addClass("select").prev().addClass("select-prev")):o("div.fieldset-container."+i.container).hide();a&&t.triggerHandler("ev_switch_click",e)},switchPrev:function(){for(var e=this.dom(),t=this.settings,i=e.find(".fields-item-name.select").attr("item"),s=-1,a=t.fields,n=a.length;n--;)if(a[n].name==i){s=n;break}0<s&&this.switchField(t.fields[s-1].name)},switchNext:function(){for(var e=this.dom(),t=this.settings,i=e.find(".fields-item-name.select").attr("item"),s=-1,a=t.fields,n=a.length;n--;)if(a[n].name==i){s=n;break}0<=s&&s<a.length-1&&this.switchField(t.fields[s+1].name)}})}(jQuery),function(n){n.su.Widget.register("deviceSelect",{settings:{},listeners:[{selector:".close-icon",event:"click",callback:function(e,t){for(var i=n(this).attr("data-id"),s=n.su.clone(t.getValue()),a=0;a<s.length;a++)i==s[a].deviceId&&s.splice(a,1);t.dom().triggerHandler("ev_view_change",[{"type":"value","value":s}])}},{selector:".add-button",event:"click",callback:function(e,t){var i=t.getValue();t.dom().triggerHandler("ev_add_device",[{"type":"value","value":i}])}},{selector:".delete-button",event:"click",callback:function(e,t){t.dom().find(".close-icon").toggleClass("hidden")}}],init:function(){},render:function(){var e=this.dom();this.settings;e.addClass("device-list-container");e.empty().append('<div class="device-list-wrapper"></div>')},setValue:function(e){if(null!=e){var t=this.dom();this.settings;this.value=e;for(var i="",s=0;s<e.length;s++)i+='<div class="device">',i+='<div class="icon-wrapper">',i+='<div class="icon '+e[s].clientType+'"></div>',i+='<div class="close-icon hidden" data-id="'+e[s].deviceId+'"></div>',i+="</div>",i+='<div class="text" title="'+e[s].name+'">'+e[s].name+"</div>",i+="</div> ";i+='<div class="add-button">',i+='<span class="icon"></span>',i+="</div> ",i+='<div class="delete-button">',i+='<span class="icon"></span>',i+="</div> ",i+='<div class="layout-stand-in"></div> ',i+='<div class="layout-stand-in"></div> ',i+='<div class="layout-stand-in"></div> ',i+='<div class="layout-stand-in"></div> ',i+='<div class="layout-stand-in"></div> ',n(t).find(".device-list-wrapper").empty().append(i)}},getValue:function(){return this.value}})}(jQuery),function(o){o.su.Widget.register("editList",{settings:{delIconPos:{attribute:"del-icon-pos",defaultValue:"right"},addBtn:{attribute:"add-btn",defaultValue:!1},addText:{attribute:"add-text",defaultValue:""},itemCls:{attribute:"item-cls",defaultValue:""},idKey:{attribute:"id-key",defaultValue:"index"}},listeners:[{selector:".del-icon",event:"click",callback:function(e,t){var i=o(this).attr("data-id"),s=o.su.clone(t.getValue()),a=t.settings.idKey;if("index"==a)s.splice(i,1);else for(var n=0;n<s.length;n++)i==s[n][a]&&s.splice(n,1);t.dom().triggerHandler("ev_view_change",[{"type":"value","value":s}])}},{selector:".add-button",event:"click",callback:function(e,t){var i=t.getValue();t.dom().triggerHandler("ev_add_item",[{"type":"value","value":i}])}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?" label-empty":"";e.addClass(t.cls+" editlist-container"+i);var s="";null!==t.labelField&&(s+='<div class="widget-fieldlabel-wrap'+t.labelCls+(""==t.labelField?" empty":"")+'">',s+='<div class="widget-fieldlabel-inner">',s+='<label class="widget-fieldlabel editlist-fieldlabel">'+t.labelField+"</label>",t.labelField&&(s+='<span class="widget-separator">'+t.separator+"</span>"),s+="</div>",s+="</div>"),s+='<div class="widget-wrap-outer editlist-wrap-outer">',s+='<div class="widget-wrap editlist-wrap">',t.addBtn&&(s+='<a class="add-button" href="javascript:void(0)"><span class="add-icon"></span><span class="add-text">'+t.addText+"</span></a>"),s+="</div>",s+="</div>",e.empty().append(s)},setValue:function(e){if(null!=e){var t=this.dom(),i=this.settings,s=i.idKey,a=i.itemCls?" "+i.itemCls:"";this.value=e;for(var n="",r=0;r<e.length;r++)n+='<div class="list-item'+a+'">',n+=i.renderer?i.renderer(e[r]):o.su.escapeHtml(e[r]),n+='<span class="del-icon icon" data-id="'+o.su.escapeHtml("index"==s?r:e[r][s])+'"></span>',n+="</div>";o(t).find(".list-item").remove(),o(t).find(".editlist-wrap").append(n)}},getValue:function(){return this.value}})}(jQuery),function(i){i.su.Widget.register("filterLevel",{settings:{},listeners:[{selector:".filter-level-items .items",event:"click",callback:function(e,t){t.dom().find(".filter-level-items .items").removeClass("selected"),i(this).addClass("selected"),t.dom().triggerHandler("ev_items_btn_click",[{level:i(this).attr("data-val")}]),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i(this).attr("data-val")}])}}],init:function(){},render:function(){var e=this.dom();this.settings;e.addClass("filter-level-container");var t='<div class="filter-level-wrapper">';t+='<div class="filter-level-items">',t+='<div class="items child" data-val="child">',t+='<span class="icon"></span>',t+='<span class="type">'+i.su.CHAR.PARENTAL_CONTROLS.CHILD+"</span>",t+='<span class="age">(0-7)</span>',t+="</div> ",t+='<div class="items pre-teen" data-val="pre-teen">',t+='<span class="icon"></span>',t+='<span class="type">'+i.su.CHAR.PARENTAL_CONTROLS.PRE_TEEN+"</span>",t+='<span class="age">(8-12)</span>',t+="</div> ",t+='<div class="items teen" data-val="teen">',t+='<span class="icon"></span>',t+='<span class="type">'+i.su.CHAR.PARENTAL_CONTROLS.TEEN+"</span>",t+='<span class="age">(13-17)</span>',t+="</div> ",t+='<div class="items adult" data-val="adult">',t+='<span class="icon"></span>',t+='<span class="type">'+i.su.CHAR.PARENTAL_CONTROLS.ADULT+"</span>",t+='<span class="age">(>17)</span>',t+="</div> ",t+="</div>",t+="</div>",e.empty().append(t)},setValue:function(e){var t=this.dom();this.settings;i(t).find(".filter-level-items .items").removeClass("selected"),e&&i(t).find(".items."+e.toLowerCase()).addClass("selected")}})}(jQuery),function(d){d.su.Widget.register("filterContent",{settings:{type:{attribute:"type",defaultValue:"app"},placeholder:{attribute:"placeholder",defaultValue:d.su.CHAR.COMMON.APP_FILTER_PLACEHOLDER}},listeners:[{selector:function(){return{parent:"body",target:""}},event:"click",callback:function(e,t){t.settings;var i=e.target?e.target:e.srcElement,s=d(i).closest(".filter-content-wrapper");0!==s.length&&d(i)[0]!==s[0]||t.dom().find(".filter-hint-wrapper").hide()}},{selector:".text-wrap-inner input",event:"click",callback:function(e,t){t.dom().find(".filter-hint-wrapper").removeClass("no-hint"),t.dom().find(".filter-hint-wrapper").show(),t.dom().triggerHandler("ev_input_click",[{type:t.settings.type}])}},{selector:".text-wrap-inner input",event:"blur",callback:function(e,t){setTimeout(function(e){t.showTips?t.dom().find(".filter-hint-wrapper").show():t.dom().find(".filter-hint-wrapper").hide()},0)}},{selector:".text-wrap-inner input",event:"keydown",callback:function(e,t){t.keydownCode=e.keyCode}},{selector:".text-wrap-inner input",event:"keyup",callback:function(e,t){if(13==e.keyCode){var i=t.addItems();t.showTips=i?(t.dom().find(".filter-hint-wrapper").hide(),!1):(t.dom().find(".filter-hint-wrapper").addClass("no-hint"),!0)}t.search(d(this).val())}},{selector:".filter-items .icon",event:"click",callback:function(e,t){var i=d(this).closest(".filter-items").attr("data-val");val=t.removeItems(i),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":val}])}},{selector:".filter-hint-wrapper",event:"blur",callback:function(e,t){t.dom().find(".filter-hint-wrapper").hide()}},{selector:".filter-hint-wrapper .app-name",event:"mousedown",callback:function(e,t){var i=d(this).find("span").text();t.addItems(i),d(t.dom()).find(".filter-hint-wrapper").hide()}}],init:function(){},render:function(){var t=this,e=this.dom(),i=this.settings;e.addClass("filter-content-container "+i.type);var s='<div class="filter-content-wrapper">';s+='<div widget="textbox" id="'+this.domId+'_textbox" class="label-empty inline-block" hint="'+i.placeholder+'" />',"app"===i.type?s+='<div widget="button" id="'+this.domId+'_button" class="label-empty btn-rare hidden" text="'+("app"===i.type?d.su.CHAR.OPERATION.CANCEL_UPPERCASE:d.su.CHAR.OPERATION.ADD)+'"></div>':s+='<div widget="button" id="'+this.domId+'_button" class="label-empty icon-button add-icon-btn hidden" text=""></div>',s+='<div class="filter-items-wrapper"></div>',s+='<div class="filter-hint-wrapper hidden">',s+='<div class="filter-hint su-scroll"></div>',s+="</div>",s+="</div>",e.append(s),i.type,t.input=new d.su.widgets.textbox({id:this.domId+"_textbox"}),t.input.render(),t.button=new d.su.widgets.button({id:this.domId+"_button"}),t.button.render(),t.button.dom().on("ev_button_click",function(){if("app"===i.type)t.dom().find(".filter-hint-wrapper").hide();else{var e=t.addItems();t.showTips=e?(t.dom().find(".filter-hint-wrapper").hide(),!1):(t.dom().find(".filter-hint-wrapper").addClass("no-hint"),!0)}})},setValue:function(e){if(e){var t=this.dom();this.settings;this.value=e;for(var i="",s=0;s<e.length;s++)i+='<div class="filter-items" data-val="'+e[s]+'">',i+='<span class="icon"></span>',i+='<span class="text">'+e[s]+"</span>",i+="</div>";d(t).find(".filter-items-wrapper").empty().append(i)}},getValue:function(){return this.value},removeItems:function(e){for(var t=d.su.clone(this.getValue()),i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1);break}return t},checkItems:function(e){for(var t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[],i=0;i<t.length&&t[i]!=e;i++);return i!=t.length},addItems:function(e){var t,i=this,s=this.dom(),a=this.settings,n=d(s).find(".text-wrap-inner input"),r=e||n.val();return"app"!==a.type?(t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[]).length+1>i.maxItems?(n.val(""),n.blur(),i.dom().triggerHandler("ev_items_limit"),!0):i.search(r)&&i.checkHintBase(r)&&!i.checkItems(r)||!i.checkItems(r)&&i.isURL(r)?(t.push(r),i.dom().triggerHandler("ev_view_change",[{"type":"value","value":t}]),n.val(""),n.blur(),!0):(n.val(""),n.blur(),!1):i.search(r)&&i.checkHintBase(r)&&!i.checkItems(r)?((t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[]).push(r),i.dom().triggerHandler("ev_view_change",[{"type":"value","value":t}]),n.val(""),n.blur(),!0):(n.val(""),n.blur(),!1)},loadItems:function(e){var t=this.dom(),i=this.settings;this.items=e;var s="";s+='<div class="app-name-wrapper">';for(var a=0;a<e.length;a++)s+='<div class="app-name" data-val="'+e[a].name+'">',s+="<span>"+e[a].name+"</span>",s+="</div>";s+="</div>",s+='<div class="app-name-note">'+("app"==i.type?d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE2:d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE3)+"</div>",d(t).find(".filter-hint").empty().append(s)},getHintBase:function(){return this.items},search:function(e){var t=d.su.clone(this.getHintBase()),i=d.su.clone(t),s=[],a=new RegExp(e,"i"),n=[];if(!e)return!1;for(var r=0;r<t.length;r++)a.test(t[r].name)&&(n.push({name:t[r].name,key:t[r].key,checked:!0}),s.push(r)),i[r].checked=!1;for(var o=s.length-1;0<=o;o--)i.splice(s[o],1);return 0==n.length?(this.loadItems(i),!1):(t=this.sort(n).concat(this.sort(i)),this.loadItems(t),!0)},checkHintBase:function(e){for(var t=d.su.clone(this.getHintBase()),i=new RegExp("^"+e+"$"),s=0;s<t.length;s++)if(i.test(t[s].name))return!0;return!1},sort:function(e){return e.sort(function(e,t){return e["name"].toLowerCase()<t["name"].toLowerCase()?-1:1})},isURL:function(e){return!!new RegExp(/^([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?$/i).test(e)},setMaxItems:function(e){e&&(this.maxItems=parseInt(e))}})}(jQuery),function(d){d.su.Widget.register("filterContentV2",{settings:{type:{attribute:"type",defaultValue:"app"},placeholder:{attribute:"placeholder",defaultValue:d.su.CHAR.COMMON.APP_FILTER_PLACEHOLDER}},listeners:[{selector:".text-wrap-inner input",event:"click",callback:function(e,t){t.dom().triggerHandler("ev_input_click",[{type:t.settings.type}])}},{selector:".text-wrap-inner input",event:"keydown",callback:function(e,t){t.keydownCode=e.keyCode}},{selector:".text-wrap-inner input",event:"keyup",callback:function(e,t){if(13==e.keyCode)t.addItems();t.search(d(this).val())}},{selector:".filter-items .icon",event:"click",callback:function(e,t){var i=d(this).closest(".filter-items").attr("data-val");val=t.removeItems(i),t.dom().triggerHandler("ev_view_change",[{"type":"value","value":val}])}}],init:function(){},render:function(){var e=this,t=this.dom(),i=this.settings;t.addClass("filter-content-container "+i.type);var s='<div class="filter-content-wrapper">';s+='<div widget="textbox" id="'+this.domId+'_textbox" class="label-empty inline-block" hint="'+i.placeholder+'" />',"app"===i.type?s+='<div widget="button" id="'+this.domId+'_button" class="label-empty btn-rare hidden" text="'+("app"===i.type?d.su.CHAR.OPERATION.CANCEL_UPPERCASE:d.su.CHAR.OPERATION.ADD)+'"></div>':s+='<div widget="button" id="'+this.domId+'_button" class="label-empty icon-button add-icon-btn" text=""></div>',s+='<div class="filter-items-wrapper"></div>',s+="</div>",t.append(s),e.input=new d.su.widgets.textbox({id:this.domId+"_textbox"}),e.input.render(),e.button=new d.su.widgets.button({id:this.domId+"_button"}),e.button.render(),e.button.dom().on("ev_button_click",function(){e.addItems()})},setValue:function(e){if(e){var t=this.dom();this.settings;this.value=e;for(var i="",s=0;s<e.length;s++)i+='<div class="filter-items" data-val="'+e[s]+'">',i+='<span class="icon"></span>',i+='<span class="text">'+d.su.escapeHtml(e[s])+"</span>",i+="</div>";d(t).find(".filter-items-wrapper").empty().append(i)}},getValue:function(){return this.value},removeItems:function(e){for(var t=d.su.clone(this.getValue()),i=0;i<t.length;i++)if(t[i]==e){t.splice(i,1);break}return t},checkItems:function(e){for(var t=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[],i=0;i<t.length&&t[i]!=e;i++);return i!=t.length},addItems:function(e){var t=this.dom(),i=(this.settings,d(t).find(".text-wrap-inner input")),s=e||i.val();if(""!=s&&null!=s&&s!=undefined)if(s.length<1||31<s.length)this.input.setError(d.su.CHAR.VTYPETEXT.LEN_MIN_MAX.replace("%min",1).replace("%max",31));else{if(this.isKeyword(s)||this.isURL(s)){var a=d.isArray(d.su.clone(this.getValue()))?d.su.clone(this.getValue()):[];return a.length+1>this.maxItems?(i.val(""),i.blur(),this.dom().triggerHandler("ev_items_limit"),!0):this.checkItems(s)?(i.val(""),i.blur(),!1):(a.push(s),this.dom().triggerHandler("ev_view_change",[{"type":"value","value":a}]),i.val(""),i.blur(),!0)}this.input.setError(d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE4)}else this.input.setError(d.su.CHAR.VTYPETEXT.BLANKTEXT)},loadItems:function(e){var t=this.dom(),i=this.settings;this.items=e;var s="";s+='<div class="app-name-wrapper">';for(var a=0;a<e.length;a++)s+='<div class="app-name" data-val="'+e[a].name+'">',s+="<span>"+e[a].name+"</span>",s+="</div>";s+="</div>",s+='<div class="app-name-note">'+("app"==i.type?d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE2:d.su.CHAR.PARENTAL_CONTROLS.FILTER_LEVEL_NOTE3)+"</div>",d(t).find(".filter-hint").empty().append(s)},getHintBase:function(){return this.items},search:function(e){var t=d.su.clone(this.getHintBase()),i=d.su.clone(t),s=[],a=new RegExp(e,"i"),n=[];if(!e)return!1;for(var r=0;r<t.length;r++)a.test(t[r].name)&&(n.push({name:t[r].name,key:t[r].key,checked:!0}),s.push(r)),i[r].checked=!1;for(var o=s.length-1;0<=o;o--)i.splice(s[o],1);return 0==n.length?(this.loadItems(i),!1):(t=this.sort(n).concat(this.sort(i)),this.loadItems(t),!0)},checkHintBase:function(e){for(var t=d.su.clone(this.getHintBase()),i=new RegExp("^"+e+"$"),s=0;s<t.length;s++)if(i.test(t[s].name))return!0;return!1},sort:function(e){return e.sort(function(e,t){return e["name"].toLowerCase()<t["name"].toLowerCase()?-1:1})},isKeyword:function(e){return!!new RegExp(/^[\w-]+$/i).test(e)},isURL:function(e){return!!new RegExp(/^([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?$/i).test(e)},setMaxItems:function(e){e&&(this.maxItems=parseInt(e))}})}(jQuery),function(n){n.su.Widget.register("weekdaySelect",{settings:{},listeners:[{selector:".icon",event:"click",callback:function(e,t){n(this).toggleClass("selected");var i=t.getValue();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i=!1===t.labelField?"label-empty":"";e.addClass(t.cls+"wireless-schedule-repeat-container "+i);var s="";null!==t.labelField&&(s+='<div class="widget-fieldlabel-wrap'+t.labelCls+(""==t.labelField?" empty":"")+'">',s+='<div class="widget-fieldlabel-inner">',s+='<label class="widget-fieldlabel text-fieldlabel">'+t.labelField+"</label>",t.labelField&&(s+='<span class="widget-separator">'+t.separator+"</span>"),s+="</div>",s+="</div>"),s+='<div class="widget-wrap-outer wireless-schedule-repeat-wrap-outer">',s+="<ul>",s+='<li ><span class="icon sun" data-type="sun"></span></li> ',s+='<li ><span class="icon mon" data-type="mon"></span></li> ',s+='<li ><span class="icon tue" data-type="tue"></span></li> ',s+='<li ><span class="icon wed" data-type="wed"></span></li> ',s+='<li ><span class="icon thu" data-type="thu"></span></li> ',s+='<li ><span class="icon fri" data-type="fri"></span></li> ',s+='<li ><span class="icon sat" data-type="sat"></span></li> ',s+="</ul>",s+='<div widget="errortip" error-cls="'+t.errorTipsCls+'">',s+="</div>",s+="</div>",e.empty().append(s)},setValue:function(e){var t=this.dom();if(e){var i=e.split(",");if(t.find(".icon").removeClass("selected"),"eve"==e)return void t.find(".icon").addClass("selected");if("weekdays"==e)return t.find(".icon.mon").addClass("selected"),t.find(".icon.tue").addClass("selected"),t.find(".icon.wed").addClass("selected"),t.find(".icon.thu").addClass("selected"),void t.find(".icon.fri").addClass("selected");if("weekends"==e)return t.find(".icon.sat").addClass("selected"),void t.find(".icon.sun").addClass("selected");for(var s=0;s<i.length;s++){var a=i[s].toLowerCase();t.find(".icon."+a).addClass("selected")}}else t.find(".icon").removeClass("selected")},getValue:function(){for(var e=[],t="",i=this.dom().find(".icon"),s=this.settings.configs&&this.settings.configs.format,a=0;a<i.length;a++)n(i[a]).hasClass("selected")&&e.push(n(i[a]).attr("data-type"));if(s)return s(e);return 7==(t=e.join(",")).split(",").length&&/(((mon)|(tue)|(wed)|(thu)|(fri)),){6}((mon)|(tue)|(wed)|(thu)|(fri))/.test(t)?"eve":5==t.split(",").length&&/(((mon)|(tue)|(wed)|(thu)|(fri)),){4}((mon)|(tue)|(wed)|(thu)|(fri))/.test(t)?"weekdays":2==t.split(",").length&&/((sat)|(sun)),((sat)|(sun))/.test(t)?"weekends":t}})}(jQuery),function(e){var t=jQuery.su.Widget.register("commonServices",{extend:"repeat",settings:{},listeners:[],init:function(){t.superclass.init.call(this),this.settings.itemRender=function(e,t){var i='<div class="common-service-kinds-layout">';return i+='<div class="common-service-kinds">',i+="<span>"+t.name+"</span>",i+="</div>",i+="</div>"}}})}(),function(i){i.su.Widget.register("portalPreview",{settings:{},listeners:[],init:function(){},render:function(){var e=this.dom();this.settings;e.addClass("portal-preview-container");var t='<div class="portal-preview-wrapper">';t+='<div class="portal-login-logo"><span></span></div>',t+='<div class="portal-login-title"><span></span></div>',t+='<div widget="textbox" id="'+this.domId+'_textbox" class="label-empty" hint="{GUEST_NETWORK.PASSWORD}"></div>',t+='<div widget="button" id="'+this.domId+'_button" class="login-button"text="{GUEST_NETWORK.LOG_IN}" label-field="{false}"></div>',t+='<div widget="checkbox"  id="'+this.domId+'_checkbox" class="accept-checkbox" box-label="{GUEST_NETWORK.TERMS_NOTE}" label-field="{false}"></div>',t+="</div>",e.empty().append(t),this.password=new i.su.widgets.textbox({id:this.domId+"_textbox"}),this.password.render(),this.password.hide(),this.button=new i.su.widgets.button({id:this.domId+"_button"}),this.button.render(),this.checkbox=new i.su.widgets.checkbox({id:this.domId+"_checkbox"}),this.checkbox.render()},setTitle:function(e){this.dom().find(".portal-login-title").find("span").text(e)},showPassword:function(){var e=this.dom();this.password.show(),e.addClass("password")},hidePassword:function(){var e=this.dom();this.password.hide(),e.removeClass("password")},restoreDefault:function(){var e=this.dom();e.find(".portal-login-title").find("span").text(i.su.CHAR.GUEST_NETWORK.WELCOME),e.find(".portal-login-logo").find("span").css({"background":'url("themes/gaming/img/portal_logo.png")',"background-size":"80px"}),e.css("background",'url("themes/gaming/img/portal_back.jpg")')},changeLogo:function(e){this.dom().find(".portal-login-logo").find("span").css({"background":'url("'+e+'") no-repeat center',"background-size":"contain"})},changeBackground:function(e){this.dom().css({"background":'url("'+e+'") no-repeat center',"background-size":"contain"})}})}(jQuery),$.su.Widget.register("treeNode",{settings:{childrenProp:{attribute:"children-prop",defaultValue:"branches"}},listeners:[],init:function(){this._key=$.su.guid("tree-node")},render:function(){this.dom().addClass("tree-node-container")},loadData:function(e){this.dom(),this.settings.childrenProp,this._renderNodeAsBranch(e)},setValue:function(e){},_nodeIsBranch:function(e){},_nodeIsLeaf:function(e){},_renderNodeAsBranch:function(e,t){this._children=[]},_renderNodeAsLeaf:function(e,t){},_findByKey:function(e){if(e===this._key)return this;if(this._children){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(i._findByKey(e))return i}return!1}return!1},find:function(e){}}),$.su.Widget.register("tree",{settings:{childrenProp:{attribute:"children-prop",defaultValue:"branches"}},listeners:[],init:function(){},render:function(){var e=this.dom();e.addClass("tree-container"),e.append('<div class="tree-root"><ul class="tree-root-children-ul"></ul></div>')},_createRootNode:function(e){return new $.su.widgets["treeNode"]({id:e})},renderTree:function(e){$.isArray(e)||(e=[e]);var t=0,i=e.length;for(this._children=[];t<i;t++){var s=$('<div uuid="'+e[t].uuid+'"></div>');this.dom().find(".tree-root-children-ul").append(s);var a=this._createRootNode(s);this._children.push(a),a.render(),a.loadData(e[t])}},_findByKey:function(e){if(this._children){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(i._findByKey(e))return i}return!1}return!1}}),function(){var a={"FULL":"full","PARTIAL":"partial","UNSELECTED":"unSelected"},e={"FULL":"selected","PARTIAL":"partial-selected"},d=$.su.Widget.register("folderTreeNode",{extend:"treeNode",settings:function(e){return $.extend(!0,{},e,{accordion:!1,lazyLoad:!0})},listeners:function(){return[{selector:".folder-tree-folder-node-select-icon",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault(),t._selectStatus===a.FULL?t.unSelect():t.select(),t.syncSelectedStatusToChildren(),t.syncSelectedStatusToParent();var i=$(this).closest(".folder-tree-folder-node-row").find(".folder-tree-folder-node-text").attr("path");t.dom().closest(".folder-tree-root-children-ul").trigger("ev_click_item",[i,t._selectStatus===a.FULL])}},{selector:".folder-tree-folder-node-text",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i={};$(this).closest(".folder-tree-folder-node").hasClass("empty")||("undefined"==$(this).attr("uuid")?(i.uuid=$(this).parent().closest("[uuid]").attr("uuid"),i.path=$(this).attr("path"),t._open?t.dom().closest(".folder-tree-container").triggerHandler("ev_folder_tree_close",[i,function(e){t.close(200)}]):t.dom().closest(".folder-tree-container").triggerHandler("ev_folder_tree_open",[i,function(e){t._renderNodeAsChild(e)&&t.open(200),t.syncSelectedStatusToChildren(),t.dom().closest(".folder-tree-root-children-ul").trigger("ev_click_item_open",[e])}])):t._open?t.close(200):t.open(200))}},{selector:".folder-tree-folder-node-open-icon",event:"click",callback:function(e,t){e.stopPropagation(),e.preventDefault();var i={};$(this).closest(".folder-tree-folder-node").hasClass("empty")||("undefined"==$(this).closest(".folder-tree-folder-node").find(".folder-tree-folder-node-text").attr("uuid")?(i.uuid=$(this).parent().closest("[uuid]").attr("uuid"),i.path=$(this).closest(".folder-tree-folder-node-row").find(".folder-tree-folder-node-text").attr("path"),t._open?t.dom().closest(".folder-tree-container").triggerHandler("ev_folder_tree_close",[i,function(e){t.close(200)}]):t.dom().closest(".folder-tree-container").triggerHandler("ev_folder_tree_open",[i,function(e){t._renderNodeAsChild(e)&&t.open(200),t.syncSelectedStatusToChildren(),t.dom().closest(".folder-tree-root-children-ul").trigger("ev_click_item_open",[e])}])):t._open?t.close(200):t.open(200))}}]},init:function(){d.superclass.init.call(this),this._path=$.su.guid("tree-node"),this._selectStatus=a.UNSELECTED,this.parentNode=null},render:function(){d.superclass.render.call(this),this.dom().addClass("folder-tree-node-container")},_nodeIsBranch:function(e){return e.hasBranch},_nodeIsLeaf:function(e){return!e.hasBranch},_renderNodeAsBranch:function(e){this._children=[],this._path=e.path;var t=this.dom();t.addClass("folder-tree-folder-node empty");var i="";i+="<div>",i+='<div class="folder-tree-folder-node-row">',i+='<a class="checkbox">',i+='<span class="folder-tree-folder-node-select-icon"></span>',i+="</a>",i+='<a class="text-node">',i+='<span uuid="'+e.uuid+'" path="'+e.path+'" class="folder-tree-folder-node-text">'+e.name+"</span>",i+='<span class="folder-tree-folder-node-open-icon"></span>',i+="</a>",i+="</div>",i+='<ul class="folder-tree-folder-node-children-ul">',i+="</ul>",i+="</div>",t.append(i);var s=t.find(".folder-tree-folder-node-children-ul"),a=e[this.settings.childrenProp];s.hide(),this._nodeIsBranch(e)&&t.removeClass("empty"),a&&this._renderNodeAsChild(e)},_renderNodeAsChild:function(e){var t=e[this.settings.childrenProp],i=this.dom(),s=i.find(".folder-tree-folder-node-children-ul"),a=t&&t.length,n=0;if(!(0<a))return i.addClass("empty"),!1;for(i.removeClass("empty"),i.find(".folder-tree-folder-node-text").attr("uuid",e.uuid);n<a;n++){var r=$("<div></div>");s.append(r);var o=new d({id:r});this._children.push(o),o.parentNode=this,o.render(),o.loadData(t[n])}return!0},_renderNodeAsLeaf:function(e){},open:function(e){e=e||0===e?e:200,this._open=!0;var t=this.dom();t.find(".folder-tree-folder-node-children-ul").eq(0).slideDown(e),t.find(".folder-tree-folder-node-open-icon").eq(0).addClass("opened")},close:function(e){e=e||0===e?e:200,this._open=!1;var t=this.dom();t.find(".folder-tree-folder-node-children-ul").eq(0).slideUp(e),t.find(".folder-tree-folder-node-open-icon").eq(0).removeClass("opened")},select:function(){this._selectStatus!=a.FULL&&(this._selectStatus=a.FULL,this.dom().find(".folder-tree-folder-node-select-icon").eq(0).removeClass(e.PARTIAL).addClass(e.FULL))},unSelect:function(){this._selectStatus!=a.UNSELECTED&&(this._selectStatus=a.UNSELECTED,this.dom().find(".folder-tree-folder-node-select-icon").eq(0).removeClass(e.PARTIAL+" "+e.FULL))},partialSelect:function(){this._selectStatus!=a.PARTIAL&&(this._selectStatus=a.PARTIAL,this.dom().find(".folder-tree-folder-node-select-icon").eq(0).removeClass(e.FULL).addClass(e.PARTIAL))},syncSelectedStatusToChildren:function(){var i,e=this._selectStatus;e==a.FULL?i="select":e==a.UNSELECTED&&(i="unSelect"),this._children&&$.each(this._children,function(e,t){i&&t[i](),t.syncSelectedStatusToChildren()})},syncSelectedStatusToParent:function(){if(this.parentNode){for(var e=!0,t=!0,i=this.parentNode._children.length,s=0;s<i;s++){switch(this.parentNode._children[s]._selectStatus){case a.FULL:t=!1;break;case a.UNSELECTED:e=!1;break;case a.PARTIAL:e=t=!1}if(!e&&!t)break}e?this.parentNode.select():t?this.parentNode.unSelect():this.parentNode.partialSelect(),this.parentNode.syncSelectedStatusToParent()}},getSelectedTree:function(i){this._selectStatus==a.FULL?i.push(this._path):this._children&&$.each(this._children,function(e,t){t.getSelectedTree(i)})},_findByPath:function(e){if(e===this._path)return this;if(this._children){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(i._findByPath(e))return i._findByPath(e)}return!1}return!1}})}(),function(){var t=$.su.Widget.register("folderTree",{extend:"tree",listeners:function(){return[{selector:".folder-tree-root-children-ul",event:"ev_click_item",callback:function(e,t,i,s){for(var a=0,n=s._unexpandedTree.length;a<n;a++)-1<s._unexpandedTree[a].indexOf(t)&&s._unexpandedTree.splice(a,1);var r=s.getSelectedTree().concat(s._unexpandedTree);s.dom().triggerHandler("ev_view_change",[{"type":"value","value":JSON.stringify($.unique(r))}])}},{selector:".folder-tree-root-children-ul",event:"ev_click_item_open",callback:function(e,t,i){i._selectTree([i._unexpandedTree])}}]},init:function(){this._originData=[],this._unexpandedTree=[],this._setOnce=!0},render:function(){var e=this.settings,t=!1===e.labelField?"label-empty":"",i=this.dom();i.addClass("widget-container folder-tree-container tree-container "+t);var s="";null!==e.labelField&&(s+='<div class="widget-fieldlabel-wrap '+e.labelCls+'">',s+='<div class="widget-fieldlabel-inner">',s+='<label class="widget-fieldlabel text-fieldlabel">'+e.labelField+"</label>",e.labelField&&(s+='<span class="widget-separator">'+e.separator+"</span>"),s+="</div>",s+="</div>"),s+='<div class="widget-wrap-outer folder-tree-wrap-outer tree-wrap-outer">',s+='<div class="widget-wrap folder-tree-wrap tree-wrap">',s+='<div class="folder-tree-root tree-root">',s+='<ul class="folder-tree-root-children-ul tree-root-children-ul">',s+="</ul>",s+="</div>",s+="</div>",s+="</div>",i.append(s),$.su.scrollbar({ele:i.find(".folder-tree-wrap-outer")[0],opts:{wheelPropagation:!0,useBothWheelAxes:!0,suppressScrollY:!0}})},_createRootNode:function(e){return new $.su.widgets["folderTreeNode"]({id:e})},clearTree:function(e){this.dom().find(".tree-root-children-ul").empty()},renderTree:function(e){t.superclass.renderTree.call(this,e),this.setValue(null)},setValue:function(e){null!==e?e.length&&"object"==typeof e&&(this._setOnce&&(this._originData=e,this._unexpandedTree=this.getUnexpandedTree(),this._setOnce=!1),this._selectTree(e)):this.dom().triggerHandler("ev_view_change",[{"type":"value","value":[]}])},_selectTree:function(e){if(null!==e)for(var t=0,i=e.length;t<i;t++)for(var s=0,a=e[t].length;s<a;s++){var n=this._findByPath(e[t][s]);if(n)n.select(),n.syncSelectedStatusToChildren(),n.syncSelectedStatusToParent();else for(var r=e[t][s].match(/(.+)\/.+/);r&&r[1];){var o=this._findByPath(r[1]);o&&o.partialSelect(),r=r[1].match(/(.+)\/.+/)}}},getSelectedTree:function(){if(this._children){var s=[];return $.each(this._children,function(e,t){var i=[];t.getSelectedTree(i),0<i.length&&(s=s.concat(i))}),s}return!1},getUnexpandedTree:function(){for(var e=[],t=0,i=this._originData.length;t<i;t++)for(var s=0,a=this._originData[t].length;s<a;s++){this._findByPath(this._originData[t][s])||e.push(this._originData[t][s])}return e},compareTree:function(e){},_findByPath:function(e){if(this._children){for(var t=0;t<this._children.length;t++){var i=this._children[t];if(i._findByPath(e))return i._findByPath(e)}return!1}return!1}})}(),$.su.Widget.register("mobileTopBar",{settings:{readOnly:{attribute:"read-only",defaultValue:!1},leftButtonId:{attribute:"left-button-id",defaultValue:null},rightButtonId:{attribute:"right-button-id",defaultValue:null}},listeners:[{selector:".text-wrap input",event:"keyup",callback:function(e,t){var i=$(this).val();t.dom().triggerHandler("ev_view_change",[{"type":"value","value":i}])}}],init:function(){},render:function(){var e=this.dom(),t=this.settings,i="<div>";if(i+='<div class="logo inline-block"></div>',i+='<div class="center-text inline-block hidden"></div>',i+='<div class="top-bar-button-container">',null==t.leftButtonId)t.leftButtonId="menu-button",i+='<div widget="button" icon-cls="menu" class="inline-block menu-button" id="menu-button"></div>';else{var s=$("#"+this.settings.leftButtonId);s.attr("widget","button")}if(null==t.rightButtonId)t.rightButtonId="func-button",i+='<div widget="button" class="inline-block func-button" id="func-button" text="{COMMON.SAVE}"></div>';else{var a=$("#"+this.settings.rightButtonId);a.attr("widget","button")}i+="</div>",i+="</div>";var n=$(i);s&&n.find(".top-bar-button-container").prepend(s),a&&n.find(".top-bar-button-container").append(a),e.addClass("top-bar").empty().append(n),e.find("div[widget=button]").each(function(){var e=$(this);new $.su.widgets.button({id:e}).render()})},setCenterText:function(e){if(null!==e&&e!==undefined){var t=this.dom().find(".logo"),i=this.dom().find(".center-text");""===e?(t.show(),i.hide()):(t.hide(),i.show().html(e))}},leftBtn:function(){return this.dom().find("#"+this.settings.leftButtonId).data("viewObj")},rightBtn:function(){return this.dom().find("#"+this.settings.rightButtonId).data("viewObj")},addClass:function(e){return this.dom().addClass(e)},removeClass:function(e){return this.dom().removeClass(e)}}),jQuery,$.su.Widget.register("transition",{init:function(){this._fields=[]},render:function(){var i=this;this._domStr=this.dom().html();var e=this._domStr.replace(/{.*?}/g,function(e){var t=$.su.getAttrObject($.su.CHAR,e);return t||(i._fields.push({name:e.replace(/[\{,\}]/g,""),value:null}),e)}),t=(this._initTransferedStr=e).replace(/{.*?}/g,function(e){return""});this.dom().html(t)},setField:function(e,t){for(var i=this._fields,s=0;s<i.length;s++)i[s].name===e&&(i[s].value=t);this._updateDomStr()},_updateDomStr:function(){var n=this,e=this._initTransferedStr.replace(/{.*?}/g,function(e){for(var t=e.replace(/[\{,\}]/g,""),i=n._fields,s=0;s<i.length;s++)if(i[s].name===t){var a=i[s].value;return null===a?"":a}return""});this.dom().html(e)}}),function(){var Time=$.su.Widget.register("combination",{settings:{widgetSeparator:{attribute:"widget-separator",defaultValue:""},subLabelField:{attribute:"sub-label-field",defaultValue:""},total:{attribute:"total",defaultValue:""},autoCompose:{attribute:"auto-compose",defaultValue:!0}},listeners:[],init:function(){},render:function(){var _this=this.dom(),settings=this.settings,hour=" hour-"+settings.hourSystem;_this.addClass(settings.cls+"combination-container");var inHTML="";(!1!==settings.labelField||settings.subLabelField)&&(inHTML+='<div class="widget-fieldlabel-wrap '+settings.labelCls+(settings.labelField?" has-main-label":"")+'">',inHTML+='<div class="widget-fieldlabel-inner">',inHTML+='<label class="widget-fieldlabel combination-fieldlabel">'+settings.labelField+"</label>",""!==settings.labelField&&(inHTML+='<span class="widget-separator">'+settings.separator+"</span>"),""!==settings.subLabelField&&(inHTML+='<span class="widget-sub-fieldlabel combination-sub-fieldlabel">'+settings.subLabelField+"</span>"),inHTML+="</div>",inHTML+="</div>"),inHTML+='<div class="widget-wrap-outer combination-wrap-outer">',inHTML+='<div class="widget-wrap combination-wrap">',inHTML+="</div>",inHTML+="</div>",settings.tipText&&(inHTML+='<div widget="toolTip"></div>');var widgets=_this.find("div[widget]");this.widgets=widgets;var len=widgets.length;if(_this.append(inHTML),_this.find("div.combination-wrap").eq(0).append(widgets),settings.autoCompose){/^\[.*\]$/.test(settings.widgetSeparator)&&(settings.widgetSeparator=eval(settings.widgetSeparator));var separatorIsArray=$.isArray(settings.widgetSeparator);widgets.each(function(e,t){var i=$(this).attr("widget");$(this).addClass("widget-"+e+" "+i+"-"+e),!1!==settings.widgetSeparator&&e<len-1&&$(this).after('<span class="separator separator-'+e+'">'+(separatorIsArray&&settings.widgetSeparator[e]||settings.widgetSeparator)+"</span>")}),_this.addClass("total-"+(""===settings.total?len:settings.total))}},enable:function(){this.dom().removeClass("disabled"),this.widgets.each(function(){$(this).data("viewObj").enable()})},disable:function(){this.dom().addClass("disabled"),this.widgets.each(function(){$(this).data("viewObj").disable()})},setSubLabel:function(e){e!==undefined&&null!==e&&this.dom().find(".combination-sub-fieldlabel").html(e)},remove:function(){var e=this.dom();e.find("[widget]").each(function(e,t){var i=$(t).data("viewObj");i&&i.remove()}),e.remove(),this.settings=null,this._view&&this._view.removeChildWidget(this)}})}(),$.su.Widget.register("steps",{settings:{fields:{attribute:"fields",defaultValue:null}},render:function(){var e=this.dom(),t=this.settings.fields;e.addClass("steps-container");var i='<ul class="steps-ul">';if(t)for(var s=0;s<t.length;s++){var a="string"==typeof t[s].text?t[s].text:"";i+='<li class="step-li step-point-wrapper step-item'+t[s].name+'">',i+='<div class="step-item-text hidden">'+a+"</div>",i+='<div class="step-item-point"></div>',i+="</li>",s!=t.length-1&&(i+='<li class="step-li step-line-wrapper'+t[s].name+'">',i+='<div class="step-item-line"></div>',i+="</li>")}i+="</ul>",e.append(i)},loadItems:function(e){for(var t=this.settings.fields=e,i="",s=0;s<t.length;s++){var a="string"==typeof t[s].text?t[s].text:"";i+='<li class="step-li step-point-wrapper step-item'+t[s].name+'">',i+='<div class="step-item-text hidden">'+a+"</div>",i+='<div class="step-item-point"></div>',i+="</li>",s!=t.length-1&&(i+='<li class="step-li step-line-wrapper'+t[s].name+'">',i+='<div class="step-item-line"></div>',i+="</li>")}this.dom().find(".steps-ul").empty().append(i)},setValue:function(e){this.dom();var t=this.settings.fields;if(t){this.value=e,this.dom().find(".step-point-wrapper").removeClass("current done undone"),this.dom().find(".step-item-text").addClass("hidden");var i=this.dom().find(".step-item"+e),s=this.dom().find(".step-item"+e+" .step-item-text");0<i.length&&(i.prevAll().removeClass("current"),i.prevAll().removeClass("undone"),i.prevAll().addClass("done"),i.nextAll().removeClass("current"),i.nextAll().removeClass("done"),i.nextAll().addClass("undone"),i.removeClass("done"),i.removeClass("undone"),i.addClass("current"),s.removeClass("hidden"));for(var a=0;a<t.length;a++)$("div.fieldset-container."+t[a].container).hide();$("div.fieldset-container."+e).show()}},getValue:function(){return this.value},next:function(){this.dom();for(var e=this.settings.fields,t=this.getValue(),i=0;i<e.length&&t!=e[i].name;i++);i<e.length-1&&(this.setValue(e[i+1].name),this.dom().triggerHandler("ev_view_change",[{"type":"value","value":e[i+1].name}]))},back:function(){this.dom();for(var e=this.settings.fields,t=this.getValue(),i=0;i<e.length&&t!=e[i].name;i++);0<i&&(this.setValue(e[i-1].name),this.dom().triggerHandler("ev_view_change",[{"type":"value","value":e[i-1].name}]))}}),function(r){r.su.Widget.register("information",{settings:{operation:{attribute:"operation",defaultValue:""},plugins:{attribute:"plugins",defaultValue:""},caseSensitive:{attribute:"case-sensitive",defaultValue:!0}},listeners:[{selector:".information-panel-tbar-container .search-text",event:"keyup",callback:function(e,t){13===e.keyCode&&t.dom().find(".btn-search").trigger("click")}},{selector:".information-panel-tbar-container .btn-search",event:"click",callback:function(e,t){var i=t.dom().find(".search-text").val();t.search(i),t._search.success&&t.showResult(),t._search.success&&0<t._search.total&&t.jumpTo(t._search.current)}},{selector:".information-panel-tbar-container .btn-search-prev",event:"click",callback:function(e,t){t._search.current<=1?t._search.current=t._search.total:t._search.current--,t.jumpTo(t._search.current)}},{selector:".information-panel-tbar-container .btn-search-next",event:"click",callback:function(e,t){t._search.current>=t._search.total?t._search.current=1:t._search.current++,t.jumpTo(t._search.current)}},{selector:".information-panel-tbar-container .btn-clear",event:"click",callback:function(e,t){t.clear()}},{selector:".information-panel-tbar-container .btn-refresh",event:"click",callback:function(e,t){t.refresh()}}],init:function(e){this._items=[],this._textList=[],this._keyMap={},this._search={}},render:function(){var e=this.dom(),t=this.settings;e.addClass("container widget-container information-panel-container");var i=r('<div class="information-panel-wrap"><div class="information-panel-content"><div class="information-panel-tbar-container hidden"></div><div class="information-panel-content-container"><div class="information-content-container"><div class="information-content-inner"></div></div></div></div></div>');e.append(i),t.plugins&&this.initPlugins(t.plugins.split("|")),r.su.scrollbar({ele:e.find(".information-content-container")[0],opts:{minScrollbarLength:50}})},initPlugins:function(e){this.dom();for(var i=this,s=this.settings,t=0,a=(e=r.isArray(e)?e:[e]).length;t<a;t++)n(e[t]);function n(e){var t=r.extend({},s);switch(e){case"tBar":t.operation&&i.initTBar(t.operation.split("|"))}}},initTBar:function(e){var t=this.dom().find("div.information-panel-tbar-container");this.settings;t.removeClass("hidden");for(var i='<div class="operation-container" id="'+this.domId+'">',s=0,a=e.length;s<a;s++)switch(e[s]){case"clear":i+='<a href="javascript:void(0);" tbar-name="clear" class="operation-btn btn-clear">',i+='<span class="icon"></span>',i+='<span class="text">'+r.su.CHAR.OPERATION.CLEAR_ALL+"</span>",i+="</a>";break;case"search":i+='<div class="text-container search-container hidden-result">',i+='<div class="widget-wrap text-wrap search-text-wrap">',i+='<span class="text-wrap-inner">',i+='<input type="text" class="text-text search-text" placeholder="'+r.su.CHAR.COMMON.SEARCH+'" />',i+="</span>",i+='<a href="javascript:void(0);" class="btn-search"></a>',i+="</div>",i+='<div class="search-result-wrap">',i+='<span class="search-result-success">',i+='<span class="search-result-text">'+r.su.CHAR.OPERATION.RESULT+": ",i+='<span id="search-result-current"></span>/<span id="search-result-total"></span>',i+="</span>",i+='<a href="javascript:void(0);" tbar-name="search-next" class="search-result-btn btn-search-next">',i+='<span class="icon"></span>',i+="</a>",i+='<a href="javascript:void(0);" tbar-name="search-prev" class="search-result-btn btn-search-prev">',i+='<span class="icon"></span>',i+="</a>",i+="</span>",i+='<span class="search-result-fail"><span class="search-result-text">'+r.su.CHAR.OPERATION.NO_MATCHES+"</span></span>",i+="</div>",i+="</div>";break;case"refresh":i+='<a href="javascript:void(0);" tbar-name="refresh" class="operation-btn btn-refresh">',i+='<span class="icon"></span>',i+='<span class="text">'+r.su.CHAR.OPERATION.REFRESH+"</span>",i+="</a>"}var n=r(i+="</div>");t.append(n)},syncData:function(e,t){this._items=[],this._textList=[],this.hideResult(),this.dom().find(".search-text").val(""),this.dom().find(".information-content-inner").empty(),this.dom().triggerHandler("ev_store_render_items",[e])},renderModels:function(e,t,i){this.dom(),this.settings;for(var s="",a=0;a<t.length;a++){var n=t[a].getData();this._items.push(n),this._keyMap[n.key]=a,s+=this.renderRow(n,a)}this.dom().find(".information-content-inner").html(s)},getRow:function(e,t){this.dom(),this.settings},createRow:function(e,t){this.dom(),this.settings},renderRow:function(e,t){var i=this.convert(e);return this._textList.push(i),'<p class="information-wrap" data-index="'+t+'">'+i+"</p>"},remove:function(e){var t=this._keyMap[e],i=this.dom();t!==undefined?(i.find(".information-wrap[data-index="+t+"]").remove(),delete this._keyMap[e],this._items.splice(t,1),this._textList.splice(t,1)):(i.find(".information-content-inner").html(""),this.init())},refresh:function(){this.dataBind[0].load(),this.hideResult(),this.dom().find(".search-text").val(""),this.dom().triggerHandler("ev_refresh")},clear:function(){this.dataBind[0];this.dom().triggerHandler("ev_grid_delete_all"),this.hideResult(),this.dom().find(".search-text").val(""),this.dom().triggerHandler("ev_clear")},search:function(e){var t=this,i=t.dom().find(".information-content-inner");if(t.hideResult(),"string"===r.type(e)&&0!==e.length){var s,a=0,n=(s=(s=e).replace(/[\*\.\?\+\$\^\[\]\(\)\{\}\|\\\/]/g,function(e){return"\\"+e}),new RegExp(s,t.settings.caseSensitive?"g":"gi"));return i.find(".information-wrap").each(function(){var e;e=r(this).text().replace(n,function(e){return'<span id="search-result-'+ ++a+'" class="highlight">'+r("<div>").text(e).html()+"</span>"}),r(this).html(e)}),t._search.current=1,t._search.total=a,t._search.text=e,t._search.success=!0,a}},clearSearch:function(){this.dom().find(".highlight").replaceWith(function(){return r(this).html()})},showResult:function(){var e=this._search.total,t=this.dom().find(".search-container");0===e?t.addClass("fail-result").removeClass("success-result"):(this.dom().find("#search-result-total").text(e),t.addClass("success-result").removeClass("fail-result")),t.removeClass("hidden-result")},hideResult:function(){this._search.current=1,this._search.total=0,this._search.text="",this._search.success=!1,this.dom().find(".search-container").addClass("hidden-result").removeClass("success-result","fail-result"),this.clearSearch()},jumpTo:function(e){var t=this.dom(),i=t.find("#search-result-"+e),s=t.find(".information-panel-content-container"),a=t.find(".information-content-container"),n=a.height(),r=s.height(),o=s.outerHeight(),d=a.scrollTop(),l=(o-r)/2,c=i.position().top;t.find(".highlight").removeClass("target"),i.addClass("target"),a.scrollTop(c+d-n+2*l),t.find("#search-result-current").text(this._search.current)},getDisplay:function(){return this._textList},convert:function(e){var t,i="";if(this.settings.configs&&"function"===r.type(this.settings.configs.convert)&&this.settings.configs.convert)i=this.settings.configs.convert(e);else{t=this.dataBind[0].dataObj.fields.slice(0,-1);for(var s=0;s<t.length;s++)i+=e[t[s].name]+" "}return i=r("<div>").text(i).html()}})}(jQuery),function(u){u.su.Widget.register("wifiList",{settings:{operation:{attribute:"operation",defaultValue:""},plugins:{attribute:"plugins",defaultValue:""},manualStore:{attribute:"manualStore",defaultValue:""}},listeners:[{selector:".wifiList-item",event:"click",callback:function(e,t){t.hideAllWidget();var i=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget");i.find("div[widget=button]").data("viewObj");i.show();var s=i.find(".password-text");0!=s&&(""==(""==u(s[0]).val()?u(s[1]).val():u(s[0]).val())&&i.find("div[widget=button]").addClass("disabled"))}},{selector:".wifiList-content-inner a.button-button",event:"click",callback:function(e,t){var i=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),s=i.find("div[widget=button]").data("viewObj"),a=i.find(".password-text"),n=""==u(a[0]).val()?u(a[1]).val():u(a[0]).val(),r=u(this).closest(".wifiList-wrap").find(".wifiList-item").text(),o={};o.ssid=r,o.password=n||"",t.dom().triggerHandler("ev_connect_click",[o,s])}},{selector:".wifiList-content-manual a.button-button",event:"click",callback:function(e,t){var i=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),s=i.find("div[widget=button]").data("viewObj"),a=i.find(".password-text"),n=""==u(a[0]).val()?u(a[1]).val():u(a[0]).val(),r=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),o={};o.ssid=r.find("div.name-content").find("input").val(),o.security=r.find("input.combobox-text").val(),o.password=n,t.dom().triggerHandler("ev_connect_click",[o,s])}},{selector:".password-content",event:"keyup",callback:function(e,t){var i=u(this).closest(".wifiList-wrap").find(".wifiList-item-widget"),s=i.find(".password-text");""==(""==u(s[0]).val()?u(s[1]).val():u(s[0]).val())?i.find("div[widget=button]").addClass("disabled"):i.find("div[widget=button]").removeClass("disabled")}},{selector:".wifiList-panel-tbar-container .btn-refresh",event:"click",callback:function(e,t){t.refresh()}}],init:function(e){},render:function(){var i=this,e=this.dom(),t=this.settings;e.addClass("container widget-container wifiList-panel-container");var s=u('<div class="wifiList-panel-wrap"><div class="wifiList-panel-content"><div class="wifiList-panel-tbar-container hidden"></div><div class="wifiList-panel-content-container"><div class="wifiList-content-container"><div class="wifiList-content-inner"></div><div class="wifiList-content-manual"></div></div></div></div></div>');e.append(s),t.manualStore&&this.initManualOptions(t.manualStore.split("|")),t.operation&&this.initTBar(t.operation.split("|")),e.find("div[widget=combobox]").on("ev_view_change",function(e,t){"value"==t.type&&i.combobox.setValue(t.value)})},initManualOptions:function(e){this.dom(),this.settings;var t=this.dom().find("div.wifiList-content-manual"),i="";i+='<div class="wifiList-wrap">',i+='<div class="wifiList-item">Manual Setting',i+="</div>",i+='<div class="wifiList-item-widget">',i+='<div class="name-content">',i+='<div widget="textbox" label-field="'+u.su.CHAR.OPERATION.NETWORK_NAME+'"></div>',i+="</div>",i+='<div class="combobox-content">',i+='<div widget="combobox" data-options="{'+e+'}" label-field="'+u.su.CHAR.OPERATION.SECURITY+'"></div>',i+="</div>",i+='<div class="password-content">',i+='<div widget="password" label-field="'+u.su.CHAR.OPERATION.PASSWORD+'"></div>',i+="</div>",i+='<div class="button-content">',i+='<div widget="button" class="full-line" text="'+u.su.CHAR.OPERATION.CONNECT+'"></div>',i+="</div>",i+="</div>",u(i+="</div>").appendTo(t);for(var s,a=t.find(".name-content").find("div[widget=textbox]"),n=0,r=a.length;n<r;n++)new u.su.widgets.textbox({id:u(a[n])}).render();var o=t.find(".combobox-content").find("div[widget=combobox]");for(n=0,r=o.length;n<r;n++)(s=new u.su.widgets.combobox({id:u(o[n]),view:this._view})).render();this.combobox=s;var d=t.find(".password-content").find("div[widget=password]");for(n=0,r=d.length;n<r;n++)new u.su.widgets.password({id:u(d[n])}).render();var l=t.find(".button-content").find("div[widget=button]");for(n=0,r=l.length;n<r;n++)new u.su.widgets.button({id:u(l[n])}).render()},initTBar:function(e){var t=this.dom().find("div.wifiList-panel-tbar-container");this.settings;t.removeClass("hidden"),e=u.isArray(e)?e:[e];for(var i='<div class="operation-container" id="'+this.domId+"_"+e+'">',s=0,a=e.length;s<a;s++)switch(e[s]){case"refresh":i+='<a href="javascript:void(0);" tbar-name="refresh" class="operation-btn btn-refresh">',i+='<span class="icon"></span>',i+='<span class="text">'+u.su.CHAR.OPERATION.REFRESH+"</span>",i+="</a>"}var n=u(i+="</div>");t.append(n)},syncData:function(e,t){this._keys=e,this._items=[],this._textList=[],this.dom().find(".wifiList-content-inner").empty(),this.dom().triggerHandler("ev_store_render_items",[e])},renderModels:function(e,t,i){this.dom(),this.settings;for(var s="",a=0;a<t.length;a++){var n=t[a].getData();this._items.push(n),s+=this.renderRow(n)}var r=this.dom().find(".wifiList-content-inner");r.append(s);for(var o=r.find(".password-content").find("div[widget=password]"),d=0,l=o.length;d<l;d++)new u.su.widgets.password({id:u(o[d])}).render();var c=r.find(".button-content").find("div[widget=button]");for(d=0,l=c.length;d<l;d++)new u.su.widgets.button({id:u(c[d])}).render();this.hideAllWidget()},renderRow:function(e){var t=this.convert(e);this._textList.push(t);var i="";return i+='<div class="wifiList-wrap">',i+='<div class="wifiList-item-box">',i+='<div class="wifiList-item">'+t.name,i+='<span class="icon-wifi"></span>',"no"!==t.security&&(i+='<span class="icon-lock"></span>'),i+="</div>",i+='<div class="wifiList-item-widget">',"no"!==t.security&&(i+='<div class="password-content">',i+='<div widget="password" label-field="'+u.su.CHAR.OPERATION.PASSWORD+'"></div>',i+="</div>"),i+='<div class="button-content">',i+='<div widget="button" class="full-line" text="'+u.su.CHAR.OPERATION.CONNECT+'"></div>',i+="</div>",i+="</div>",i+="</div>",i+="</div>"},renderLastRow:function(){var e="";return e+='<div class="wifiList-wrap">',e+='<div class="wifiList-item">Manual Setting',e+='<span class="icon-lock"></span>',e+='<span class="icon-wifi"></span>',e+="</div>",e+='<div class="wifiList-item-widget">',e+='<div class="textbox-content">',e+='<div widget="textbox" label-field="'+u.su.CHAR.OPERATION.NETWORK_NAME+'"></div>',e+="</div>",e+='<div class="combobox-content">',e+='<div widget="combobox" data-options="{securityStore}" label-field="'+u.su.CHAR.OPERATION.SECURITY+'"></div>',e+="</div>",e+='<div class="password-content">',e+='<div widget="password" label-field="'+u.su.CHAR.OPERATION.PASSWORD+'"></div>',e+="</div>",e+='<div class="button-content">',e+='<div widget="button" class="full-line" text="'+u.su.CHAR.OPERATION.CONNECT+'"></div>',e+="</div>",e+="</div>",e+="</div>"},refresh:function(){this.dataBind[0].load(),this.dom().triggerHandler("ev_refresh")},hideAllWidget:function(){for(var e=this.dom().find(".wifiList-item-widget"),t=0;t<e.length;t++)u(e[t]).hide()},convert:function(e){var t={};return t.name=e.name||"unknown",t.security=e.security||"no",t},setStatus:function(e,t){this.connnectStatus=!!e;var i=t.dom().closest(".wifiList-wrap").find(".wifiList-item-widget").find("div[widget=password]").data("viewObj");this.connnectStatus?(i&&i.show(),t.setText("CONNECT")):(i&&i.hide(),t.setText("RETRY"))}})}(jQuery),function(){var e=$.su.Widget.register("storagePieChartGroup",{settings:{configs:{attribute:"configs",defaultValue:null},pieChartOption:{attribute:"pie-chart-option",defaultValue:{baseOption:{series:[{type:"pie",hoverAnimation:!1,radius:["0%","30%"],avoidLabelOverlap:!0,stillShowZeroSum:!1,label:{normal:{show:!0,position:"center",color:"rgba(255,255,255,0.8)",value:"#fff",fontSize:"16",lineHeight:20,formatter:function(e){return $.su.CHAR.GRID.TOTAL+":\n"+$.su.numToCapacity(e.name)}}},data:[{value:0,name:"{total}"}]},{type:"pie",hoverAnimation:!1,radius:["78%","100%"],avoidLabelOverlap:!0,label:{normal:{show:!1}},labelLine:{normal:{show:!1}},data:"{formData}",color:[]}]}}}},listeners:[{selector:".storage-pie-chart-group-switch-pre",event:"click",callback:function(e,t){$(this).hasClass("disable")||t.switchToPre()}},{selector:".storage-pie-chart-group-switch-next",event:"click",callback:function(e,t){$(this).hasClass("disable")||t.switchToNext()}},{selector:function(){return{parent:window}},event:"resize",callback:function(e,t){t.echart.resize()}}],init:function(){e.superclass.init.call(this),this._data=[],this.echart=null,this.settings.configs.fields=this.settings.configs.fields||[],this.settings.pieChartOption.baseOption.series[1].color=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].color);return t}(this.settings.configs.fields),this._currentDataIndex=null},render:function(){var e=this,t=this.dom(),i=(this.settings,"");if(i+='<div class="storage-pie-chart-group-wrap">',i+='<div class="storage-pie-chart-group-operation-bar tbar-container">',i+='<div class="storage-pie-chart-group-switch-container">',i+='<a class="storage-pie-chart-group-switch-pre">',i+="</a>",i+='<div class="storage-pie-chart-group-item-title">',i+="</div>",i+='<a class="storage-pie-chart-group-switch-next">',i+="</a>",i+="</div>",i+='<div class="storage-pie-chart-group-refresh operation-container">',i+="<a href='javascript:void(0);' class='operation-btn btn-refresh'>",i+="<span class='icon'></span>",i+="<span class='text'>"+$.su.CHAR.OPERATION.REFRESH+"</span>",i+="</a>",i+="</div>",i+="</div>",i+='<div class="storage-pie-chart-group-chart-wrap">',i+='<div class="storage-pie-chart-group-pie-chart-wrap">',i+='<div class="storage-pie-chart-group-pie-chart">',i+="</div>",i+="</div>",i+='<div class="storage-pie-chart-group-table-chart-wrap">',i+='<div class="storage-pie-chart-group-table-chart">',i+="</div>",i+="</div>",i+="</div>",i+="</div>",t.addClass("storage-pie-chart-group-container").append(i),window.echarts===undefined){var s=$.Deferred();return $.su.router.loadFile("js/libs/echarts.min.js?t=9599d0db",function(){e.renderPieChart(),s.resolve()}),s.promise()}window.echarts&&e.renderPieChart()},renderPieChart:function(){var e=this.dom();this.echart=echarts.init(e.find(".storage-pie-chart-group-pie-chart").get(0))},switchToPre:function(){this.switchToItemByIndex(this._currentDataIndex-1)},switchToNext:function(){this.switchToItemByIndex(this._currentDataIndex+1)},getCurrentDataIndex:function(){return this._currentDataIndex},switchToItemByIndex:function(e){this._loadChartData(this._data[e]),this._currentDataIndex=e,this._updateSwitchButton()},_loadChartData:function(e){var t=this.dom(),i=this._pieChartDataDealer(e);this.echart.setOption(i);var s=e[this.settings.configs.nameField];t.find(".storage-pie-chart-group-item-title").text(s);for(var a="",n=this.settings.configs.fields,r=0;r<n.length;r++){var o=n[r];a+='<div class="storage-pie-chart-group-table-chart-item '+o.dataIndex+'">',a+='<div class="storage-pie-chart-group-table-chart-item-spot" style="background-color:'+o.color+'">',a+="</div>",a+='<div class="storage-pie-chart-group-table-chart-item-label">',a+=o.text+this.settings.separator,a+="</div>",a+='<div class="storage-pie-chart-group-table-chart-item-value">',a+=e[o.dataIndex],a+="</div>",a+="</div>"}t.find(".storage-pie-chart-group-table-chart").empty().append(a)},_pieChartDataDealer:function(e){for(var t=$.extend(!0,{},this.settings.pieChartOption),i=this.settings.configs.fields,s=[],a=0,n=0;n<i.length;n++){var r=e[i[n].dataIndex];s.push({name:i[n].text,value:$.su.capacityToNum(r)}),a+=$.su.capacityToNum(r)}return t.baseOption.series[0].data[0].name=$.su.numToCapacity(a),t.baseOption.series[1].data=s,t},_updateSwitchButton:function(){var e=this._data.length;this._enablePreBtn(),this._enableNextBtn(),0===this._currentDataIndex&&this._disablePreBtn(),this._currentDataIndex===e-1&&this._disableNextBtn()},_disablePreBtn:function(){this.dom().find(".storage-pie-chart-group-switch-pre").addClass("disable")},_enablePreBtn:function(){this.dom().find(".storage-pie-chart-group-switch-pre").removeClass("disable")},_disableNextBtn:function(){this.dom().find(".storage-pie-chart-group-switch-next").addClass("disable")},_enableNextBtn:function(){this.dom().find(".storage-pie-chart-group-switch-next").removeClass("disable")},_showBtn:function(){this.dom().find(".storage-pie-chart-group-switch-next").show(),this.dom().find(".storage-pie-chart-group-switch-pre").show()},_hideBtn:function(){this.dom().find(".storage-pie-chart-group-switch-next").hide(),this.dom().find(".storage-pie-chart-group-switch-pre").hide()},loadItems:function(e){this._data=$.su.clone(e),0<e.length&&(this.switchToItemByIndex(0),1==this._data.length?this._hideBtn():this._showBtn())}})}(),function(n){var e=n.su.Widget.register("antivirusHistory",{extend:"repeat",settings:{},listeners:[],init:function(){var s=this;e.superclass.init.call(this),this.settings.itemRender=function(e,t){if(s.categoryList!=undefined){var i="<div>";switch(t.type){case"block":i+='<div class="antivirus-history-list-item malicious">',i+='<span class="icon"></span>',i+='<div class="info">',i+='<div class="client"><span class="client-label">'+n.su.CHAR.ANTIVIRUS.DEVICE_NAME+':</span> <span class="client-content">'+t.client+"</span></div>",i+='<span class="blocked-website">'+n.su.CHAR.ANTIVIRUS.BLOCKED+": "+t.blockedWebsite+"</span>",i+='<span class="reason">'+n.su.CHAR.ANTIVIRUS.INTERCEPT_REASONS+": "+s.getCategory(t.categoryId)+"</span>",i+="</div>",i+='<span class="time">'+s.transformTime(t.timestamp)+"</span>",i+="</div>";break;case"prevent":i+='<div class="antivirus-history-list-item instrusion">',i+='<span class="icon"></span>',i+='<div class="info">',i+='<div class="client"><span class="client-label">'+n.su.CHAR.ANTIVIRUS.DEVICE_NAME+':</span> <span class="client-content"> '+t.client+"</span></div>",i+='<span class="attacker">'+n.su.CHAR.ANTIVIRUS.ATTACK_FROM+": "+t.attacker+"</span>",i+='<span class="reason">'+n.su.CHAR.ANTIVIRUS.INTERCEPT_REASONS+": "+s.getRule(t.ruleId)+"</span>",i+="</div>",i+='<span class="time">'+s.transformTime(t.timestamp)+"</span>",i+="</div>";break;case"infected_block":i+='<div class="antivirus-history-list-item infected">',i+='<span class="icon"></span>',i+='<div class="info">',i+='<div class="client"><span class="client-label">'+n.su.CHAR.ANTIVIRUS.DEVICE_NAME+':</span> <span class="client-content"> '+t.client+"</span></div>",i+='<span class="blocked-ip">'+n.su.CHAR.ANTIVIRUS.ATTACK_FROM+": "+t.blockedIp+"</span>",i+='<span class="reason">'+n.su.CHAR.ANTIVIRUS.INTERCEPT_REASONS+": "+(s.getCategory(t.categoryId)||s.getRule(t.categoryId))+"</span>",i+="</div>",i+='<span class="time">'+s.transformTime(t.timestamp)+"</span>",i+="</div>"}return i+="</div>"}}},parseFormat:function(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e},transformTime:function(e){var t=this,i=new Date(1e3*e),s=new Date;if(i.getMonth()==s.getMonth()&&i.getDay()==s.getDay())if(i.getHours()<=12)var a=n.su.CHAR.DATE.TODAY+", "+t.parseFormat(i.getHours(),2)+":"+t.parseFormat(i.getMinutes(),2)+n.su.CHAR.HOUR.AM;else a=n.su.CHAR.DATE.TODAY+", "+t.parseFormat(i.getHours()-12,2)+":"+t.parseFormat(i.getMinutes(),2)+n.su.CHAR.HOUR.PM;else if(i.getMonth()==s.getMonth()&&i.getDay()==s.getDay()-1)if(i.getHours()<=12)a=n.su.CHAR.DATE.YESTERDAY+", "+t.parseFormat(i.getHours(),2)+":"+t.parseFormat(i.getMinutes(),2)+n.su.CHAR.HOUR.AM;else a=n.su.CHAR.DATE.YESTERDAY+", "+t.parseFormat(i.getHours()-12,2)+":"+t.parseFormat(i.getMinutes(),2)+n.su.CHAR.HOUR.PM;else if(i.getHours()<=12)a=t.parseFormat(i.getDate(),2)+"."+t.parseFormat(i.getMonth()+1,2)+", "+t.parseFormat(i.getHours(),2)+":"+t.parseFormat(i.getMinutes(),2)+n.su.CHAR.HOUR.AM;else a=t.parseFormat(i.getDate(),2)+"."+t.parseFormat(i.getMonth()+1,2)+", "+t.parseFormat(i.getHours()-12,2)+":"+t.parseFormat(i.getMinutes(),2)+n.su.CHAR.HOUR.PM;return a},setCategoryList:function(e){this.categoryList=e},getCategory:function(e){for(var t=this.categoryList,i=0;i<t.length;i++)if(t[i].id==e)return t[i].name;return undefined},setRuleList:function(e){this.ruleList=e},getRule:function(e){for(var t=this.ruleList,i=0;i<t.length;i++)if(t[i].id==e)return t[i].name;return undefined}})}(jQuery),function(s){s.su.Widget.register("cloudIframe",{settings:{},listeners:[],init:function(){},render:function(){var e=this.dom();this.settings;e.addClass("cloud-iframe-container");e.append('<iframe id="cloud-login" name="cloud-login" frameborder="0" scrolling="no" src=""></iframe>'),this.receiveMessage()},setCloudOrigin:function(e){this.cloudOrigin=e},setIframeSrc:function(e){var t=this.dom(),i=this.cloudOrigin+"/cloud_ui_11ax/pages/device/index.html?module="+e;s(t).find("#cloud-login").attr("src",i)},receiveMessage:function(){},postMessage:function(e,t){window.frames["cloud-login"]&&window.frames["cloud-login"].postMessage("",me.cloudOrigin)}})}(jQuery),function(h){var e=function(){var e=!0,t=h('<canvas width="0" height="0" style="display: none;"></canvas>').appendTo(h("body"));try{t[0].getContext("2d"),e=!0}catch(i){e=!1}return t.remove(),e}(),t="Microsoft Internet Explorer"===navigator.appName&&/Trident/i.test(navigator.userAgent)&&/MSIE\s+8\.0/i.test(navigator.userAgent),i=h.su.Widget.register("speedTestGauge",{extend:"echart",settings:{type:{attribute:"type",defaultValue:"gauge"}},listeners:[],init:function(){this.axisTickBackground=t||!e?"#4acbd6":{image:this.getBackgroundFromCanvas([74,203,214],[39,41,100]),repeat:"no-repeat"}},getBackgroundFromCanvas:function(e,t){var i=document.createElement("canvas");i.width=i.height=200;var s,a,n=i.getContext("2d"),r=i.width/2,o=i.height/2,d=Math.min(r,o),l=[];n.beginPath(),n.moveTo(r,o),s=.5*Math.PI,a=Math.PI,n.arc(r,o,d,s,a),n.fillStyle="rgb("+e.join()+")",n.fill(),n.closePath();for(var c=0;c<179;c++){for(var u=0;u<3;u++)l[u]=Math.round((t[u]-e[u])/180*c+e[u]);n.beginPath(),n.moveTo(r,o),a=(s=Math.PI+Math.PI/180*c)+Math.PI/180*2,n.fillStyle="rgb("+l.join()+")",n.arc(r,o,d,s,a),n.fill(),n.closePath()}return n.beginPath(),n.moveTo(r,o),s=0*Math.PI,a=.5*Math.PI,n.arc(r,o,d,s,a),n.fillStyle="rgb("+t.join()+")",n.fill(),n.closePath(),i},render:function(){var s=this.dom();return i.superclass.render.call(this).then(function(){return function i(){s.addClass("speedTestGauge-container");var e=s.find(".chart-canvas"),t="";t+='<div class="chart-info">',t+='<div class="chart-title"></div>',t+='<div class="chart-detail">',t+='<div class="chart-value"></div>',t+='<div class="chart-unit">'+h.su.CHAR.NETWORK_MAP.MBPS_2+"</div>",t+="</div>",t+="</div>",e.find(".chart-info").detach().end().append(t)}(),h.Deferred().resolve()})},setOption:function(e){var t=this.dom(),i=e.name,s=e.value;t.find(".chart-title").text(i),t.find(".chart-value").text(s);var a=this.calculateOption({value:s,name:i,convert:e.convert});a[0].title.show=!1,a[0].detail.show=!1,this.setGaugeOption({series:a})},calculateOption:function(e){var t=[];e=h.extend({min:0,max:300,value:0,type:"gauge",data:[{value:0,name:""}]},e);var i,s=parseInt(e.value,10);s<10?i=Math.floor(s/10*62.5):10<=s&&s<25?i=Math.floor(62.5+(s-10)/15*31.25):25<=s&&s<50?i=Math.floor(93.75+(s-25)/25*31.25):50<=s&&s<100?i=Math.floor(125+(s-50)/50*31.25):100<=s&&s<300?i=Math.floor(156.25+(s-100)/200*31.25):300<=s&&s<1e3?i=Math.floor(187.5+(s-300)/700*31.25):1e3<=s&&s<2500?i=Math.floor(218.75+(s-1e3)/1500*31.25):2500<=s&&(i=250);var a=215-i,n=function(e){return e},r=function(e){return e};if("array"===h.type(e.convert)){for(var o=e.convert,d=[],l=(e.max-e.min)/e.splitNumber,c=0;c<=e.splitNumber;c++)d.push(l*c+e.min);n=p(d,o),r=p(o,d),e.formatValue=r(e.value)}var u=Math.floor((215-a)/250*75);return u=74<u?75:u,t.push({name:e.name,type:e.type,startAngle:215,endAngle:a,splitNumber:1,axisLine:{show:!1,lineStyle:{width:11,opacity:0}},splitLine:{show:!1},axisTick:{length:11,splitNumber:u,lineStyle:{color:this.axisTickBackground,width:2}},axisLabel:{show:!1,formatter:n},pointer:{show:!1},itemStyle:{},title:{show:!1},detail:{show:!1},data:[{value:e.formatValue,name:e.name}]}),t.push({name:"",type:e.type,startAngle:a,endAngle:-35,splitNumber:1,axisLine:{show:!1,lineStyle:{width:11,opacity:0}},splitLine:{show:!1},axisTick:{length:11,splitNumber:75-u-1,lineStyle:{color:"#a7a9ac",width:2}},axisLabel:{show:!1,formatter:n},pointer:{show:!1},itemStyle:{},title:{show:!1},detail:{show:!1}}),t}});function p(c,u){return function(e){return function l(e){for(var t,i,s,a,n,r,o=e,d=0;d<c.length-1;d++)if(e>=c[d]&&e<=c[d+1]){t=e,i=c[d],s=u[d],a=c[d+1],n=u[d+1],o=(r=(n-s)/(a-i))*t+(s-r*i);break}return o>u[u.length-1]&&(o=u[u.length-1]),10*o.toFixed(1)/10}(e)}}}(jQuery),function(d){var e,t={_canvasSupport:function(){var e=!0,t=d('<canvas width="0" height="0" style="display: none;"></canvas>').appendTo(d("body"));try{t[0].getContext("2d"),e=!0}catch(i){e=!1}return t.remove(),e}(),_blobSupport:function(){var e=!1;try{new Blob,e=!0}catch(t){e=!1}return e}(),_browserSupport:(e=navigator.userAgent,!/AppleWebKit.*Mobile.*/i.test(e)||!!(/chrome\/(\d|\.)+\s+(mobile\s+)?Safari\/(\d|\.)+$/i.test(e)||/firefox/i.test(e)||/YaBrowser/i.test(e)||/(OPR|opera)/i.test(e)||!/chrome/i.test(e)&&/safari/i.test(e)))};d.su.Widget.register("wifisharing",{settings:{sharingText:{attribute:"sharing-text",defaultValue:""}},listeners:[{selector:".wifisharing-sharing-btn-container .wifisharing-sharing-btn",event:"click",callback:function(e,t){t.showContent()}},{selector:".wifisharing-save-btn-container",event:"click",callback:function(e,t){(t._enable.qrcode||t._enable.text)&&t.saveImage()}},{selector:".wifisharing-qrcode-checkbox-container",event:"click",callback:function(e,t){var i=t.dom().find(".wifisharing-qrcode-checkbox-container").data("viewObj");t._enable.qrcode?(i.setValue(!1),t.disableQrcode()):(i.setValue(!0),t.enableQrcode())}},{selector:".wifisharing-text-checkbox-container",event:"click",callback:function(e,t){var i=t.dom().find(".wifisharing-text-checkbox-container").data("viewObj");t._enable.text?(i.setValue(!1),t.disableText()):(i.setValue(!0),t.enableText())}}],init:function(e){this._data={ssid:"",password:"",security:""},this._enable={qrcode:!0,text:!0},this._canvasSupport=t._canvasSupport,this._blobSupport=t._blobSupport,this._browserSupport=t._browserSupport},render:function(){var i=this,s=this.dom();this.settings;s.addClass("container widget-container wifisharing-container");var e="";e+='<div class="wifisharing-wrap">',e+='<div class="wifisharing-sharing-btn-container">',e+='<a href="javascript:void(0);" class="wifisharing-sharing-btn">'+i.settings.sharingText+"</a>",e+="</div>",e+='<div class="wifisharing-main-container">',e+='<div class="wifisharing-main-outer">',e+='<div class="wifisharing-delta-container">',e+='<span class="icon-delta"></span>',e+="</div>",e+='<div class="wifisharing-main-wrap">',e+='<div class="wifisharing-content">',e+='<div class="wifisharing-qrcode-container">',e+='<div class="wifisharing-qrcode-wrap"></div>',e+='<div class="wifisharing-checkbox-container wifisharing-qrcode-checkbox-container"></div>',e+="</div>",e+='<div class="wifisharing-text-container">',e+='<div class="wifisharing-text-wrap">',e+='<div class="ssid-displaylabel-container reset" widget="displaylabel" label-field="'+d.su.CHAR.WIFI_SHARING.SSID+'"></div>',e+='<div class="wifisharing-password-container">',e+='<div class="password-displaylabel-container reset" widget="displaylabel" label-field="'+d.su.CHAR.WIFI_SHARING.PASSWORD+'"></div>',e+='<div class="wifisharing-no-password-content hidden">',e+='<p class="wifisharing-no-password-text">'+d.su.CHAR.WIFI_SHARING.NO_PASSWORD+"</p>",e+="</div>",e+="</div>",e+="</div>",e+='<div class="security-displaylabel-container reset hidden" widget="displaylabel"></div>',e+='<div class="wifisharing-checkbox-container wifisharing-text-checkbox-container"></div>',e+="</div>",e+="</div>",this._blobSupport&&this._browserSupport&&(e+='<div class="wifisharing-save-btn-container">',e+='<a href="javascript:void(0);" class="wifisharing-save-btn">'+d.su.CHAR.WIFI_SHARING.SAVE_PICTURE+"</a>",e+="</div>"),e+="</div>",e+="</div>",e+="</div>",e+="</div>",s.append(e);var t=new d.su.widgets.displaylabel({id:s.find(".ssid-displaylabel-container")}),a=new d.su.widgets.displaylabel({id:s.find(".password-displaylabel-container")});t.render(),a.render();var n=d.Deferred(),r=d.Deferred();return d("<div>").qrcode?n.resolve():d.su.router.loadFile("js/libs/jquery.qrcode.min.js").then(function(){n.resolve()}),n.then(function(){i._blobSupport&&i._browserSupport?window.html2canvas?(o(),r.resolve()):d.su.router.loadFile("js/libs/html2canvas.min.js").then(function(){o(),r.resolve()}):r.resolve()}),d.when(r).promise();function o(){var e=new d.su.widgets.checkbox({id:s.find(".wifisharing-qrcode-checkbox-container")}),t=new d.su.widgets.checkbox({id:s.find(".wifisharing-text-checkbox-container")});e.render(),t.render(),e.setValue(!0),t.setValue(!0),i.enableQrcode(),i.enableText()}},generateQRCodeText:function(e){var t,i=function(e){return e?e.replace(/([\\\,\"\;\:])/g,"\\$1"):e},s="";switch((e=d.extend({ssid:"",password:"",security:""},e)).security.toLowerCase()){case"wpa":case"wpa2":case"psk":case"psk_sae":t="WPA";break;case"wep":t="WEP";break;default:t="nopass"}return s+="WIFI:S:",s+=i(e.ssid)+";",s+="T:",s+=t+";",s+="P:",s+=i(e.password)+";"},generateQRCode:function(e){var t=this.generateQRCodeText(this._data),i=this.dom().find(".wifisharing-qrcode-wrap");e=d.extend({width:i.innerWidth()||84,height:i.innerHeight()||84,render:this._canvasSupport?"canvas":"table",correctLevel:1,foreground:"#000000",text:function(e){var t,i,s,a;for(t="",s=e.length,i=0;i<s;i++)1<=(a=e.charCodeAt(i))&&a<=127?t+=e.charAt(i):(2047<a?(t+=String.fromCharCode(224|a>>12&15),t+=String.fromCharCode(128|a>>6&63)):t+=String.fromCharCode(192|a>>6&31),t+=String.fromCharCode(128|a>>0&63));return t}(t)},e),i.empty().qrcode(e)},setValue:function(e){var t=this.dom();d.extend(this._data,e),t.find(".ssid-displaylabel-container").data("viewObj").setValue(this._data.ssid),t.find(".password-displaylabel-container").data("viewObj").setValue(this._data.password),0<this._data.password.length?(t.find(".password-displaylabel-container").data("viewObj").show(),t.find(".wifisharing-no-password-content").addClass("hidden")):(t.find(".password-displaylabel-container").data("viewObj").hide(),t.find(".wifisharing-no-password-content").removeClass("hidden")),this.generateQRCode()},showContent:function(){var t=this,i=t.dom().find(".wifisharing-main-container");0<i.filter(":animated").length||i.slideDown(150,function(){d("html").off(".wifisharing").on("click.wifisharing","div",function(e){e.stopPropagation(),(0===i.find(this).length||i.is(this))&&(t.hideContent(),d("html").off(".wifisharing"))});var e=d("div").not(i);e.off("scroll.wifisharing").on("scroll.wifisharing",function(){t.hideContent(),e.off("scroll.wifisharing").off("scroll.wifisharing")})})},hideContent:function(){var e=this.dom().find(".wifisharing-main-container");0<e.filter(":animated").length||e.slideUp(150)},enableQrcode:function(){this.dom().find(".wifisharing-qrcode-container").removeClass("disabled"),this._enable.qrcode=!0,this.generateQRCode({foreground:"#000000"}),this.refreshStatus()},disableQrcode:function(){this.dom().find(".wifisharing-qrcode-container").addClass("disabled"),this._enable.qrcode=!1,this.generateQRCode({foreground:"#676666"}),this.refreshStatus()},enableText:function(){this.dom().find(".wifisharing-text-container").removeClass("disabled"),this._enable.text=!0,this.refreshStatus()},disableText:function(){this.dom().find(".wifisharing-text-container").addClass("disabled"),this._enable.text=!1,this.refreshStatus()},enableSaveBtn:function(){this.dom().find(".wifisharing-save-btn-container").removeClass("disabled")},disableSaveBtn:function(){this.dom().find(".wifisharing-save-btn-container").addClass("disabled")},refreshStatus:function(){var e=this._enable;e.qrcode||e.text?this.enableSaveBtn():this.disableSaveBtn()},saveImage:function(){var s,a=this,e=a.dom();if(!this._canvasSupport||!this._blobSupport||!this._browserSupport)return!1;var t,i,n=(t=e,i=t.clone(!1),i.find("canvas")[0].getContext("2d").drawImage(t.find("canvas")[0],0,0),i.css({"position":"absolute","bottom":0,"opacity":0}),i).removeClass("popup").addClass("download").prependTo("body");if(n.find(".wifisharing-checkbox-container").remove(),a._enable.qrcode&&a._enable.text)s=n.find(".wifisharing-content");else if(a._enable.qrcode&&!a._enable.text)s=n.find(".wifisharing-qrcode-wrap");else{if(a._enable.qrcode||!a._enable.text)return!1;s=n.find(".wifisharing-text-wrap")}s.css({"background-color":n.find(".wifisharing-main-wrap").css("background-color"),"border":"1px solid "+n.find(".wifisharing-main-wrap").css("border-top-color"),"border-radius":"5px","width":s.width(),"height":s.height(),"margin":"0 auto","padding":"18px","box-sizing":"content-box","text-align":s.css("text-align")});html2canvas(s[0],{letterRendering:!0,onrendered:function(e){var t=function(e,t){t=d.extend({width:300,height:300},t);var i=document.createElement("canvas");return i.width=t.width,i.height=Math.max(s.outerHeight(),t.height),i.getContext("2d").drawImage(e,(i.width-e.width)/2,(i.height-e.height)/2),i}(e,{width:300,height:300}).toDataURL("image/png"),i=a._getBlob(t);n.remove(),function(e,t){if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var i=document.createElement("a"),s=window.URL.createObjectURL(e);i.href=s,i.download=t,document.body.appendChild(i),i.click(),setTimeout(function(){window.URL.revokeObjectURL(s),document.body.removeChild(i)},100)}}(i,"qrcode.png")}})},_getBlob:function(e){var t;return function(e,t,i){t=t||"",i=i||512;for(var s=atob(e),a=[],n=0;n<s.length;n+=i){for(var r=s.slice(n,n+i),o=new Array(r.length),d=0;d<r.length;d++)o[d]=r.charCodeAt(d);var l=new Uint8Array(o);a.push(l)}return new Blob(a,{type:t})}((t=e).substr(t.indexOf("base64,")+7,t.length),/data:([^;]*);/i.exec(e)[1])},show:function(){this.dom().removeClass("hidden")},hide:function(){this.dom().addClass("hidden")}})}(jQuery),function(o){o.su.Widget.register("interfaceList",{settings:{},listeners:[],init:function(e){},render:function(){var e=this.dom();this.settings;e.addClass("widget-container interface-list-container");e.append('<ul class="interface-list-wrap"></ul>')},syncData:function(e,t){this.dom().triggerHandler("ev_store_render_items",[e])},renderModels:function(e,t,i){for(var s="",a=0;a<t.length;a++){var n=t[a].getData();s+=this.renderItem(n,a)}for(var r=8;r--;)s+='<li class="stand-in"></li> ';this.dom().find(".interface-list-wrap").html(s)},renderItem:function(e,t){var i='<li class="interface-list-item '+function s(e){return"connected"===e?"connected":"disconnected"}(e.status)+'">';return i+='<div class="interface-item-wrap">',i+='<span class="interface-icon"></span>',i+='<span class="interface-name">'+function a(e,t){return"wan"!==e.toLowerCase()?t?o.su.CHAR.NETWORK_MAP.LAN+" "+t:e:o.su.CHAR.NETWORK_MAP.INTERNET}(e.type,e.serial)+"</span>","connected"===e.status?(i+='<span class="interface-speed-detail">',i+='<span class="interface-speed">'+function n(e){if(1e3<(e=parseInt(e,10)))return e/1e3+o.su.CHAR.NETWORK_MAP.GBPS_2;return e+o.su.CHAR.NETWORK_MAP.MBPS_2}(e.speed)+"</span>",i+='<span class="interface-duplex">'+function r(e){return"full"!==e.toLowerCase()?o.su.CHAR.NETWORK_MAP.HALF_DUPLEX:o.su.CHAR.NETWORK_MAP.FULL_DUPLEX}(e.duplex)+"</span>",i+="</span>"):i+='<span class="interface-speed-detail">---</span>',i+="</div>",i+="</li> "}})}(jQuery),function(n){var e;n.su.Manager=(e=function(){if("object"==typeof this.constructor.instance)return this.constructor.instance;n.su.Observable.call(this),(this.constructor.instance=this)._map={},this._infoMap={},this.type=null},n.su.inherit(n.su.Observable,e),e.prototype.define=function(e,t,i){var s,a;this._infoMap[e]?n.su.debug.error('Duplicated definition "'+e+'"'):(this._infoMap[e]={},this._infoMap[e].constructor=i?(s=this.type,a=i,function(e){s.call(this,e),a&&n.extend(this,a.call(this))}):this.type,this._infoMap[e].options=t)},e.prototype.init=function(e){this._infoMap[e]&&(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].options))},e.prototype.get=function(e){return this._map[e]},e.prototype.destroy=function(e){delete this._map[e]},e)}(jQuery),function(r){r.su.ModelManager=function(){var e=function(){r.su.Manager.call(this),this.type=r.su.Model};function n(e){return"ev_"+e+"_defined"}return r.su.inherit(r.su.Manager,e),e.prototype.define=function(e,t,i){var s=this,a=r.extend({name:e,factory:i,singleton:!0},t);this._infoMap[e]?r.su.debug.error('Duplicated model definition "'+e+'"'):t&&r.su.Model.checkProxyDep(t.proxy)?r.su.Model.importProxyDep(t.proxy,function(){s._infoMap[e]={"settings":a,"constructor":r.su.Model,"status":"defined"},s.trigger(n(e))}):(s._infoMap[e]={"settings":a,"constructor":r.su.Model,"status":"defined"},s.trigger(n(e)))},e.prototype.init=function(e){var t=this._infoMap[e];if(!t||"available"==t.status)return null;!1!==t.settings.singleton?(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].settings),this._infoMap[e].status="available"):t.status="available"},e.prototype.get=function(e){var t=this._infoMap[e];return t?!1===t.settings.singleton?new this._infoMap[e].constructor(this._infoMap[e].settings):this._map[e]?this._map[e]:null:null},e.prototype.loadDefine=function(e,t){this.one(n(e),t),r.su.router.loadModel(e)},e.prototype.getStatus=function(e){return this._infoMap[e]?this._infoMap[e].status:null},e.prototype.isDefined=function(e){return!!this._infoMap[e]},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||"available"!==this._infoMap[e].status)},e.prototype.destroy=function(e){delete this._map[e]},e}()}(jQuery),function(r){r.su.StoreManager=function(){var e=function(){r.su.Manager.call(this),this.type=r.su.Store};function n(e){return"ev_"+e+"_defined"}return r.su.inherit(r.su.Manager,e),e.prototype.define=function(e,t,i){var s=this,a=r.extend({name:e,factory:i,singleton:!0},t);this._infoMap[e]?r.su.debug.error('Duplicated store definition "'+e+'"'):t&&r.su.Store.checkProxyDep(t.proxy)?r.su.Store.importProxyDep(t.proxy,function(){s._infoMap[e]={"settings":a,"status":"defined"},s.trigger(n(e))}):(s._infoMap[e]={"settings":a,"status":"defined"},s.trigger(n(e)))},e.prototype.init=function(e){var t=this._infoMap[e];if(!t||"available"==t.status)return null;if(!1!==t.settings.singleton){var i=this._infoMap[e].settings.type||"store";this._map[e]=new(r.su[r.su.format.capitalize(i)])(this._infoMap[e].settings),this._infoMap[e].status="available"}else t.status="available"},e.prototype.get=function(e){var t=this._infoMap[e];if(!t)return null;if(!1!==t.settings.singleton)return this._map[e]?this._map[e]:null;var i=this._infoMap[e].settings.type||"store";return new(r.su[r.su.format.capitalize(i)])(t.settings)},e.prototype.loadDefine=function(e,t){this.one(n(e),t),r.su.router.loadModel(e)},e.prototype.getStatus=function(e){return this._infoMap[e]?this._infoMap[e].status:null},e.prototype.isDefined=function(e){return!!this._infoMap[e]},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||"available"!==this._infoMap[e].status)},e.prototype.destroy=function(e){delete this._map[e]},e}()}(jQuery),function(k){k.su=k.su||{},k.su.ModuleManager=function(){var e=function(){k.su.Manager.call(this),this.type=k.su.Module,this._depMap={},this._toDestroy=[]};k.su.inherit(k.su.Manager,e);return e.prototype.define=function(e,t,i){var s=this,a=k.extend({"name":e,deps:[],models:[],stores:[],views:[]},t);if(this._infoMap[e])k.su.debug.error('Duplicated module definition "'+e+'"');else{(function(e,t){if(0!==t.length)for(var i=0;i<t.length;i++)this._depMap.hasOwnProperty(t[i])?0<=k.inArray(this._depMap[t[i]],e)||this._depMap[t[i]].push(e):this._depMap[t[i]]=[e]}).call(this,a.name,a.deps),this._infoMap[e]={"settings":a,"constructor":null,"status":k.su.Module.STATUS.LOADING_DEFINE};var n=function(e){this.factory=i,k.su.Module.call(this,e)};k.su.inherit(k.su.Module,n),this._infoMap[e].constructor=n,function(i,e){var t=this._infoMap[i].settings,s=t.models,a=t.stores,n=t.deps,r=t.views,o=!1,d=!1,l=!1,c=!1,u=function(){for(var e=0;e<s.length;e++){var t=s[e];if(!k.su.modelManager.isDefined(t))return!1}d||(d=!0,v())},h=function(){for(var e=0;e<a.length;e++){var t=a[e];if(!k.su.storeManager.isDefined(t))return!1}l||(l=!0,v())},p=function(){for(var e=0;e<n.length;e++){var t=n[e];if(!k.su.moduleManager.isDefined(t))return!1}o||(o=!0,v())},f=function(){for(var e=0;e<r.length;e++){var t=r[e];if(!k.su.viewManager.isDefined(t,i))return!1}c||(c=!0,v())},v=function(){o&&d&&l&&c&&e()};if(0==s.length)d=!0,v();else for(var g=0;g<s.length;g++){var m=s[g];k.su.modelManager.isDefined(m)?u():k.su.modelManager.loadDefine(m,function(){u()})}if(0==a.length)l=!0,v();else for(var b=0;b<a.length;b++){var w=a[b];k.su.storeManager.isDefined(w)?h():k.su.storeManager.loadDefine(w,function(){h()})}if(0==r.length)c=!0,v();else for(var y=0;y<r.length;y++){var x=r[y];k.su.viewManager.isDefined(x,i)?f():k.su.viewManager.loadDefine(x,i,function(){f()})}if(0==n.length)o=!0,v();else for(var _=0;_<n.length;_++){var C=n[_];k.su.moduleManager.isDefined(C)?p():k.su.moduleManager.getStatus(C)!==k.su.Module.STATUS.LOADING_DEFINE?k.su.moduleManager.loadDefine(C,p):k(k.su.moduleManager).one("ev_module_"+C+"_defined",function(){p()})}}.call(this,e,function(){s._infoMap[e].status=k.su.Module.STATUS.DEFINED,k(s).trigger("ev_module_"+e+"_defined")})}},e.prototype.query=function(e){return!!this._map[e]&&this._map[e]},e.prototype.unload=function(e){this._map[e]&&(this._map[e].destroy(),delete this._map[e],this._infoMap[e].status=k.su.Module.STATUS.DEFINED)},e.prototype.loadDefine=function(e,t){k(this).one("ev_module_"+e+"_defined",t),k.su.router.loadController(e)},e.prototype.load=function(e,t){switch(k.su.moduleManager.getStatus(e)){case k.su.Module.STATUS.LOADING_DEFINE:k(k.su.moduleManager).one("ev_module_"+e+"_defined",function(){k.su.moduleManager.init(e),t&&t()});break;case k.su.Module.STATUS.DEFINED:k.su.moduleManager.init(e),t&&t();break;case k.su.Module.STATUS.AVAILABLE:k.su.moduleManager.query(e);t&&t();break;case!1:default:k.su.moduleManager.loadDefine(e,function(){k.su.moduleManager.init(e),t&&t()})}},e.prototype.getStatus=function(e){var t=this._infoMap;return t[e]?t[e].status:!!k.su.router.query(e)&&k.su.Module.STATUS.DEFINE_NOT_LOADED},e.prototype.isDefined=function(e){return!(!this._infoMap[e]||this._infoMap[e].status===k.su.Module.STATUS.LOADING_DEFINE)},e.prototype.isAvailable=function(e){return!(!this._infoMap[e]||this._infoMap[e].status!==k.su.Module.STATUS.AVAILABLE)},e.prototype.init=function(e){var i=this;this._infoMap[e]&&this._infoMap[e].status!=k.su.Module.STATUS.AVAILABLE&&(this._map[e]=new this._infoMap[e].constructor(this._infoMap[e].settings),this._infoMap[e].status=k.su.Module.STATUS.AVAILABLE,this._map[e].addListener("ev_to_destroy",function(e,t){i.prepareDestroy(t)}))},e.prototype.prepareDestroy=function(e){if(this._depMap[e])for(var t=0;t<this._depMap[e].length;t++){var i=this._depMap[e][t];if(this.isAvailable(i))return void(-1===k.inArray(e,this._toDestroy)&&this._toDestroy.push(e))}this.unload(e);var s=k.inArray(e,this._toDestroy);0<=s&&this._toDestroy.splice(s,1);for(var a=this._infoMap[e].settings.deps,n=0;n<a.length;n++)0<=k.inArray(a[n],this._toDestroy)&&this.prepareDestroy(a[n])},e.prototype.launch=function(e,t){this.load(e,function(){k.su.moduleManager.query(e).load(t)})},e}()}(jQuery),function(a){a.su.ViewManager=function(){var e=function(){a.su.Manager.call(this),this.type=a.su.View};a.su.inherit(a.su.Manager,e),e.prototype.init=function(e){this._infoMap[e];var t=new a.su.View(e,this._infoMap[e].DOM),i=t.getID();return this._map[i]=t};return e.prototype.define=function(e,t){this._infoMap[e]||(this._infoMap[e]={"DOM":t,"status":"defined"})},e.prototype.isDefined=function(e,t){return!!this._infoMap[e]},e.prototype.loadDefine=function(e,t,i){var s=this;a.su.router.loadView(t,e,function(e){(function(e){var s=this;a(e).filter("[view]").each(function(e,t){var i=a(t).attr("view").replace(/[\{,\}]/g,"");s.define(i,a(t))})}).call(s,e),i&&i()})},e.prototype.get=function(e){var t="string"==typeof e?e:e.id;if(this._map[t])return this._map[t]},e.prototype.removeByID=function(e){this._map[e]&&(this._map[e].destroy(),delete this._map[e])},e}()}(jQuery),function(e){var t;e.su.ServiceManager=(t=function(){e.su.Manager.call(this),this.type=e.su.Service},e.su.inherit(e.su.Manager,t),t.prototype.register=function(e,t){if(this._map[e])return this._map[e];this._map[e]=t},t.prototype.get=function(e){return this._map[e]?this._map[e]:null},t)}(jQuery),function(a){var e;a.su=a.su||{},a.su.DataBind=(e=function(e,t){a.su.Observable.call(this);if(this.viewObjs=[],this.dataObj=e,t&&(a.isArray(t)||(t=[t])),this.viewEventHandler={},this.dataEventHandler={},this.dataObj&&this.bindDataObj(this.dataObj),t)for(var i=0;i<t.length;i++)this.bindViewObj(t[i])},a.su.inherit(a.su.Observable,e),e.prototype.getName=function(){if(this.dataObj&&this.dataObj._name)return this.dataObj._name},e.prototype.bind=function(e,t){a.isArray(e)||(e=[e]);for(var i=0;i<e.length;i++)this.bindViewObj(e[i]);this.bindDataObj(t)},e.prototype.bindDataObj=function(e){var t=this.constructor.dataEventMap;for(var i in this.unbindDataObj(),this.dataObj=e,t){var s=t[i].fn;"string"==typeof s&&(s=this[s]);var a=function(e,t){return function(){e.apply(t,arguments)}}(s,this);this.dataEventHandler[i]=a,e.addListener(i,a)}},e.prototype.viewIsBinded=function(e){return 0<=a.inArray(e,this.viewObjs)},e.prototype.isBinded=function(){return null!==this.dataObj},e.prototype.bindViewObj=function(e){var t=this.constructor,i=t.viewEventMap[e._type]?t.viewEventMap[e._type]:t.viewEventMap.defaults;if(!this.viewIsBinded(e)){for(var s in this.viewObjs.push(e),this.viewEventHandler[e.domId]={},i){var a=i[s].fn;"string"==typeof a&&(a=this[a]);var n=function(t,i,s){return function(){var e=Array.prototype.slice.call(arguments);e[e.length]=i,t.apply(s,e)}}(a,e,this);this.viewEventHandler[e.domId][s]=n,e.dom().on(s,n)}e.dataBind?e.dataBind.push(this):e.dataBind=[this]}},e.prototype.unbind=function(){this.unbindDataObj(),this.unbindViewObjs()},e.prototype.unbindDataObj=function(){if(this.dataObj){for(var e in this.dataEventHandler)this.dataObj.off(e,this.dataEventHandler[e]);this.dataObj=null}this.trigger("ev_data_unbind")},e.prototype.unbindViewObj=function(e){var t;if(0<=(t=a.inArray(e,this.viewObjs))){var i=this.viewEventHandler[e.domId];for(var s in i)i.hasOwnProperty(s)&&e.dom().off(s,i[s]);delete this.viewEventHandler[e.domId],this.viewObjs.splice(t,1)}0<=(t=a.inArray(this,e.dataBind))&&e.dataBind.splice(t,1)},e.prototype.unbindViewObjs=function(){for(var e=this.viewObjs.length;0<e;e--)this.unbindViewObj(this.viewObjs[e-1])},e.prototype.syncView=function(){},e)}(jQuery),function(r){r.su=r.su||{},r.su.DataFieldBind=function(){var i={sync:function(e){if(this.dataObj){var t=this.dataObj.getValue();this._syncDataValue(t),this.dataObj.disabled&&this.disable()}}},e={defaults:{ev_view_change:{fn:function(e,t,i){switch(e.stopPropagation(),t.type){case"value":this._responseViewValueChanges(t.value,i);break;case"valid":this.validate();break;case"record":this.dataObj&&(this.setValue(t.value),this.dataObj.record())}}},ev_view_update:{fn:function(){if(this.dataObj){var e=this.dataObj.getValue();this._syncDataValue(e)}}},ev_view_disable:{fn:function(){this.dataObj.disable()}},ev_view_enable:{fn:function(){this.dataObj.enable()}},ev_widget_hide:{fn:function(){this.setNormal&&this.setNormal()}}},"switch":{ev_view_change:{fn:function(e,r,t){switch(e.stopPropagation(),r.type){case"value":!function o(s){var a=s.dataBind[0],e=s.settings,t=e.trueValue,n=(e.falseValue,!1);s.showLoading(r.value===t?"on":"off");var i=function(e,t,i){n=!0,i.one("ev_model_submit_complete",function(e){a.dataObj.isDirty()&&a.dataObj.reset(),s.hideLoading()})};a.one("ev_model_before_submit",i),setTimeout(function(){n||(a.off("ev_model_before_submit",i),s.hideLoading())},0)}(t),this._responseViewValueChanges(r.value,t);break;case"valid":this.validate();break;case"record":this.dataObj&&(this.setValue(r.value),this.dataObj.record())}},argsInterface:null}},cell:{ev_view_change:{fn:function(e,o,t){switch(e.stopPropagation(),o.type){case"value":"switch"===t.column.widgetName&&function d(e){var s=e.settings.objs.grid.dataBind[0],a=e.dom().find("[widget=switch]").data("viewObj"),t=e.column.settings,i=t.trueValue,n=(t.falseValue,!1);a.showLoading(o.value===i?"on":"off");var r=function(e,t,i){n=!0,s.one("ev_store_sync_complete",function(e){s.isDirty()&&s.reset(),a.hideLoading()})};s.one("ev_store_before_sync",r),setTimeout(function(){n||(s.off("ev_store_before_sync",r),a.hideLoading())},0)}(t),this._responseViewValueChanges(o.value,t);break;case"valid":this.validate();break;case"record":this.dataObj&&(this.setValue(o.value),this.dataObj.record())}}}}};for(var t in e)"defaults"!=t&&(e[t]=r.extend(!0,{},e.defaults,e[t]));var o=function(e,t){r.su.DataBind.call(this,e,t),this.addListener(i)};r.su.inherit(r.su.DataBind,o),o.argsTransMap={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}},validate:{},getValue:{}},o.viewEventMap=e,o.dataEventMap={ev_data_change:{fn:function(e,t){switch(t.type){case"_value":this.setNormal(),this._responseDataValueChange(t.value.value,t.value.oldValue);break;case"valid":!0===t.value?this.setNormal():this.setError(t.value),this.fireEvent("ev_valid_change",[t.value])}}},ev_model_before_submit:{fn:function(e,t,i){this.trigger("ev_model_before_submit",[t,i])}}};var s=function(r){return function(){var e,t=o.argsTransMap[r];if(this.viewObjs&&0<this.viewObjs.length)for(var i in this.viewObjs){var s,a=this.viewObjs[i],n=a._type;if(a[r])e=(s=a[r].apply(a,t&&t[n]?t[n](arguments):arguments))===undefined?e:s}this.dataObj&&this.dataObj[r]&&(e=s=this.dataObj[r].apply(this.dataObj,t&&t["dataObj"]?t["dataObj"](arguments):arguments));return e}};for(var t in r.su.Widget.regMap){if(r.su.Widget.regMap.hasOwnProperty(t))var a=r.su.Widget.regMap[t];for(var n in a)a.hasOwnProperty(n)&&"function"==typeof a[n]&&"_init"!=n&&"init"!=n&&"create"!=n&&(o.prototype[n]||(o.prototype[n]=s(n)))}for(var t in r.su.DataField.prototype)"function"==typeof r.su.DataField.prototype[t]&&(o.prototype[t]||(o.prototype[t]=s(t)));return o.prototype.setValue=function(e){this.dataObj?this.dataObj.setValue(e):this._syncDataValue(e)},o.prototype.getName=function(){if(this.dataObj&&this.dataObj.name)return this.dataObj.name},o.prototype._responseViewValueChanges=function(e,t){this.dataObj&&(r.su.valueEqual(e,this.dataObj.getValue())||this.dataObj.setValue(e))},o.prototype._responseDataValueChange=function(e,t){if(r.su.valueEqual(e,t)){var i=this.viewObjs.length;if(0===i)this.fireEvent("ev_value_change",[e,t]);else for(var s=0;s<i;s++)for(var a=this.viewObjs[s],n=0;n<a.dataBind.length;n++){a.dataBind[n]instanceof r.su.DataFieldBind&&a.dataBind[n].fireEvent("ev_value_change",[e,t])}}else{if(!1===this._syncDataValue(e))return;this.fireEvent("ev_value_change",[e,t])}},o.prototype._syncDataValue=function(e){for(var t=0;t<this.viewObjs.length;t++){var i=this.viewObjs[t];if(i.setValue&&(i.getValue&&r.su.valueEqual(i.getValue(),e)||i.setValue(e)),this.dataObj&&!r.su.valueEqual(this.dataObj.getValue(),e))return!1;for(var s=0;s<i.dataBind.length;s++){var a=i.dataBind[s];a!==this&&a instanceof r.su.DataFieldBind&&a.getValue&&!r.su.valueEqual(a.getValue(),e)&&i.dataBind[s].setValue(e)}}},o.prototype.bindDataObj=function(e){o.superclass.bindDataObj.call(this,e),this.syncView()},o.prototype.bindViewObj=function(e){o.superclass.bindViewObj.call(this,e),this.syncView()},o.prototype.syncView=function(){this.fireEvent("sync")},o}()}(jQuery),function(l){l.su=l.su||{},l.su.ModelBind=function(){var e={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}},load:{dataObj:function(){var e=[].slice.call(arguments,0),t=e[0];return t&&t.success&&(t.success=a.call(this,t.success)),t&&t.fail&&(t.fail=a.call(this,t.fail)),t&&t.error&&(t.error=a.call(this,t.error)),e}}},t={defaults:{"value_change":{fn:"setValue",argsInterface:null},"validate_change":{fn:"validate"},ev_view_change:{fn:function(e,t){switch(t.type){case"value":this.setValue(t.value);break;case"valid":this.validate()}}}},form:{"value_change":{fn:function(e,t,i){},argsInterface:null}}};for(var i in t)"defaults"!=i&&(t[i]=l.extend(!0,{},t.defaults,t[i]));var s={ev_model_submit_error:{fn:function(e,t){l.su.raise({msg:"ev_model_submit_error",type:"model_submit_error",errorCode:t,modelBind:this})},argsInterface:null},ev_model_load_error:{fn:function(e,t){l.su.raise({msg:"ev_model_load_error",type:"model_load_error",errorCode:t,modelBind:this})},argsInterface:null},ev_model_ajax_error:{fn:function(e,t,i){l.su.raise({msg:"ev_model_ajax_error",type:"model_ajax_error",ajaxErrorStatus:t,ajaxErrorXhr:i,modelBind:this})},argsInterface:null},ev_before_load_data:{fn:function(e,t){this.fireEvent("ev_before_load_data",[t])},argsInterface:null},ev_loaded:{fn:function(e,t){this.fireEvent("ev_loaded",[t])},argsInterface:null},ev_data_change:{fn:function(e,t,i,s){this._responseDataChange();var a=this[i.getName()];this.trigger("ev_data_change",[t.value,a,this])}},ev_data_record:{fn:function(e,t,i,s){var a=this[i.getName()];this.trigger("ev_data_record",[t.value,a,this])}},ev_validate_change:{fn:function(e,t){this.trigger("ev_validate_change",[t])}},ev_model_submit:{fn:function(e,t,i){this.trigger("ev_model_submit",[t,i])}},ev_model_before_submit:{fn:function(e,t){this.trigger("ev_model_before_submit",[t])}},ev_model_submit_complete:{fn:function(e){this.trigger("ev_model_submit_complete",[].slice.call(arguments,1))}}},d=function(e,t){this.subFieldsBinds={},l.su.DataBind.call(this,e,t)};l.su.inherit(l.su.DataBind,d),d.argsTransMap=e,d.viewEventMap=t,d.dataEventMap=s;var a=function(e){var t=this;return function(){t&&t.isBinded()?e.apply(t.dataObj,arguments):t=null}},n=function(o){return function(){var e,t=d.argsTransMap[o];if(this.viewObjs&&0<this.viewObjs.length)for(var i in this.viewObjs){var s=this.viewObjs[i],a=s._type;if(s[o]){var n=t&&t[a]?t[a].apply(this,arguments):arguments;e=(r=s[o].apply(s,n))===undefined?e:r}}if(this.dataObj&&this.dataObj[o]){var r;n=t&&t["dataObj"]?t["dataObj"].apply(this,arguments):arguments;e=r=this.dataObj[o].apply(this.dataObj,n)}return e}};for(var i in l.su.Widget.regMap){if(l.su.Widget.regMap.hasOwnProperty(i))var r=l.su.Widget.regMap[i];for(var o in r)r.hasOwnProperty(o)&&"function"==typeof r[o]&&"_init"!=o&&"init"!=o&&"create"!=o&&(d.prototype[o]||(d.prototype[o]=n(o)))}for(var i in l.su.Model.prototype)"function"==typeof l.su.Model.prototype[i]&&(d.prototype[i]||(d.prototype[i]=n(i)));return d.prototype.bindDataObj=function(t){var i=this;if(d.superclass.bindDataObj.call(this,t),this.createSubBinds(),this.viewObjs)for(var e=0;e<this.viewObjs.length;e++)this.syncSubViewBinds(this.viewObjs[e]);for(var s in this.syncView(),t.methods)t.methods.hasOwnProperty(s)&&"function"==typeof t.methods[s]&&(i[s]||(i[s]=function(e){return function(){t.methods[e].apply(i,arguments)}}(s)))},d.prototype.createSubBinds=function(){var e=this.dataObj.fields;this.subFieldsBinds={};for(var t=0;t<e.length;t++)this[e[t].name]=this.subFieldsBinds[e[t].name]=new l.su.DataFieldBind(this.dataObj.data[t])},d.prototype.syncSubViewBinds=function(e){if(e.getAllFields){var t=e.getAllFields();if(!t)return;for(var i=0;i<t.length;i++){var s=t[i],a=s.field,n=this.subFieldsBinds[a];n&&!n.viewIsBinded(s)&&n.bindViewObj(s)}}},d.prototype.syncSubViewUnbinds=function(e){if(e.getAllFields)for(var t=e.getAllFields(),i=0;i<t.length;i++){var s=t[i],a=s.field,n=this.subFieldsBinds[a];n&&n.viewIsBinded(s)&&n.unbindViewObj(s)}},d.prototype.bindViewObj=function(e){d.superclass.bindViewObj.call(this,e),this.dataObj&&this.syncSubViewBinds(e),this.syncView()},d.prototype.unbindDataObj=function(){for(var e in this.subFieldsBinds)this.subFieldsBinds.hasOwnProperty(e)&&(this.subFieldsBinds[e].unbind(),delete this[e]);for(var t in this.dataObj.methods)this.dataObj.methods.hasOwnProperty(t)&&delete this[t];this.subFieldsBinds={},d.superclass.unbindDataObj.call(this)},d.prototype.unbindViewObj=function(e){this.syncSubViewUnbinds(e),d.superclass.unbindViewObj.call(this,e)},d.prototype._responseDataChange=function(){for(var e=this.dataObj.getData(),t=0;t<this.viewObjs.length;t++)for(var i=this.viewObjs[t],s=0;s<i.dataBind.length;s++){var a=i.dataBind[s];a.dataObj!==this.dataObj&&a.dataObj.loadData(e)}},d.prototype.getAllFields=function(){return this.subFieldsBinds},d}()}(jQuery),function(u){u.su=u.su||{},u.su.StoreBind=function(){var i={sync:function(e){if(this.dataObj){for(var t=this.dataObj.getAllKeys(),i=0,s=this.viewObjs.length;i<s;i++)this.viewObjs[i].syncData&&this.viewObjs[i].syncData(t);var a=this.getStoreData();this.loadItems&&this.loadItems(a),this.renderTree&&this.renderTree(a);for(i=0,s=this.viewObjs.length;i<s;i++)this.viewObjs[i].dom().triggerHandler("ev_store_bound")}}},e={setValue:{defaults:function(e){return e},textBox1:function(e){return e[0]},dataObj1:function(e){return e[0]}},load:{dataObj:function(){var e=[].slice.call(arguments,0),t=e[0];return t&&t.success&&(t.success=n.call(this,t.success)),t&&t.fail&&(t.fail=n.call(this,t.fail)),t&&t.error&&(t.error=n.call(this,t.error)),e}}},l=function(e){if("popEditor"==e._type&&0<e.containerMsg.dom().find("div[widget=form]").length)return e.containerMsg.dom().find("div[widget=form]").eq(0).data("viewObj").dataBind[0];return!1},t={defaults:{ev_grid_edit:{fn:function(e,t,i){var s=i.getPlugin("editor"),a=l(s);if(a){if("add"!=t){var n=this.getSubModelBindByKey(t).getData();a.loadData(n,!0)}else{var r=this.dataObj.createModel();this.addModelBind.modelBind=new u.su.ModelBind(r),a.loadData(r.getData(),!0),this.addModelBind.key=this.dataObj.getModelKey(r)}a.setNormal()}else{r=this.dataObj.createModel();if(this.addModelBind.modelBind=new u.su.ModelBind(r),this.addModelBind.modelBind.bindViewObj(s),"add"!=t){n=this.getSubModelBindByKey(t).getData();this.addModelBind.modelBind.dataObj.loadData(n),this.addModelBind.key=t}else this.addModelBind.modelBind.dataObj.loadData(r.getData()),this.addModelBind.key=this.dataObj.getModelKey(r)}this.trigger("ev_before_add",[this.addModelBind.modelBind,this])},argsInterface:null},ev_grid_cancel:{fn:function(e,t,i){var s=i.getPlugin("editor"),a=l(s);a?a.reset():(this.addModelBind.modelBind.reset(),this.addModelBind.modelBind.unbindViewObj(s),this.addModelBind.key=null,this.addModelBind.modelBind=null)}},ev_grid_save:{fn:function(e,t,i,s){var a=s.getPlugin("editor");if(o=l(a)){if(this.trigger("ev_before_save",[o,this]),!0!==(n=o.dataObj.validate({returnDetail:!0})).result)return this.trigger("ev_editor_validator_fail",[n.field]),void t.preventDefault();if(r=this.dataObj.dataConflict(o.dataObj,i))return this.trigger("ev_editor_data_conflict_fail",[o,r]),void t.preventDefault();if("add"!=i)this.getSubModelBindByKey(i).replaceData(o.modelSerialize(o.getData()));else this.addModelBind.key&&(this.addModelBind.modelBind.replaceData(o.modelSerialize(o.getData())),this.dataObj.insertModel(this.addModelBind.modelBind.dataObj))}else{var n,r,o=this.addModelBind.modelBind;if(this.trigger("ev_before_save",[o,this]),!0!==(n=o.dataObj.validate({returnDetail:!0})).result)return this.trigger("ev_editor_validator_fail",[n.field]),void t.preventDefault();if(r=this.dataObj.dataConflict(o.dataObj,i))return this.trigger("ev_editor_data_conflict_fail",[o,r]),void t.preventDefault();if("add"!=i)this.getSubModelBindByKey(i).loadData(o.getData()),o.unbindViewObj(a);else this.addModelBind.key&&(this.addModelBind.modelBind.unbindViewObj(a),this.addModelBind.modelBind.record(),this.dataObj.insertModel(this.addModelBind.modelBind.dataObj))}if(this.addModelBind.key=null,this.addModelBind.modelBind=null,!1!==this.dataObj.autoSync){var d=u.su.getDefaultEvent(this,this.sync);this.trigger("ev_before_sync",[d.ev,this.dataObj.proxy]),d.exe()}}},ev_grid_delete:{fn:function(e,t,i){this.dataObj.removeDataByKey(t);var s=u.su.getDefaultEvent(this,this.sync);this.trigger("ev_before_sync",[s.ev,this.dataObj.proxy,t]),s.exe()}},ev_grid_delete_all:{fn:function(e){var t=this.dataObj.getAllKeys();this.dataObj.removeDataByKey(t);var i=u.su.getDefaultEvent(this,this.sync,{deleteAll:!0});this.trigger("ev_before_delete_all",[i.ev,this.dataObj.proxy]),i.exe()}},ev_grid_row_selected:{fn:function(e,t){this.dataObj.selectByKey(t)}},ev_grid_row_unselected:{fn:function(e,t){this.dataObj.unselectByKey(t)}},ev_grid_row_selected_all:{fn:function(e,t){this.dataObj.selectAll()}},ev_grid_row_unselected_all:{fn:function(e,t){this.dataObj.unselectAll()}},ev_grid_filter:{fn:function(e,t,i,s){this.dataObj.filter({filters:t,append:i,columns:s})}},ev_store_render_items:{fn:function(e,t,i){if(this.dataObj){for(var d=this.dataObj.keyProperty,l=[],s=[],a=0;a<t.length;a++){var n=this.getSubModelBindByKey(t[a]);s.push(n.dataObj),l.push(n)}i.renderModels(d,s,function(e){for(var t=e.length,i=l.length,s=0;s<t;s++){for(var a=e[s].key,n=e[s].obj,r=0;r<i;r++){var o=l[r];if(o.dataObj.getField(d).getValue()!==a)throw new Error("store render item return unknown key");o.bindViewObj(n);break}l.splice(r,1),i-=1}})}}},ev_store_before_sync:{fn:function(e){this.trigger("ev_store_before_sync")}},ev_store_sync_complete:{fn:function(e){this.trigger("ev_store_sync_complete",[].slice.call(arguments,1))}}},form:{},folderTree:{ev_folder_tree_open:{fn:function(e,t,i){this.dataObj.fetchChildren(t,i)}},ev_folder_tree_close:{fn:function(e,t,i){i()}}}};for(var s in t)"defaults"!=s&&(t[s]=u.extend(!0,{},t.defaults,t[s]));var a={ev_loaded:{fn:function(e){var t=this.dataObj;this.unbindDataObj();for(var i=0;i<this.viewObjs.length;i++){var s=this.viewObjs[i];if("grid"!==s._type&&"repeat"!==s._type||s.remove(),"folderTree"===s._type&&s._children.length)return void this.bindDataObj(t,!1)}this.bindDataObj(t),this.fireEvent("ev_loaded"),this.fireEvent("ev_storedata_loaded")},argsInterface:null},ev_model_deleted:{fn:function(e,t){for(var i,s=0;s<t.length;s++){i=t[s];var a=this.getSubModelBindIndex(i);this.subModelsBinds[a].unbind(),this.subModelsBinds.splice(a,1),delete this._convertedkeyMap[this._convertKey(i)];for(var n=0;n<this.viewObjs.length;n++){var r=this.viewObjs[n];"information"===r._type&&r.remove(i),"grid"===r._type&&r.deleteItem(i),"repeat"===r._type&&r.remove(i)}}}},ev_model_inserted:{fn:function(e,t){var i;t=t===undefined?0:t;var s=this.dataObj.getKeyByIndex(t),a=new u.su.ModelBind(this.dataObj.getModelByIndex(t));this.subModelsBinds.splice(t,0,a),this._convertedkeyMap[this._convertKey(s)]=a;for(var n=0;n<this.viewObjs.length;n++)"grid"===(i=this.viewObjs[n])._type&&(i.addItem(s),i.moveItem(s,t))}},ev_store_item_moved:{fn:function(e,t,i,s){var a=this.subModelsBinds.splice(s,1);this.subModelsBinds.splice(i,0,a[0]);for(var n=0;n<this.viewObjs.length;n++)this.viewObjs[n].moveItem(t,i)}},ev_store_sync_success:{fn:function(e,t){this.fireEvent("ev_store_sync_success",[t])}},ev_store_sync_error:{fn:function(e,t){u.su.raise({msg:"ev_store_submit_error",type:"store_submit_error",errorCode:t,storeBind:this})},argsInterface:null},ev_store_ajax_error:{fn:function(e,t,i){u.su.raise({msg:"ev_store_ajax_error",type:"store_ajax_error",ajaxErrorStatus:t,ajaxErrorXhr:i,storeBind:this})},argsInterface:null},ev_data_change:{fn:function(e,t,i,s,a){var n=this.getModelKey(s),r=this.getSubModelBindByKey(n),o=r[i.name];this.trigger("ev_data_change",[t.value,o,r,this])},argsInterface:null},ev_store_before_sync:{fn:function(e,t){this.trigger("ev_store_before_sync",[t])}},ev_store_sync_complete:{fn:function(e){this.trigger("ev_store_sync_complete",[].slice.call(arguments,1))}},ev_render_tree:{fn:function(e){var t=this.dataObj;this.unbindDataObj();for(var i=0;i<this.viewObjs.length;i++){var s=this.viewObjs[i];"folderTree"===s._type&&s._children.length&&s.clearTree()}this.bindDataObj(t),this.fireEvent("ev_loaded"),this.fireEvent("ev_storedata_loaded")},argsInterface:null},ev_store_data_load_success:{fn:function(e,t,i){for(var s=0;s<this.viewObjs.length;s++){"grid"===this.viewObjs[s]._type&&"number"===u.type(i.maxRules)&&this.setMaxRules(i.maxRules)}}},ev_store_select_change:{fn:function(e,t){for(var i=0;i<this.viewObjs.length;i++){var s=this.viewObjs[i];"grid"===s._type&&(t.select&&0<t.select.length&&s.setSelected(t.select),t.unselect&&0<t.unselect.length&&s.setUnselected(t.unselect))}}}},d=function(e,t){this.subModelsBinds=[],this.addModelBind={key:null,modelBind:null},this._convertedkeyMap={},u.su.DataBind.call(this,e,t),this.addListener(i)};u.su.inherit(u.su.DataBind,d),d.argsTransMap=e,d.viewEventMap=t,d.dataEventMap=a;var n=function(e){var t=this;return function(){t&&t.isBinded()?e.apply(t.dataObj,arguments):t=null}},r=function(o){return function(){var e,t=d.argsTransMap[o];if(this.viewObjs&&0<this.viewObjs.length)for(var i in this.viewObjs){var s=this.viewObjs[i],a=s._type;if(s[o]){var n=t&&t[a]?t[a].apply(this,arguments):arguments;e=(r=s[o].apply(s,n))===undefined?e:r}}if(this.dataObj&&this.dataObj[o]){var r;n=t&&t["dataObj"]?t["dataObj"].apply(this,arguments):arguments;e=r=this.dataObj[o].apply(this.dataObj,n)}return e}};for(var s in u.su.Widget.regMap){if(u.su.Widget.regMap.hasOwnProperty(s))var o=u.su.Widget.regMap[s];for(var c in o)o.hasOwnProperty(c)&&"function"==typeof o[c]&&"_init"!=c&&"init"!=c&&"create"!=c&&(d.prototype[c]||(d.prototype[c]=r(c)))}for(var s in u.su.Store.prototype)"function"==typeof u.su.Store.prototype[s]&&(d.prototype[s]||(d.prototype[s]=r(s)));return d.prototype.bindDataObj=function(e,t){d.superclass.bindDataObj.call(this,e),this.createSubBinds(),0!=t&&t==undefined&&this.syncView()},d.prototype.createSubBinds=function(){this.subModelsBinds=[];for(var e=this.dataObj,t=e.getSize(),i=0;i<t;i++){var s=e.getModelByIndex(i),a=this.getModelKey(s),n=new u.su.ModelBind(s);this.subModelsBinds.push(n),this._convertedkeyMap[this._convertKey(a)]=n}},d.prototype.syncSubViewBinds=function(a){var n=this;"grid"===a._type&&(a.remove(),a.loadGridData(this.dataObj.keyProperty,this.dataObj.data,function(){for(var e=a.getRows(),t=0;t<n.subModelsBinds.length;t++){n.dataObj.getKeyByIndex(t);var i=n.subModelsBinds[t],s=e[t];i.bindViewObj(s)}}))},d.prototype.syncSubViewUnbinds=function(e){var t=0!==e.dom().length;if("grid"===e._type){for(var i=e.getRow(),s=e.getPlugin("editor"),a=i.length,n=0;n<a;n++){var r=i[n].obj,o=r.key,d=this.getSubModelBindByKey(o);d&&d.viewIsBinded(r)&&d.unbindViewObj(r)}t&&e.remove(),this.addModelBind&&this.addModelBind.modelBind&&this.addModelBind.modelBind.viewIsBinded(s)&&this.addModelBind.modelBind.unbindViewObj(s)}},d.prototype.bindViewObj=function(e){d.superclass.bindViewObj.call(this,e),this.syncView()},d.prototype.getModelByKey=d.prototype.getSubModelBindByKey=function(e){return this._convertedkeyMap[this._convertKey(e)]},d.prototype.getModelByIndex=d.prototype.getSubModelBindByIndex=function(e){return this.subModelsBinds[e]},d.prototype.getSubModelBindIndex=function(e){var t=this._convertedkeyMap[this._convertKey(e)];return u.inArray(t,this.subModelsBinds)},d.prototype.getModelIndex=function(e){return u.inArray(e,this.subModelsBinds)},d.prototype.getModelKey=function(e){return e[this.dataObj.keyProperty].getValue()},d.prototype.getEditingModel=function(){return this.addModelBind.modelBind},d.prototype.each=function(e){for(var t=0;t<this.subModelsBinds.length;t++){e(this.subModelsBinds[t])}},d.prototype.setField=function(e,t){for(var i=0;i<this.subModelsBinds.length;i++){var s=this.subModelsBinds[i];t(s[e],s)}},d.prototype.unbindDataObj=function(){for(var e=0;e<this.subModelsBinds.length;e++)this.subModelsBinds[e].unbind();this.subModelsBinds=[],this._convertedkeyMap={},d.superclass.unbindDataObj.call(this)},d.prototype.unbindViewObj=function(e){this.syncSubViewUnbinds(e),d.superclass.unbindViewObj.call(this,e)},d.prototype.syncView=function(){this.fireEvent("sync")},d.prototype.getSubModelBindByModel=function(e){for(var t=0;t<this.subModelsBinds.length;t++)if(this.subModelsBinds[t].dataObj===e)return this.subModelsBinds[t];return!1},d.prototype._convertKey=function(e){return u.type(e)+"_"+e},d.prototype._getOriginalKey=function(e){var t=e.slice(0,6),i=e.slice(7);return"number"===t?Number(i):i},d}()}(jQuery),jQuery,$.extend($.su.settings,{classManager:{loader:"Loader"},Proxy:{defaultRoot:"root"},Model:{defaultProxy:"IPFProxy",depFields:["proxy"]},Store:{defaultProxy:"IPFProxy",depFields:["proxy"]},AjaxService:{defaultProxy:"IPFProxy"},AjaxProxy:{defaultConnection:"Connection"}}),$.su.Navigator=function(){var t={},a={},e=function(e){this.settings=$.extend({},t,e),this.container=$(e.container),this.moduleContainerWidget=e.moduleContainerWidget||"panel",this.service=e.service,this.name="navigator",$.su.Service.call(this)};return $.su.inherit($.su.Service,e),e.prototype.setMenu=function(){},e.prototype.getMenu=function(){},e.prototype.getMenuList=function(){},e.prototype["goto"]=function(){},e.prototype.set=function(e){a=e},e.prototype.setContainer=function(e){this.container=$(e).htmlLoader()},e.prototype.load=function(e){var t=this.service.moduleLoader,i=this.service.loading,s=$.su.getObjectLength(a[e]);t.unLoad(this.container),t.load({module:"index"},{module:"page",view:e},this.container,function(){setTimeout(function(){i.hide(e)},0)},s)},e.prototype.destroy=function(){},e}(),function(u){u.su.App=function(){var t,i;u.ajax("./config/models.json?t=9599d0db",{async:!1,method:"GET",dataType:"json",success:function(e){t=u.extend({},e)}}),u.ajax("./config/modules.json?t=9599d0db",{async:!1,method:"GET",dataType:"json",success:function(e){i=e}}),u.ajax("./config/src.js?t=9599d0db",{async:!0,method:"GET",dataType:"script"});var e=function(e){this.override(),u.su.Application.call(this),this.loader=new u.su.Loader,this.classManager=u.su.ClassManager.getInstance(),this.classManager.setLoader(this.loader),new u.su.Ajax({ajax:{contentType:"application/x-www-form-urlencoded",type:"POST"},failHandler:function(a){return function(e,t,i,s){a&&a(e,t,i,s)}},errorHandler:function(i){return function(e,t){i&&i(e,t)}}}),new u.su.Vtype,new u.su.Polling,new u.su.Services.ModuleManager,new u.su.Device({service:{ajax:this.serviceManager.get("ajax"),loading:this.serviceManager.get("loading")}}),new u.su.Time({service:{ajax:this.serviceManager.get("ajax")}}),new u.su.Services.Timer,this.moduleLoader=new u.su.Services.ModuleLoader,this.language=new u.su.LanguageService,this.navigator=new u.su.Navigator({service:{moduleLoader:this.moduleLoader,loading:this.loading}}),this.router=u.su.router=new u.su.Router,this.router.setModelsPath(t),this.router.set(i),this.navigator.set({})};return u.su.inherit(u.su.Application,e),e.prototype.init=function(){var e=u.Deferred(),t=this,i=[],s=u.Deferred();i.push(s),u.su.isMobile()?u.getScript("./js/su/widget/widget.mobile.js",function(){s.resolve()}):s.resolve();var a=u.Deferred();i.push(a);var n=u.su.settings.Loader.classesPath;return this.loader.loadFile(n,function(e){t.loader.setPath(e),a.resolve()}),u.when.apply(this,i).done(function(){e.resolve()}),e.promise()},e.prototype.customWidget=function(){var e={errortip:{animate:function(e){var t=this.dom(),i=t.find("div.widget-error-tips-wrap"),s=t.find("div.error-tips-content"),a=t.closest(".html-loader-container"),n=t.closest(".msg-content-wrap"),r=0<a.length?a:0<n.length?n:u("#index-view-container"),o=r.offset(),d=r.width();"string"===u.type(e)&&s.text(e),t.addClass("show").show();var l=i.offset(),c=i.width();l.left-o.left+c>d&&i.css({"right":0})}}};for(var t in e)if(e.hasOwnProperty(t))for(var i in e[t])e[t].hasOwnProperty(i)&&u.fn[t]&&(u.fn[t][i]=e[t][i])},e.prototype.override=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,i=Number(arguments[1])||0;for((i=i<0?Math.ceil(i):Math.floor(i))<0&&(i+=t);i<t;i++)if(i in this&&this[i]===e)return i;return-1}),u.su.Store.prototype.getIndexsInSnapshot=function(e){var t=this.snapshot,i=this.keyProperty;if(0===e.length)return undefined;for(var s=[],a=0,n=e.length;a<n;a++)for(var r=0,o=t.length;r<o;r++){var d=e[a];if(t[r][i]==d.toString()){s.push(r);break}}return s},u.su.Store.prototype.beforeRemove=function(e,t,a){var i=this.keyProperty;a=a||{};var n=this,s={"key":[],"index":[]};for(var r in t)t.hasOwnProperty(r)&&s.key.push(t[r].oldModel[i]);return s.index=this.getIndexsInSnapshot(s.key),{ajax:u.extend({},{url:a.url||undefined,type:"POST",contentType:"application/x-www-form-urlencoded",traditional:!0},a.ajax),data:u.extend({},s,{operation:"remove"},a.data),success:function(e,t){a.success&&a.success(e),n.fireEvent("ev_store_sync_success"),n.load()},fail:function(e,t,i,s){n.loadData(n.snapshot),a.fail&&a.fail(e,t,i,s),t&&n.trigger("ev_store_sync_error",t)},error:function(e,t){n.loadData(n.snapshot),a.error&&a.error(e,t),n.trigger("ev_store_ajax_error",[e,t])}}},u.su.Error.handle=function(e){switch(e.type){case"model_ajax_error":case"store_ajax_error":return u.su.moduleManager.query("main").showNotice(u.su.CHAR.ERROR[t]||u.su.CHAR.COMMON.SAVE_FAILED,1),!0;case"module_not_found":case"module_not_defined":return u.su.debug.error("navigator error",e.module),!0;default:var t=e.errorCode,i="";switch(t){case"timeout":case"user conflict":case"permission denied":i="";break;default:i=u.su.CHAR.ERROR[t]||u.su.CHAR.COMMON.SAVE_FAILED}return i&&u.su.moduleManager.query("main")&&u.su.moduleManager.query("main").showNotice(i,1),!0}}},e.prototype.reset=function(){},e.prototype.reload=function(){},e.prototype.getInfo=function(){},e}(),u.appUtils=u.su.App.utils={intToArray:function(e,t){e=parseInt(e);for(var i=[];0<e;)i.push(e%2),e=parseInt(e/2);if(i.length<t)for(var s=i.length,a=0;a<t-s;a++)i.push(0);return i},arrayToInt:function(e){for(var t=0,i=1;0<e.length;)t+=(e.shift()||0)*i,i*=2;return t},objectToArray:function(e){var t=[];for(var i in e)t[i]=e[i];return t},resetPortsValue:function(e,t){for(var i=u.appUtils.portSplit(e).split(","),s=u.appUtils.portSplit(t).split(","),a=0;a<i.length;a++){var n=s.indexOf(i[a]);0<=n&&s.splice(n,1)}return u.appUtils.portCombine(s.join(","))},keyHandler:function(e){return e.toString().replace(/[\/\.\:\s\(\)]/g,"_")},doLayout:function(){var e=u("#scroll-layer").height()-u(".bot").height();u("#main-con").css({minHeight:e})},isSameMac:function(e,t){return"string"==typeof e&&"string"==typeof t&&u.trim(e.toLowerCase())===u.trim(t.toLowerCase())}}}(jQuery),$.su.Device=function(){var s={},e=function(e){var i=this,t=["ru","kr","de"];this.settings=$.extend({},s,e),this.settings.DEVICE_NAME_URL=$.su.url("/locale?form=lang"),this.settings.DEVICE_COUNTRY_URL=$.su.url("/locale?form=country"),this.settings.CONFIG_URL="./config/device.json?t=9599d0db",this.service=e.service,this.configs={supportLanIptv:!0,country:""},this.service.ajax.request({ajax:{async:!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){i.configs.deviceName=e.model,i.configs.locale=e.locale,i.configs.force=e.force}}),this.service.ajax.request({ajax:{async:!1},data:{operation:"read"},url:this.settings.DEVICE_COUNTRY_URL,success:function(e){i.configs.country=e.country.toLowerCase(),-1<t.indexOf(i.configs.country)&&(i.settings.CONFIG_URL="./config/device."+i.configs.country+".json")}}),this.service.ajax.request({ajax:{async:!1},url:this.settings.CONFIG_URL,success:function(e,t){$.extend(i.configs,t),i.configs.supportShortGI||delete $.su.CHAR.ADDITIONAL_SETTINGS.SHORT_GI,i.configs.supportLanAgg||(delete $.su.CHAR.NETWORK_STATUS.LINK,delete $.su.CHAR.NETWORK_LAN.LINK,delete $.su.CHAR.NETWORK_IPTV.IPTV_LAN_OCCUPIED,delete $.su.CHAR.NETWORK_IPTV.LA,delete $.su.CHAR.NETWORK_IPTV.IPTV_VLAN_MSGQS,delete $.su.CHAR.NETWORK_IPTV.IPTV_VLAN_MSG)}}),this.service.ajax.request({ajax:{async:!1},url:this.settings.CONFIG_URL,success:function(e,t){$.extend(i.configs,t)}}),this.name="device",$.su.Service.call(this)};return $.su.inherit($.su.Service,e),e.prototype.reboot=function(){},e.prototype.reset=function(){},e.prototype.getProductName=function(){var t=this;return this.configs.deviceName===undefined&&this.service.ajax.request({ajax:{async:!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){t.configs.deviceName=e.model}}),this.configs.deviceName},e.prototype.getRebootTime=function(){var t=this;return this.configs.rebootTime===undefined&&this.service.ajax.request({ajax:{async:!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){t.configs.rebootTime=e.rebootTime}}),this.configs.rebootTime},e.prototype.getLocale=function(){var t=this;return this.configs.locale===undefined&&this.service.ajax.request({ajax:{async:!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){t.configs.locale=e.locale}}),this.configs.locale},e.prototype.getForce=function(){var t=this;return this.configs.force===undefined&&this.service.ajax.request({ajax:{async:!1},data:{operation:"read"},url:this.settings.DEVICE_NAME_URL,success:function(e){t.configs.force=e.force}}),this.configs.force},e.prototype.getCurrentMode=function(){var t=this;return this.configs.mode===undefined&&this.service.ajax.request({ajax:{async:!1},data:{operation:"read"},url:$.su.url("/admin/system?form=sysmode"),success:function(e){t.configs.mode=e.mode}}),this.configs.mode},e.prototype.getCurrentDial=function(){var t=this;return this.configs.dialType===undefined&&this.service.ajax.request({ajax:{async:!1},data:{operation:"read"},url:$.su.url("/admin/network?form=wan_ipv4_status"),success:function(e){t.configs.dialType=e.conntype}}),this.configs.dialType},e.prototype.getIsTriband=function(){var t=this;return this.configs.isTriband===undefined&&this.service.ajax.request({ajax:{async:!1},url:this.settings.CONFIG_URL,success:function(e){t.configs.isTriband=e.isTriband}}),this.configs.isTriband},e.prototype.getIsBeta=function(){var t=this;return this.configs.isBeta===undefined&&this.service.ajax.request({ajax:{async:!1},url:this.settings.CONFIG_URL,success:function(e){t.configs.isBeta=e.isBeta}}),this.configs.isBeta},e.prototype.switchMode=function(e,t,i){var s=this;this.service.loading.show("changeMode"),this.service.ajax.request({url:"./data/sysmod.json",data:{oldValue:e,newValue:t},success:function(e){i(e)},fail:function(){s.service.loading.hide("changeMode")},error:function(){s.service.loading.hide("changeMode")}})},e.prototype.switchDialType=function(e){this.configs.dialType=e},e.prototype.getSoftwareInfo=function(){var t=this;return this.configs.version===undefined&&this.service.ajax.request({ajax:{async:!1},url:"./data/systemSummaryConfig.json",success:function(e){t.configs.version=e.fw_version}}),this.configs.version},e.prototype.getHardwareInfo=function(){},e.prototype.getDeviceStatus=function(){var t=this;return this.service.ajax.request({ajax:{async:!1},url:"./data/status.json",success:function(e){t.configs.status=e.auth}}),this.configs.status},e.prototype.getLanIptv=function(e){return this.configs.supportLanIptv},e.prototype.getLanAgg=function(){return this.configs.supportLanAgg},e.prototype.getOFDMA=function(){return this.configs.supportOFDMA},e.prototype.getZeroWaitDFS=function(){return this.configs.supportZeroWaitDFS},e.prototype.getConfig=function(){return $.extend({},this.configs)},e}(),function(a){a.su.Module=function(){var s=function(e){s.superclass.constructor.call(this,e)};a.su.inherit(a.su.Module,s);return s.prototype.launch=function(e){(function(){var i=a.su.moduleManager.query("index"),s=this.settings.commonSave;"available"===a.su.moduleManager.getStatus("index")&&(i.hideSaveBtn(),!1===s&&i.alwaysShowSaveBtn(this.name),a.each(a.extend({},this.data.stores,this.data.models),function(e,t){t.dataObj&&t.dataObj.proxy&&(!1!==s&&i.registerAutoSaveData(t),i.registerSaveLoading(t))}))}).call(this),s.superclass.launch.call(this,e)},s.prototype.destroy=function(e){var i=a.su.moduleManager.query("index"),t=this.settings.commonSave;"available"===a.su.moduleManager.getStatus("index")&&(!1===t&&i.cancelAlwaysShowSaveBtn(this.name),a.each(a.extend({},this.data.stores,this.data.models),function(e,t){t.dataObj&&t.dataObj.proxy&&(i.unRegisterAutoSaveData(t),i.unRegisterSaveLoading(t))})),s.superclass.destroy.call(this)},s.prototype.registerAutoSaveData=function(e){if("available"!==a.su.moduleManager.getStatus("index"))return!1;var i=a.su.moduleManager.query("index");return a.isArray(e)||(e=[e]),a.each(e,function(e,t){(t instanceof a.su.ModelBind||t instanceof a.su.StoreBind)&&i.registerAutoSaveData(t)}),!0},s.prototype.unRegisterAutoSaveData=function(e){if("available"!==a.su.moduleManager.getStatus("index"))return!1;var i=a.su.moduleManager.query("index");return a.isArray(e)||(e=[e]),a.each(e,function(e,t){(t instanceof a.su.ModelBind||t instanceof a.su.StoreBind)&&i.unRegisterAutoSaveData(t)}),!0},s.STATUS=a.su.Module.STATUS,s}()}(jQuery),$.su.LanguageService=function(){var e=function(){this.init(),this.name="language",$.su.Service.call(this)};return $.su.inherit($.su.Service,e),e.prototype.init=function(){},e.prototype.getLocale=function(e,t){$.su.language.getLocale(e,t)},e.prototype.switchTo=function(e,t,i){$.su.language.switchTo(e,t,i)},e}(),function(i){var t,s,a,n,r;i.su.Time=(t={format:"MM/dd/yyyy HH:mm:ss",defaultTime:"01/01/1990 00:00:00",proxy:"timeServiceProxy"},a=s=null,n=i.Deferred(),r=function(e){if("object"==typeof r.instance)return r.instance;clearInterval(s),this.settings=i.extend({},t,e),this.name="time",i.su.Service.call(this),(r.instance=this).init()},i.su.inherit(i.su.Service,r),r.prototype.init=function(){var t=this;this.currentTime=null,this.hour24Enable=null,this.proxy||(this.proxy={read:function(){var e=[].slice.call(arguments,0);n.then(function(){t.proxy.read.apply(t.proxy,e)})}}),i.su.require([this.settings.proxy]).done(function(){t.proxy=i.su.createSync(t.settings.proxy),n.resolve(),t.sync()})},r.prototype.addListener=function(e,t,i,s){this.constructor.superclass.on.call(this,e,t,i,s),this.addListenerHandler(e)},r.prototype.removeListener=function(e,t,i,s){this.constructor.superclass.off.call(this,e,t,i,s),this.removeListenerHandler(e)},r.prototype.fireEvent=function(e){var t="";switch(e){case"on_time_change":t=this.currentTime;break;case"on_hour24_change":t=this.hour24Enable}this.constructor.superclass.trigger.call(this,e,t)},r.prototype.addListenerHandler=function(e){if(this.eventDealer.eventInfo[e]){var t=this;switch(e){case"on_time_change":this.sync(function(){t.updateTime()});break;case"on_hour24_change":this.sync()}}},r.prototype.removeListenerHandler=function(e){var t=this.eventDealer.eventInfo;if(t[e])switch(e){case"on_time_change":0===t[e].length&&this.stopUpdateTime()}},r.prototype.sync=function(t){var i=this;this.isBusy?t&&t(i.currentTime):(this.isBusy=!0,this.proxy.read({success:function(e){i.setHour24("on"===e.hour24Enable),i.setTime(i.convert(e.date+" "+e.time)),i.isBusy=!1,t&&t(i.currentTime)},fail:function(){i.setHour24(!0),i.setTime(new Date),i.isBusy=!1,t&&t(i.currentTime)},error:function(){i.setHour24(!0),i.setTime(new Date),i.isBusy=!1,t&&t(i.currentTime)}}))},r.prototype.getTime=function(){var t=this;return null===this.currentTime&&this.proxy.read({ajax:{async:!1},success:function(e){t.setTime(t.convert(e.date+" "+e.time))},fail:function(){t.setTime(new Date)},error:function(){t.setTime(new Date)}}),this.currentTime},r.prototype.setTime=function(e){"date"===i.type(e)&&(this.currentTime=e,this.fireEvent("on_time_change"))},r.prototype.getHour24=function(e){var t=this;return null===this.hour24Enable&&this.proxy.read({ajax:{async:!1},success:function(e){t.setHour24("on"===e.hour24Enable)},fail:function(e){t.setHour24(!0)},error:function(e){t.setHour24(!0)}}),this.hour24Enable},r.prototype.setHour24=function(e){this.hour24Enable=!!e,this.fireEvent("on_hour24_change")},r.prototype.updateTime=function(){var i=this;clearInterval(s),a=new Date,s=setInterval(function(){var e=new Date,t=e.getTime()-a.getTime();a=e,i.setTime(new Date(i.currentTime.getTime()+t))},1e3)},r.prototype.stopUpdateTime=function(){clearInterval(s),s=null},r.prototype.convert=function(e,t){e=e||this.settings.defaultTime,t=t||this.settings.format;var i={"y+":"year","M+":"month","d+":"day","H+":"hour","m+":"minute","s+":"second"},s={};for(var a in i){var n=new RegExp(a).exec(t);s[i[a]]=e.slice(n.index,n.index+n[0].length)}return new Date(s.year,s.month-1,s.day,s.hour,s.minute,s.second)},r.prototype.format=function(e,t,i){i=i||this.hour24Enable;var s=t||this.settings.format,a=e.getHours(),n={"y+":e.getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"H+":a,"m+":e.getMinutes(),"s+":e.getSeconds()};for(var r in i||(0===a?n["H+"]=12:12<a&&(n["H+"]-=12)),n){var o=n[r];if(new RegExp("("+r+")").test(s)){var d=RegExp.$1;s="H+"!==r||i?s.replace(d,("0"+o).slice(-1*(d+"").length)):s.replace(d,o)}}return i||(s+=12<=a?" PM":" AM"),s},r.prototype.on=r.prototype.addListener,r.prototype.off=r.prototype.removeListener,r)}(jQuery),function(v){var t;v.su.define("IPFProxy",{extend:"AjaxProxy",constructor:(t=function(e){t.$parent.call(this,e),e&&e.hasOwnProperty("preventSuccessEvent")&&(this.preventSuccessEvent=e.preventSuccessEvent),e&&e.hasOwnProperty("preventFailEvent")&&(this.preventFailEvent=e.preventFailEvent),this.defaultOption.preventSuccessEvent=this.preventSuccessEvent,this.defaultOption.preventFailEvent=this.preventFailEvent},t),successJudge:function(e,t){if(!1!==e.success)return!0;var i=e.errorCode||e.error||e.error_code||e.errorcode,s=v.su.moduleManager.query("main");switch(i){case"timeout":s instanceof v.su.Module&&s.trigger("ev_login_timeout");break;case"auto upgrading":s instanceof v.su.Module&&s.trigger("ev_auto_upgrading");break;case"user conflict":s instanceof v.su.Module&&s.trigger("ev_user_conflict");break;case"permission denied":s instanceof v.su.Module&&s.trigger("ev_permission_denied")}return i},readFilter:function(e){return e.others=e.others||{},e.others.max_rules&&(e.others.maxRules=e.others.max_rules,delete e.others.max_rules),e.data},failFilter:function(e){var t=v.extend({},e);return t.errorCode=e.errorCode||e.error||e.error_code||e.errorcode,t},ajax:{contentType:"application/x-www-form-urlencoded"},sync:function(e){var t,i=Array.prototype.slice.call(arguments,0),s=e.operation,a=e.dataObj;a instanceof v.su.Model?t="Model":a instanceof v.su.Store&&(t="Store"),"read"===s&&"Model"===t?this.read.apply(this,i):"read"===s&&"Store"===t?this.load.apply(this,i):"write"===s&&"Model"===t?this.write.apply(this,i):"write"===s&&"Store"===t?(v.su.isEmptyObject(e.difference.remove)||this.remove.apply(this,i),v.su.isEmptyObject(e.difference.insert)||this.insert.apply(this,i),v.su.isEmptyObject(e.difference.update)||this.update.apply(this,i)):this[s]?this[s].apply(this,i):v.su.debug.error("no such operation: ",s)},read:function(e,t){var a=this;e.data=v.extend({},{operation:"read"},e.data);var n=e.success;!1!==t&&(e.success=function(e,t,i,s){a.trigger("ev_load",[e]),n&&n(e,t,i,s)}),this.op("read",e)},write:function(e){var t=e.dataObj;e.difference=v.extend({update:{}},e.difference),e.data=v.extend({},{operation:"write"},e.difference.update.model,e.data);var i=e.success;e.success=function(e){t&&t.record(),i&&i(e)},this.op("write",e)},load:function(e){var a=this;e.data=v.extend({},{operation:"load"},e.data);var n=e.success;e.success=function(e,t,i,s){a.trigger("ev_load",[e,t.others]),n&&n(e,t,i,s)},this.op("load",e)},remove:function(e){var t=e.difference.remove,a=e.dataObj,i=a.keyProperty,s={"key":[],"index":[]};for(var n in t)t.hasOwnProperty(n)&&s.key.push(t[n].oldModel[i]);s.index=a.getIndexsInSnapshot(s.key),e.data=v.extend({},s,{operation:"remove"});var r=e.success||function(){};e.traditional=!0,e.success=function(e,t,i,s){a.record(),r(e,t,i,s)},this.op("remove",e)},insert:function(e){var t=e.difference.insert,i={},a=e.dataObj,s=!1;for(var n in t)if(t.hasOwnProperty(n)){if(s)continue;i.key="add",i["new"]=JSON.stringify(t[n].model),i.old="add",s=!(i.index=0)}e.data=v.extend({},i,{operation:"insert"});var r=e.success||function(){};e.success=function(e,t,i,s){a.record(),r(e,t,i,s)},this.op("insert",e)},update:function(e){var t=e.difference.update,i={},a=e.dataObj,s=a.keyProperty,n=!1;for(var r in t)if(t.hasOwnProperty(r)){if(n)continue;i.key=t[r].oldModel[s],i["new"]=JSON.stringify(t[r].model),i.old=JSON.stringify(t[r].oldModel),n=!0}e.data=v.extend({},i,{operation:"update"});var o=e.success||function(){};e.success=function(e,t,i,s){a.record(),o(e,t,i,s)},this.op("update",e)},_decorateOption:function(c){var u=this;c.writeFilter&&(c.data=c.writeFilter.call(this,c.data));var h=!!c&&c.success,p=!!c&&c.fail,f=["ru","kr","de"];c.success=function(e,t,i){var s,a=["/domain_login?form=dlogin","/locale?form=lang","/locale?form=country","/login?form=auth","/login?form=keys","/login?form=password","/locale?form=list","/login?form=get_token","/login?form=get_eweb_url","/login?form=get_deviceInfo","/login?form=check_factory_default","/login?form=get_firmware_info","/login?form=check_internet","/login?form=cloud_bind_status","/login?form=vercode","/login?form=sysmode","/admin/firmware?form=config_multipart","/admin/firmware?form=save_upgrade","/admin/openvpn?form=export","/admin/syslog?form=save_log","/admin/vpn?form=ovpn"];if(v.each(a,function(e,t){a[e]=v.su.url(t).toString()}),a.push("./config/device.json?t=9599d0db"),v.each(f,function(e,t){a.push("./config/device."+t+".json")}),a.indexOf(c.url.toString())<0){if(""==e||e&&e.data==undefined)return;try{s=JSON.parse(v.su.encryptor.dataDecrypt(e.data))}catch(l){s={"success":!1,"errorcode":"timeout"}}}else s=e;var n=!c.successJudge||c.successJudge(s,t,i);if(!0===n){var r=c.readFilter?c.readFilter.call(u,s):s;h&&h(r,s,t,i);var o=c.data&&c.data.operation;!0!==c.preventSuccessEvent&&o&&"read"!=o&&"load"!=o&&v.su.moduleManager.query("main")&&v.su.moduleManager.query("main").showNotice(v.su.CHAR.COMMON.SAVED)}else{var d=c.failFilter?c.failFilter.call(u,s):s;p&&p(d,n,t,i),!0!==c.preventFailEvent&&v.su.raise({msg:"ev_proxy_fail",type:"proxy_fail",errorCode:s.errorCode||s.error||s.error_code||s.errorcode,proxy:u})}}}})}(jQuery);