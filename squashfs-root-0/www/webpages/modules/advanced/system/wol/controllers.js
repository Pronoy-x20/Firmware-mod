!function(l){l.su.moduleManager.define("wol",{models:[],stores:["wolDeviceListStore","wolConnectedDevicesListStore"],services:["ajax"],views:["wolAdvView"],listeners:{"ev_on_launch":function(e,t,n,a,i,s,c){this.unRegisterAutoSaveData([i.wolDeviceListStore]),i.wolDeviceListStore.load()}},init:function(e,a,t,d,n,i){this.configViews({id:"wolAdvView",items:[{id:"grid-wol-device-list",configs:{tbar:{add:{text:l.su.CHAR.OPERATION.ADD,index:0}},popEditor:{addTitle:l.su.CHAR.WOL.ADD_DEVICE,editTitle:l.su.CHAR.WOL.EDIT_DEVICE,content:"#grid-wol-device-editor",fields:[{name:"name"},{name:"mac"}]},paging:{},columns:[{text:l.su.CHAR.WOL.DEVICE_NAME,dataIndex:"name"},{text:l.su.CHAR.WOL.MAC_ADDRESS,dataIndex:"mac"},{xtype:"actioncolumn",text:l.su.CHAR.WOL.WAKE_UP_2,cls:"status grid-wol-wake-up-column",renderer:function(e,t){return'<a href="javascript:void(0)" class="grid-content-btn btn-wakeup">','<span class="icon"></span>','<span class="text"></span>',"</a>",'<a href="javascript:void(0)" class="grid-content-btn btn-wakeup"><span class="icon"></span><span class="text"></span></a>'}},{xtype:"actioncolumn",text:l.su.CHAR.GRID.MODIFY,renderer:function(e,t){return'<span class="icon"></span>','<span class="text"></span>',"</a>",'<a href="javascript:void(0)" class="grid-content-btn grid-content-btn-delete btn-delete">','<span class="icon"></span>','<span class="text"></span>',"</a>",'<a href="javascript:void(0)" class="grid-content-btn grid-content-btn-edit btn-edit"><span class="icon"></span><span class="text"></span></a><a href="javascript:void(0)" class="grid-content-btn grid-content-btn-delete btn-delete"><span class="icon"></span><span class="text"></span></a>'}}]}},{id:"connected-wol-device-list",configs:[{type:"logo",dataIndex:"deviceType"},{type:"deviceName",dataIndex:"name"},{type:"mac",dataIndex:"mac"}]}]}),this.control({"#grid-wol-device-list => .btn-wakeup":{"ev_grid_action_click":function(e,t){var n=d.wolDeviceListStore.getModelByKey(t).getData();i.ajax.request({url:l.su.url("/admin/wol?form=device"),data:{operation:"wakeup",data:JSON.stringify(n)}})}},"#connected-wol-device-button":{"ev_button_click":function(e){d.wolConnectedDevicesListStore.load(),a.wolAdvView.connectedDeviceMsg.show()}},"#connected-wol-device-list":{"ev_item_click":function(e,t){var n=d.wolDeviceListStore.getEditingModel();n.name.setValue(t.name),n.mac.setValue(t.mac),a.wolAdvView.connectedDeviceMsg.hide()}},"#grid-wol-device-list":{"ev_grid_before_save":function(e,t){for(var n=d.wolDeviceListStore.getEditingModel(),a=d.wolDeviceListStore.getData(),i=n.mac.getValue(),s=n.key.getValue(),c=0,o=a.length;c<o;c++)if(a[c].key!==s&&a[c].mac===i)return n.mac.setError(l.su.CHAR.ERROR["00000051"]),t.preventDefault(),!1;return!0}}}),this.listen({})}},function(e,t,n,a,i,s){return{}})}(jQuery);